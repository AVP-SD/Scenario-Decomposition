<!DOCTYPE html>
<html>
<head>
    <title>Scenario Decomposition Practice</title>
   <!-- Basic favicon -->
<link rel="icon" href="favicon_io/favicon.ico" sizes="any">

<!-- PNG icons -->
<link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">

<!-- Apple devices (iPhone, iPad) -->
<link rel="apple-touch-icon" href="favicon_io/apple-touch-icon.png">

<!-- Optional: manifest (if generated) -->
<link rel="manifest" href="favicon_io/site.webmanifest">
    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // Override default alert
  window.alert = function(message) {
    Swal.fire({
      icon: 'info',
      title: 'Notice',
      text: message
    });
  };
</script>
    <style>
     
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            overflow-x: hidden;
            background-color: #050505;
            color: var(--text-color);
            min-height: 100vh;
            position: relative;
        }

        .gradient-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-sphere {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
        }

        .sphere-1 {
            width: 40vw;
            height: 40vw;
            background: linear-gradient(40deg, rgba(255, 0, 128, 0.8), rgba(255, 102, 0, 0.4));
            top: -10%;
            left: -10%;
            animation: float-1 15s ease-in-out infinite alternate;
        }

        .sphere-2 {
            width: 45vw;
            height: 45vw;
            background: linear-gradient(240deg, rgba(72, 0, 255, 0.8), rgba(0, 183, 255, 0.4));
            bottom: -20%;
            right: -10%;
            animation: float-2 18s ease-in-out infinite alternate;
        }

        .sphere-3 {
            width: 30vw;
            height: 30vw;
            background: linear-gradient(120deg, rgba(133, 89, 255, 0.5), rgba(98, 216, 249, 0.3));
            top: 60%;
            left: 20%;
            animation: float-3 20s ease-in-out infinite alternate;
        }

        .noise-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.05;
            z-index: 5;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: 40px 40px;
            background-image: 
                linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            z-index: 2;
        }

        .glow {
            position: absolute;
            width: 40vw;
            height: 40vh;
            background: radial-gradient(circle, rgba(72, 0, 255, 0.15), transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            animation: pulse 8s infinite alternate;
            filter: blur(30px);
        }

        .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        @keyframes float-1 {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(10%, 10%) scale(1.1); }
        }

        @keyframes float-2 {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(-10%, -5%) scale(1.15); }
        }

        @keyframes float-3 {
            0% { transform: translate(0, 0) scale(1); opacity: 0.3; }
            100% { transform: translate(-5%, 10%) scale(1.05); opacity: 0.6; }
        }

        @keyframes pulse {
            0% { opacity: 0.3; transform: translate(-50%, -50%) scale(0.9); }
            100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.1); }
        }

        /* Update existing container styles to work with the background */
        .panel, #login-panel, .admin-view, .submission-details-view, .admin-filters {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .panel,
        [data-theme="dark"] #login-panel,
        [data-theme="dark"] .admin-view,
        [data-theme="dark"] .submission-details-view,
        [data-theme="dark"] .admin-filters {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        :root {
            --background-color: #ffffff;
            --text-color: #333333;
            --panel-bg: #f5f5f5;
            --node-bg: #ffffff;
            --border-color: #ddd;
            --hover-bg: #f8f9fa;
            --selected-bg: #e3f2fd;
            --terminal-bg: #e8f5e9;
            --terminal-color: #2e7d32;
            --table-header-bg: #f2f2f2;
            --table-border: #ddd;
            --input-bg: #ffffff;
            --input-text: #333333;
            --input-border: #ddd;
            --button-bg: #4CAF50;
            --button-hover: #45a049;
            --button-secondary-bg: #2196F3;
            --button-danger-bg: #f44336;
            --dropdown-bg: #ffffff;
            --dropdown-text: #333333;
            --dropdown-hover: #f5f5f5;
            --container-bg: #ffffff;
            --card-bg: #ffffff;
            --header-bg: #ffffff;
            --footer-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --select-bg: #ffffff;
            --select-text: #333333;
            --select-border: #ddd;
            --select-hover: #f5f5f5;
            --shift-button-bg: #e0e0e0;
            --shift-button-hover: #d0d0d0;
            --shift-button-active: #4CAF50;
        }

        .quality-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .popup-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: popupFadeIn 0.5s ease-out;
        }

        [data-theme="dark"] .popup-content {
            background: rgba(30, 30, 30, 0.95);
            color: #fff;
        }

        .cat-gif {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            margin-bottom: 1rem;
            object-fit: cover;
        }

        .close-popup {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 1rem;
            transition: background 0.3s ease;
        }

        .close-popup:hover {
            background: #45a049;
        }

        @keyframes popupFadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        [data-theme="dark"] {
            --background-color: #1f0531;
            --text-color: #ffffff;
            --panel-bg: #2d2d2d;
            --node-bg: #333333;
            --border-color: #444444;
            --hover-bg: #3d3d3d;
            --selected-bg: #1a3a4a;
            --terminal-bg: #1b3a1b;
            --terminal-color: #4caf50;
            --table-header-bg: #2d2d2d;
            --table-border: #444444;
            --input-bg: #2d2d2d;
            --input-text: #ffffff;
            --input-border: #444444;
            --button-bg: #4CAF50;
            --button-hover: #45a049;
            --button-secondary-bg: #2196F3;
            --button-danger-bg: #f44336;
            --dropdown-bg: #2d2d2d;
            --dropdown-text: #ffffff;
            --dropdown-hover: #3d3d3d;
            --container-bg: #2d2d2d;
            --card-bg: #333333;
            --header-bg: #2d2d2d;
            --footer-bg: #2d2d2d;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --select-bg: #2d2d2d;
            --select-text: #ffffff;
            --select-border: #444444;
            --select-hover: #3d3d3d;
            --shift-button-bg: #1a1a1a;
            --shift-button-hover: #2d2d2d;
            --shift-button-active: #4CAF50;
        }

        [data-theme="dark"] .boolean-option {
            border-color: var(--border-color);
        }

        [data-theme="dark"] .boolean-option:hover {
            background: var(--hover-bg);
            border-color: #666;
            box-shadow: 0 2px 8px rgba(255,255,255,0.1);
        }

        [data-theme="dark"] .boolean-option.selected {
            background: var(--selected-bg);
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3);
        }

        [data-theme="dark"] .accuracy-score {
            background: linear-gradient(135deg, #2e7d32, #1b5e20);
        }

        [data-theme="dark"] .accuracy-score:contains("N/A") {
            background: linear-gradient(135deg, #424242, #212121);
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .panel {
            background: var(--panel-bg);
            transition: background-color 0.3s ease;
        }

        .node {
            background: var(--node-bg);
            transition: background-color 0.3s ease;
        }

        .question {
            color: var(--text-color);
            border-bottom-color: var(--border-color);
        }

        .option {
            border-color: var(--border-color);
        }

        .option:hover {
            background: var(--hover-bg);
        }

        .option.selected-option {
            background: var(--selected-bg);
        }

        .terminal-message {
            background: var(--terminal-bg);
            color: var(--terminal-color);
        }

        th {
            background-color: var(--table-header-bg);
        }

        th, td {
            border-color: var(--table-border);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--panel-bg);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .theme-toggle i {
            font-size: 24px;
            color: var(--text-color);
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover i {
            transform: rotate(180deg);
        }

        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .panel {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"], input[type="password"], input[type="date"], textarea, select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* أنماط فلتر التاريخ */
        .date-filter-container {
            background: var(--container-bg);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #eee;
        }
        
        .date-filter {
            width: auto;
            min-width: 150px;
            margin-right: 10px;
        }
        
        .custom-date {
            width: auto;
            min-width: 150px;
            display: inline-block;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #45a049;
        }
        button.secondary {
            background: #2196F3;
        }
        button.danger {
            background: #f44336;
        }
        .tree {
            margin-left: 20px;
        }
        .node {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .question {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option:hover {
            background: #f8f9fa;
            border-color: #007bff;
        }
        .option.selected-option {
            background: var(--selected-bg);
        }
        .option input[type="radio"] {
            margin-right: 10px;
        }
        .option label {
            flex: 1;
            cursor: pointer;
            margin: 0;
        }
        .text-input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        .selected {
            background-color: #f0f7ff;
            padding: 5px;
            border-radius: 3px;
        }
        .terminal-message {
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 6px;
            color: #2e7d32;
            font-weight: 500;
        }
        .submission {
            background: #f9f9f9;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .hidden {
            display: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .admin-view {
            margin-top: 30px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }
        .shift-selection {
            margin-bottom: 20px;
        }
        .shift-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .shift-btn {
            background: var(--shift-button-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .shift-btn:hover {
            background: var(--shift-button-hover);
            transform: translateY(-1px);
        }
        .shift-btn.active {
            background: var(--shift-button-active);
            color: white;
            border-color: var(--shift-button-active);
        }
        #user-dropdown {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .admin-filters {
            background: #fff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .filter-group {
            display: inline-block;
            margin-right: 15px;
        }
        .submission-details-view {
            background: white;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .submission-details-view h4 {
            margin-top: 0;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .submission-answers {
            margin-top: 15px;
        }
        .answer-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #eee;
        }
        .answer-question {
            font-weight: bold;
            color: #2c3e50;
        }
        .error-message {
            color: #e74c3c;
            margin-top: 5px;
            font-size: 0.9em;
        }
        .required:after {
            content: " *";
            color: #e74c3c;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        #tree-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

.pagination-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin: 15px 0;
  font-weight: bold;
}

.pagination-controls button {
  background-color: var(--btn-bg, #4CAF50);
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s ease;
}

.pagination-controls button:disabled {
  background-color: #888;
  cursor: not-allowed;
}


        /* Update container styles */
        .tree-container,
        #login-panel,
        #admin-dashboard,
        .admin-view,
        .submission-details-view,
        .admin-filters,
        .panel,
        .node,
        .option,
        .terminal-message,
        .submission,
        .shift-selection,
        .shift-buttons,
        .admin-filters,
        .filter-group,
        .submission-details-view,
        .tree,
        .question,
        .options,
        .text-input,
        .selected,
        .admin-view,
        .shift-selection,
        .shift-buttons,
        .admin-filters,
        .filter-group,
        .submission-details-view {
            background-color: var(--container-bg);
            color: var(--text-color);
            border-color: var(--border-color);
            box-shadow: 0 2px 4px var(--shadow-color);
            transition: all 0.3s ease;
        }

        /* Update specific container styles */
        .tree-container {
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        #login-panel {
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        #admin-dashboard {
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .admin-view {
            background-color: var(--container-bg);
            border-top: 2px solid var(--border-color);
        }

        .submission-details-view {
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
        }

        .admin-filters {
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
        }

        /* Update card-like elements */
        .node,
        .option,
        .submission {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
        }

        /* Update header and footer if they exist */
        header,
        footer {
            background-color: var(--header-bg);
            color: var(--text-color);
            border-color: var(--border-color);
        }

        /* Update any remaining containers */
        .container,
        .section,
        .card,
        .box {
            background-color: var(--container-bg);
            color: var(--text-color);
            border-color: var(--border-color);
            transition: all 0.3s ease;
        }

        /* Update hover states */
        .node:hover,
        .option:hover,
        .submission:hover {
            background-color: var(--hover-bg);
        }

        /* Update selected states */
        .option.selected-option,
        .node.selected {
            background-color: var(--selected-bg);
        }

        /* Update table styles */
        table {
            background-color: var(--container-bg);
            border-color: var(--border-color);
        }

        th {
            background-color: var(--table-header-bg);
            color: var(--text-color);
        }

        td {
            color: var(--text-color);
        }

        /* Update form elements */
        .form-group {
            background-color: var(--bg-color);
        }

        label {
            color: var(--text-color);
        }

        /* Update any modals or popups */
        .modal,
        .popup {
            background-color: var(--container-bg);
            border-color: var(--border-color);
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .modal-header,
        .popup-header {
            background-color: var(--header-bg);
            border-bottom-color: var(--border-color);
        }

        .modal-body,
        .popup-body {
            background-color: var(--container-bg);
        }

        .modal-footer,
        .popup-footer {
            background-color: var(--header-bg);
            border-top-color: var(--border-color);
        }

        /* Update all input and select styles */
        input[type="text"],
        input[type="password"],
        input[type="number"],
        input[type="email"],
        input[type="tel"],
        input[type="search"],
        textarea,
        select,
        #flash-number,
        #admin-name,
        #admin-password,
        #shift-select,
        #user-dropdown {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border: 1px solid var(--input-border) !important;
            transition: all 0.3s ease;
        }

        /* Style for select elements */
        select {
            background-color: var(--select-bg) !important;
            color: var(--select-text) !important;
            border-color: var(--select-border) !important;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding-right: 30px;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
        }

        select:hover {
            background-color: var(--select-hover) !important;
        }

        select:focus {
            border-color: var(--button-bg) !important;
            outline: none;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        /* Style for select options */
        select option {
            background-color: var(--select-bg) !important;
            color: var(--select-text) !important;
            padding: 10px;
        }

        select option:hover {
            background-color: var(--select-hover) !important;
        }

        /* Style for input focus states */
        input:focus,
        textarea:focus,
        select:focus {
            border-color: var(--button-bg) !important;
            outline: none;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        /* Style for input placeholders */
        ::placeholder {
            color: var(--text-color);
            opacity: 0.7;
        }

        /* Style for disabled inputs */
        input:disabled,
        textarea:disabled,
        select:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            background-color: var(--input-bg) !important;
        }

        /* Style for the shift selection container */
        .shift-selection {
            background-color: var(--container-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .shift-selection label {
            color: var(--text-color);
            margin-bottom: 10px;
            display: block;
        }

        /* Style for the admin login form */
        #login-panel input[type="text"],
        #login-panel input[type="password"] {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border-color: var(--input-border) !important;
        }

        /* Style for the flash number input */
        #flash-number {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border-color: var(--input-border) !important;
        }
        
        #pr-dashboard-btn {
            background:#c14020 ;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
        
        #responder-dashboard-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
        #responder-dashboard-btn:hover {
            background: #0b7dda;
        }

        /* Admin Panel Styles */
        #admin-panel {
            position: relative;
            padding-top: 60px; /* Add space for the logout button */
        }

        #admin-logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--button-danger-bg);
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 100;
        }

        #admin-logout-btn:hover {
            background: #d32f2f;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Update the admin panel header */
        #admin-panel h2 {
            margin-bottom: 30px;
        }

        /* Loading Screen Styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }

        .loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .car-explosion {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .car {
            position: absolute;
            font-size: 120px;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            animation: explode 2s ease-out forwards;
            z-index: 2;
            transform-origin: center;
            font-family: 'Arial', sans-serif;
            letter-spacing: 5px;
        }

        .car::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.1) 100%
            );
            border-radius: 20px;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2) rotate(10deg);
                opacity: 0.8;
                text-shadow: 0 0 40px rgba(255, 255, 255, 1);
            }
            100% {
                transform: translate(-50%, -50%) scale(0) rotate(20deg);
                opacity: 0;
                text-shadow: 0 0 60px rgba(255, 255, 255, 1);
            }
        }

        .explosion {
            position: absolute;
            width: 0;
            height: 0;
            background: radial-gradient(circle, 
                rgba(255, 255, 0, 0.8) 0%,
                rgba(255, 165, 0, 0.8) 20%,
                rgba(255, 69, 0, 0.8) 40%,
                rgba(255, 0, 0, 0.8) 60%,
                rgba(139, 0, 0, 0.8) 80%
            );
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: expand 2s ease-out forwards;
            z-index: 1;
            filter: blur(5px);
        }

        .explosion::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.8) 0%,
                rgba(255, 255, 0, 0.8) 20%,
                rgba(255, 165, 0, 0.8) 40%,
                rgba(255, 69, 0, 0.8) 60%,
                rgba(255, 0, 0, 0.8) 80%
            );
            border-radius: 50%;
            animation: pulse 0.5s ease-out infinite alternate;
        }

        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 3;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.8) 0%,
                rgba(255, 165, 0, 0.8) 50%,
                rgba(255, 69, 0, 0.8) 100%
            );
            border-radius: 50%;
            top: 50%;
            left: 50%;
            animation: particle 2s ease-out forwards;
            filter: blur(1px);
        }

        @keyframes expand {
            0% {
                width: 0;
                height: 0;
                opacity: 0;
                filter: blur(0px);
            }
            50% {
                width: 200px;
                height: 200px;
                opacity: 0.9;
                filter: blur(5px);
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
                filter: blur(10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(0.95);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.05);
                opacity: 1;
            }
        }

        @keyframes particle {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
                filter: brightness(1);
            }
            100% {
                transform: translate(var(--x), var(--y)) scale(0);
                opacity: 0;
                filter: brightness(2);
            }
        }

        .loading-text {
            position: absolute;
            bottom: 20%;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            width: 100%;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 1s forwards;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .classification-rqe { color: #4CAF50; }
        .classification-nmc { color: #FFA500; }
        .classification-scel0plus { color: #FF0000; }
        .classification-scel1 { color: #FF0000; }
        .classification-scel2 { color: #FF0000; }
        .classification-scel3 { color: #FF0000; }
        .classification-scel4 { color: #FF0000; }
        .boolean-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
            user-select: none;
            position: relative;
        }
        .boolean-option:hover {
            background: var(--hover-bg);
            border-color: #bbb;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .boolean-option.selected {
            background: var(--selected-bg);
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }
        .boolean-option input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
            cursor: pointer;
        }
        .boolean-option label {
            cursor: pointer;
            flex: 1;
            font-weight: 500;
        }
        .accuracy-score {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            display: inline-block;
            min-width: 60px;
            text-align: center;
        }
        .accuracy-score:contains("N/A") {
            background: linear-gradient(135deg, #9e9e9e, #757575);
        }
    </style>
</head>
<body>
    <!-- Add loading screen -->
    <div class="loading-screen">
        <div class="car-explosion">
            <div class="car">SD</div>
            <div class="explosion"></div>
            <div class="particles" id="particles"></div>
        </div>
        <div class="loading-text">Loading Scenario Decomposition...</div>
    </div>

    <div class="gradient-background">
        <div class="gradient-sphere sphere-1"></div>
        <div class="gradient-sphere sphere-2"></div>
        <div class="gradient-sphere sphere-3"></div>
        <div class="glow"></div>
        <div class="grid-overlay"></div>
        <div class="noise-overlay"></div>
        <div class="particles-container" id="particles-container"></div>
    </div>

    <div class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </div>
    <!-- Login Panel -->
    <div id="login-panel" class="panel">
        <h2>User Login🧑🏽‍💻</h2>
        
        <!-- Shift Selection -->
        <div class="shift-selection">
            <label>Select Your Shift:</label>
            <div class="shift-buttons">
                <button class="shift-btn" data-shift="Morning">Morning</button>
                <button class="shift-btn" data-shift="Night">Night</button>
                <button class="shift-btn" data-shift="Overnight">Overnight</button>
            </div>
        </div>
        
        <!-- User Selection -->
<!-- User Selection -->
<div class="form-group">
  <label for="user-dropdown">Select Your Name:</label>
  <select id="user-dropdown" disabled>
    <option value="">Please select shift first</option>
  </select>
</div>

<!-- Manual Name Input -->
<div class="form-group" id="manual-name-container" style="display:none;">
  <label for="manual-name">Enter Your Name:</label>
  <input type="text" id="manual-name" placeholder="Type your name" autocomplete="name">
</div>
        <div class="form-group">
  <label for="flash-number">Yubikey Number:</label>
  <input type="text" id="flash-number" placeholder="Enter your Yubikey number">
</div>
<button id="login-btn" type="button">Start Classification</button>
<button id="responder-dashboard-btn" onclick="window.open('https://script.google.com/macros/s/AKfycbwV5TFYA7TYy3FdESpmUO8BElxesOPnbB4Z-9rr7BbbBPMWo8A8k0F90cYGB5fKJNKOKQ/exec', '_blank')">Practice Dashboard</button>
       
        
        <!-- Admin Login -->
<form id="admin-login-form" style="margin-top:30px; border-top:1px solid #ddd; padding-top:15px;">
  <h3>Admin Login🥷🏽</h3>
  <div class="form-group">
    <label for="admin-username">Admin Username:</label>
    <input type="text" id="admin-username" placeholder="Enter admin username">
  </div>
  <div class="form-group">
    <label for="admin-password">Password:</label>
    <input type="password" id="admin-password" placeholder="Enter password">
  </div>
  <button id="admin-login-btn" class="secondary" type="submit">Admin Login</button>
</form>

    </div>

    <!-- Task Panel -->
    <div id="task-panel" class="panel hidden">
        <h2>Task Information</h2>
        <div class="form-group">
            <label for="task-id">GULP Link:</label>
            <input type="text" id="task-id" placeholder="Enter GULP LINK‼️">
        </div>
        <button id="start-task-btn">Start Task</button>
        <button id="logout-btn" class="danger">Logout</button>
    </div>

    <!-- Classification Panel -->
    <div id="classification-panel" class="hidden">
        <h1>Scenario Decomposition</h1>
        <div id="current-user" style="margin-bottom: 20px;"></div>
        <div id="current-task" style="margin-bottom: 20px;"></div>
        <div id="tree-container" class="tree"></div>
        <button id="submit-btn" class="hidden" style="margin-top: 20px;">Submit Classification</button>
        <button id="cancel-task-btn" class="danger">Cancel Task</button>
    </div>

    <!-- User Submissions Panel -->
   <div id="submissions-panel" class="panel hidden">
    <h2>Your Submissions</h2>
  
    <div id="submissions-list"></div>
  <button id="new-task-btn">Start New Task</button>
  <button id="user-logout-btn" class="danger">Logout</button>
</div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="panel hidden">
        <h2>Admin Dashboard</h2>
        <button id="admin-logout-btn" class="danger" style="float: right;">Logout</button>
        
        <!-- Admin Filters -->
        <div class="admin-filters">
            <div class="filter-group">
                <label>Filter by Shift:</label>
                <select id="shift-filter">
                    <option value="all">All Shifts</option>
                    <option value="Morning">Morning</option>
                    <option value="Night">Night</option>
                    <option value="Overnight">Overnight</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Filter by Date:</label>
                <input type="date" id="date-filter">
            </div>
            <button id="apply-filters" class="secondary">Apply Filters</button>
<button id="reset-filters" class="reset-filters back-to-users-btn">Reset</button>
        </div>
        
        <h3>All Users</h3>
        <div id="users-list"></div>
        
        <div id="user-submissions-view" class="hidden">
            <h3>User Submissions</h3>
            <div id="selected-user-info"></div>
            <div id="admin-submissions-list"></div>
            <button id="back-to-users-btn">Back to Users</button>
        </div>
        
        <!-- Submission Details View -->
        <div id="submission-details-view" class="submission-details-view hidden">
            <button id="back-to-submissions-btn" class="secondary" style="margin-bottom: 15px;">← Back to Submissions</button>
            <div id="submission-full-details"></div>
        </div>
    </div>

    <script>
        // ==============================================
        // === Firebase Configurations ==================
        // ==============================================
        const firebaseConfigs = {
    Morning: {
        apiKey: "AIzaSyCdR6ELRp1e1JSyOZUU1pf4cP0_vulPyD8",
        authDomain: "sd-morning.firebaseapp.com",
        projectId: "sd-morning",
        storageBucket: "sd-morning.firebasestorage.app",
        messagingSenderId: "472020622201",
        appId: "1:472020622201:web:db61ac2a7e78c1ee532da8",
        measurementId: "G-2QZC70HY0T"
    }, 
    Night: {
        apiKey: "AIzaSyCia0sBLFXmmDM-wyb0mHyPpBdXbVlg6mA",
        authDomain: "sd-night.firebaseapp.com",
        projectId: "sd-night",
        storageBucket: "sd-night.firebasestorage.app",
        messagingSenderId: "629882715239",
        appId: "1:629882715239:web:ca46e1618332971290a8c2",
        measurementId: "G-LEBZ4HYW0Q"
    },
    Overnight: {
        apiKey: "AIzaSyAEE9iLqOeqviZFi_nRoN9qdnGtzqWoBWQ",
        authDomain: "sd-overnight.firebaseapp.com",
        projectId: "sd-overnight",
        storageBucket: "sd-overnight.firebasestorage.app",
        messagingSenderId: "209105765223",
        appId: "1:209105765223:web:0881b45fc6ce981ed825c2",
        measurementId: "G-2EYRJP485L"
    }
};

        let currentShift = null;
        let db, auth, analytics;

        // Function to initialize Firebase for a specific shift
        async function initializeFirebaseForShift(shift) {
            return new Promise(async (resolve, reject) => {
                const config = firebaseConfigs[shift];
                if (!config) {
                    console.error(`Firebase config for shift '${shift}' not found.`);
                    reject(new Error(`Firebase config for shift '${shift}' not found.`));
                    return;
                }

                try {
                    // Delete existing app instance if it exists
                    if (firebase.apps.length > 0) {
                        console.log("Deleting previous Firebase app instance...");
                        await firebase.app().delete();
                        console.log("Previous Firebase app deleted.");
                    }
                } catch (error) {
                    console.error("Error deleting previous Firebase app:", error);
                    // Continue, as initialization might still work or fix a bad state
                }

                try {
                    console.log(`Initializing Firebase for ${shift} shift with project ID: ${config.projectId}...`);
                    const app = firebase.initializeApp(config);
                    db = firebase.firestore(); // Uses the most recently initialized app
                    auth = firebase.auth();
                    analytics = firebase.analytics();
                    
                    // Make Firebase available globally
                    window.db = db;
                    window.auth = auth;
                    window.firebase = firebase; // window.firebase will point to the firebase namespace
                    
                    currentShift = shift;
                    console.log(`Firebase initialized successfully for ${shift} shift.`);
                    resolve();
                } catch (error) {
                    console.error(`Error initializing Firebase for ${shift} shift:`, error);
                    db = null; // Ensure db is null if initialization fails
                    auth = null;
                    analytics = null;
                    currentShift = null;
                    reject(error);
                }
            });
        }

        // ==============================================
        // === Decision Tree JSON =======================
        // ==============================================
        const decisionTree = {
    "version": "sdecomp_02_00",
    "treeType": "ADHOC_LABELING",
    "childNodes": [
        {
            "name": "da_is_data_availability",
            "id": "393e9a9a-05e0-4903-86e0-54301381f0a5",
            "displayName": "Are there any essential data missing from the segment preventing your ability to fully diagnose the event?",
            "nodeType": "choice",
            "childNodes": [
                {
                    "name": "da_is_data_availability_a",
                    "id": "46c791a6-c5f2-4fb2-bf34-6b042ba01659",
                    "displayName": "Yes",
                    "nodeType": "branch",
                    "childNodes": [
                        {
                            "name": "da_missing_data_reason",
                            "id": "d12a4ae1-be1a-4e72-a446-42633143accd",
                            "displayName": "Please list the type of missing data observed. If there is more than one missing data type, list all separated by commas.",
                            "nodeType": "freeText",
                            "childNodes": [],
                            "status": ""
                        }
                    ],
                    "status": ""
                },
                {
                    "name": "da_is_data_availability_b",
                    "id": "281300ed-0df5-49b5-9926-9daa7f177757",
                    "displayName": "No",
                    "nodeType": "branch",
                    "childNodes": [
                        {
                            "name": "hb_is_hazardous_behaviors",
                            "id": "c981e0c9-f891-4a8b-9fa5-831150639ae9",
                            "displayName": "Do you observe a hazardous behavior?",
                            "nodeType": "choice",
                            "childNodes": [
                                {
                                    "name": "hb_is_hazardous_behaviors_a",
                                    "id": "d50ee431-3a69-4c8f-9da5-a2329d9fc9c4",
                                    "displayName": "Yes",
                                    "nodeType": "branch",
                                    "childNodes": [
                                        {
  "name": "hb_multi_hazardous_behaviors", "id": "270d7c8f-8c1f-4434-8326-814c9822d682", "displayName": "Select all hazardous behaviors you observed.", "nodeType": "branch", "childNodes": [ { "name": "hb_departing_roadway", "id": "272f6b42-c5aa-43a4-8ead-e0fe4a555967", "displayName": "Departing Roadway", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_asserting_too_closely_in_front", "id": "694718b1-e7e9-43c1-90b3-68ad1e15dea8", "displayName": "Asserting Too Closely in Front", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_asserting_too_closely_behind", "id": "d21b072f-31c0-42b8-9c7f-b94ecb3e309b", "displayName": "Asserting Too Closely Behind", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_encroaching_towards", "id": "1762d7dd-0a4e-44f4-b1e6-8a5bf80a7852", "displayName": "Encroaching Towards", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_failing_to_assert", "id": "f0a31128-aff9-4676-9bd5-7596cf638a80", "displayName": "Failing To Assert", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_passing_too_closely_next_to", "id": "78245905-718d-4a29-8c10-a5a858e28255", "displayName": "Passing Too Closely Next To", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_following_too_close", "id": "d1c76b0f-a54c-4a84-9659-aa17cc9fad30", "displayName": "Following Too Close", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_leaving_an_accident_scene", "id": "0553a6e5-c6fe-468c-8969-2ba058c0883d", "displayName": "Leaving An Accident Scene", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_inappropriately_overtaking", "id": "cf603e70-16f0-40cf-a8c3-508f2f564031", "displayName": "Inappropriately Overtaking", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_driving_wrong_way", "id": "4e279639-80de-41e4-b34a-1a408a4f019e", "displayName": "Driving Wrong Way", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_violating_traffic_directive", "id": "35ce5725-24ad-4fc7-b8f6-05fd1aa8bb00", "displayName": "Violating Traffic Directive", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_swerving", "id": "55b097fc-2476-4204-a9af-2c0f73517263", "displayName": "Swerving", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_braking_too_little", "id": "af316686-d7a9-4fcf-bbd0-737c4faf463c", "displayName": "Braking Too Little", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_braking_too_much", "id": "34a1ef5b-56d2-4f38-b065-28c0be90e15f", "displayName": "Braking Too Much", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_violating_lane_boundary", "id": "f6b9d2f8-5990-43fb-a5b9-6402a9cbbca2", "displayName": "Violating Lane Boundary", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_failing_to_overtake", "id": "c43a1dd2-ddd5-4569-9562-4ab00a4700fd", "displayName": "Failing To Overtake", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_lane_wandering", "id": "309ae78f-6af0-49d5-ad88-a355e6956bb3", "displayName": "Lane Wandering", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_driving_over_obstacle", "id": "fdb91538-7db0-46e6-b24b-e7468544164b", "displayName": "Driving Over Obstacle", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_blocking_roadway", "id": "236d036e-699d-4a60-ac7c-9090845bafe7", "displayName": "Blocking Roadway", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_unnecessarily_rerouting", "id": "ccfc64ba-af65-4d3f-b296-e395029bc301", "displayName": "Unnecessarily Rerouting", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_too_fast", "id": "c91c1da2-385c-42e8-b556-892e5cf33221", "displayName": "Too Fast", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_too_slow", "id": "bdfbffc5-5413-46b2-b071-c58cf6f37345", "displayName": "Too Slow", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_accelerating_too_little", "id": "51b72d5d-a081-4887-8b2d-3bb6fd9dfdcf", "displayName": "Accelerating Too Little", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_accelerating_too_much", "id": "feb39976-8c6a-41bb-a48b-d71de4f0be9f", "displayName": "Accelerating Too Much", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_moving_when_door_is_open", "id": "6dd4db18-40c5-4ecb-baa6-a6514d61a7c7", "displayName": "Moving when Door is Open", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_failing_to_pullover", "id": "5d915511-8beb-4503-8781-f44776c179f2", "displayName": "Failing To Pullover", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_performing_pullover_in_hazardous_location", "id": "1bf2919d-7fdf-4dd8-b311-d710e12b98b7", "displayName": "Performing Pullover in Hazardous Location", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_failing_to_use_turn_signal", "id": "058a3de9-a854-4fbe-9573-daa7663888cf", "displayName": "Driving Without Lights On", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_driving_without_lights_on", "id": "08497194-9e6d-4f90-89fd-6b96aab21d6d", "displayName": "Failing To Use Turn Signal", "nodeType": "boolean", "childNodes": [], "status": "" }, { "name": "hb_other", "id": "5a90b857-d8fb-40b2-8a8f-073d0fb9a8e8", "displayName": "Other", "nodeType": "boolean", "childNodes": [], "status": "" } ],
  "status": ""
}
,
                                        {
                                            "name": "highest_severity_hazardous_behavior",
                                            "id": "f02bc0e4-c032-479f-8d86-d37277cb117d",
                                            "displayName": "Which hazardous behavior is used for loss factor and ego action analysis?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "highest_severity_hazardous_behavior_a",
                                                    "id": "565e3c40-ee4d-4471-83dd-981e9140ee47",
                                                    "displayName": "Departing Roadway",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_b",
                                                    "id": "70d9eb43-3242-4c57-b2c6-6645affdb14f",
                                                    "displayName": "Asserting Too Closely in Front",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_c",
                                                    "id": "71006651-f73c-4b60-9b1e-8acea618d082",
                                                    "displayName": "Asserting Too Closely Behind",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_d",
                                                    "id": "e46eac31-96dd-4f92-9bda-35ea3e5b550c",
                                                    "displayName": "Encroaching Towards",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_e",
                                                    "id": "a1abc688-a679-4c79-82d5-f80dbe1b44a2",
                                                    "displayName": "Failing To Assert",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_f",
                                                    "id": "eec425e3-71d5-45fa-a432-93b2e48f7911",
                                                    "displayName": "Passing Too Closely Next To",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_g",
                                                    "id": "ffca7222-3c0a-4d30-913e-5aedd53cefe0",
                                                    "displayName": "Following Too Close",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_h",
                                                    "id": "78ccab8a-a77d-481b-95f7-26503d6b7be2",
                                                    "displayName": "Leaving An Accident Scene",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_i",
                                                    "id": "70e03b68-79b8-4e3d-9c18-1aeed92f2a96",
                                                    "displayName": "Inappropriately Overtaking",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_j",
                                                    "id": "1384d519-9c96-4aab-af0b-002c406d15be",
                                                    "displayName": "Driving Wrong Way",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_k",
                                                    "id": "17e215af-5367-4a24-b569-60002bcb43aa",
                                                    "displayName": "Violating Traffic Directive",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_l",
                                                    "id": "260129be-9d1c-46b9-92bd-09516430f598",
                                                    "displayName": "Swerving",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_m",
                                                    "id": "b6f43b52-e5e7-4b4a-80fc-fa53b755912d",
                                                    "displayName": "Braking Too Little",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_n",
                                                    "id": "e79c52b6-29fc-40d3-b31f-27092f2a6c32",
                                                    "displayName": "Braking Too Much",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_o",
                                                    "id": "eafb3cf0-c724-4c0a-ac40-dbc903f4067b",
                                                    "displayName": "Violating Lane Boundary",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_p",
                                                    "id": "3a4e8e44-449c-4dc9-87bc-01668e80dd20",
                                                    "displayName": "Failing To Overtake",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_q",
                                                    "id": "f6c0c512-b126-4fba-89bc-2066890b161d",
                                                    "displayName": "Lane Wandering",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_r",
                                                    "id": "ae06ba07-491d-429f-8f23-c83327ac939a",
                                                    "displayName": "Driving Over Obstacle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_s",
                                                    "id": "5db332b2-9a8d-42fe-9013-4f2eff4cc132",
                                                    "displayName": "Blocking Roadway",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_t",
                                                    "id": "786978c5-a22d-4e8c-a153-fb644e22e272",
                                                    "displayName": "Unnecessarily Rerouting",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_u",
                                                    "id": "572a7a6f-6abc-4138-a79d-27d0ba764311",
                                                    "displayName": "Too Fast",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_v",
                                                    "id": "991aece8-b0b1-47cf-8bc7-c30dc89f18c4",
                                                    "displayName": "Too Slow",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_w",
                                                    "id": "24bfcff1-9b1b-44c5-8143-6b2a6e183a53",
                                                    "displayName": "Accelerating Too Little",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_x",
                                                    "id": "25cbffa9-4b54-4326-a9a7-ef6241044ff9",
                                                    "displayName": "Accelerating Too Much",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_y",
                                                    "id": "a35de840-1dfe-43cf-825d-fcf8fb30fbd2",
                                                    "displayName": "Moving when Door is Open",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_z",
                                                    "id": "29fb51f4-f877-4207-a0fc-5d85f2bde7ff",
                                                    "displayName": "Failing To Pullover",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_aa",
                                                    "id": "895cfb1d-3794-4136-a0a4-a4b46560b40d",
                                                    "displayName": "Performing Pullover in Hazardous Location",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_ab",
                                                    "id": "68a087ad-a44e-4962-b073-9d9db48d799f",
                                                    "displayName": "Driving Without Lights On",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_ac",
                                                    "id": "1e18011b-3693-4d62-8271-3f78110f7c12",
                                                    "displayName": "Failing To Use Turn Signal",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_ad",
                                                    "id": "6ae6b2b1-ac36-4f4a-bd4c-aa2b02822cf7",
                                                    "displayName": "Other",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "ec_is_Environmental_Conditions",
                                            "id": "6abe6c1b-46d7-490c-a7e3-07e5eb74c430",
                                            "displayName": "Did the Environment Condition directly cause the hazardous behavior?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "ec_is_Environmental_Conditions_a",
                                                    "id": "54013b7c-f455-4466-af3b-aee09cbfaefd",
                                                    "displayName": "Yes",
                                                    "nodeType": "branch",
                                                    "childNodes": [
                                                        {
                                                            "name": "ec_Environmental_Conditions_behaviors",
                                                            "id": "1d257f67-9456-4555-b831-6959b8aa8fa2",
                                                            "displayName": "Which Environment Condition directly cause the hazardous behavior?",
                                                            "nodeType": "choice",
                                                            "childNodes": [
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_a",
                                                                    "id": "c57d0ed0-7a86-4146-afe0-537ccb4600e4",
                                                                    "displayName": "[Environment Condition] Handling roadways with limited lane marking visibility",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Roadways_With_Limited_Lane_Marking_Visibility_sub_behavior",
                                                                            "id": "5dad1844-fac4-41fe-83de-3984dc23229a",
                                                                            "displayName": "Which sub-behavior of Handling roadways with limited lane marking visibility directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Roadways_With_Limited_Lane_Marking_Visibility_sub_behavior_a",
                                                                                    "id": "6e30cb0d-cf85-4a15-a7d6-05f73bf02598",
                                                                                    "displayName": "Handling roadways with visible lane boundaries covering \u003c X % of lane longitudinal edge",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Roadways_With_Limited_Lane_Marking_Visibility_sub_behavior_b",
                                                                                    "id": "dfce2c35-e142-4a5f-91f5-2845af756cc9",
                                                                                    "displayName": "Handling roadways with visible lane boundaries covering \u003e= X % of lane longitudinal edge",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_b",
                                                                    "id": "a8b1446a-8781-4d94-974a-e6e02531762c",
                                                                    "displayName": "[Environment Condition] Handling Illumination - Natural Illumination",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior",
                                                                            "id": "6fd811ba-6b68-4601-ad27-2fb55f788e81",
                                                                            "displayName": "Which sub-behavior of Handling Illumination - Natural Illumination directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_a",
                                                                                    "id": "fd188de0-3a3a-4771-9fa4-5e4f0c09cd05",
                                                                                    "displayName": "Handling day-time driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_b",
                                                                                    "id": "0ffcee3f-3d83-404a-8aeb-ae8e70d3c721",
                                                                                    "displayName": "Handling night-time driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_c",
                                                                                    "id": "dca9ffb2-d489-4519-8bb3-8dba1808d0a9",
                                                                                    "displayName": "Handling low-ambient lighting condition",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_d",
                                                                                    "id": "18f7eebf-a01f-4470-bba8-0e1b09b95c88",
                                                                                    "displayName": "Handling glare due to natural lighting conditions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_c",
                                                                    "id": "0488d37a-d43b-4923-b3bb-a26374b191f4",
                                                                    "displayName": "[Environment Condition] Handling Weather - Temperature",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Temperature_sub_behavior",
                                                                            "id": "60414f03-8bb7-43b5-b0c8-2a4802f3ea33",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Temperature directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_a",
                                                                                    "id": "9b99c8ae-f3fb-4014-985f-db6db218e72f",
                                                                                    "displayName": "Handling ambient temperatures between [3.3, 31] deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_b",
                                                                                    "id": "c713ecb7-1165-4bdc-8d00-3a4a5e9aaace",
                                                                                    "displayName": "Handling ambient temperatures \u003c 0 deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_c",
                                                                                    "id": "acb002e1-a321-4aa9-a708-706bbb3369d1",
                                                                                    "displayName": "Handling ambient temperatures between [0, 3.3) deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_d",
                                                                                    "id": "eea448a3-72e3-460f-ae37-f2823aaee1a6",
                                                                                    "displayName": "Handling ambient temperatures between (31, 38] deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_e",
                                                                                    "id": "b16080cf-6951-4212-bf28-62eaf138d65b",
                                                                                    "displayName": "Handling ambient temperatures between (38, 43] deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_f",
                                                                                    "id": "2fd779aa-f055-474e-9bae-cbf83c0cb37b",
                                                                                    "displayName": "Handling ambient temperatures \u003e 43 deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_d",
                                                                    "id": "899d0f74-a9de-44f8-9cfa-9e6cfa657df5",
                                                                    "displayName": "[Environment Condition] Handling Weather - Wind",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Wind_sub_behavior",
                                                                            "id": "1a328fb1-2f6e-4c31-ba91-fd380207bbed",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Wind directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Wind_sub_behavior_a",
                                                                                    "id": "a8e70e15-48a8-46c6-a11c-b562b8e2772b",
                                                                                    "displayName": "Handling sustained winds \u003c= 30 mph and / or gusts \u003c= 46 mph (Wind Advisory)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Wind_sub_behavior_b",
                                                                                    "id": "ec216fe9-a956-4fe4-b82d-ec2bb49395c9",
                                                                                    "displayName": "Handling sustained wind \u003e 40 mph and / or gusts \u003e 58 mph",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Wind_sub_behavior_c",
                                                                                    "id": "62de09b2-9b83-435c-823a-f161683ab0f8",
                                                                                    "displayName": "Handling sustained winds (30 - 40] mph and / or gusts (46 - 58] mph (High Wind Warning)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_e",
                                                                    "id": "d1678e8b-bc10-4b28-8440-17645246796c",
                                                                    "displayName": "[Environment Condition] Handling Weather - Rain",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Rain_sub_behavior",
                                                                            "id": "97dfb0c5-4ad4-45ff-bb66-5566ee0abe09",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Rain directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Rain_sub_behavior_a",
                                                                                    "id": "91c4b5a7-ea44-49a8-8e3d-0eff13d523d3",
                                                                                    "displayName": "Handling rainfall between (0, 23.7) mm/hr",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Rain_sub_behavior_b",
                                                                                    "id": "0cd4eb97-62dd-477e-a6ed-730382421c36",
                                                                                    "displayName": "Handling rainfall \u003e= 23.7 mm/hr",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_f",
                                                                    "id": "ebaf72ba-da96-426b-90bf-986d194af811",
                                                                    "displayName": "[Environment Condition] Handling Weather - Fog",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Fog_sub_behavior",
                                                                            "id": "17225c0b-129f-4ded-b067-65bbb34cd876",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Fog directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Fog_sub_behavior_a",
                                                                                    "id": "f400a72a-17e0-46dd-974b-878252bca714",
                                                                                    "displayName": "Handling fog - between (0, 1.7) FOP (visibility \u003e 1/4 mile)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Fog_sub_behavior_b",
                                                                                    "id": "13cdea2f-8cb9-4c57-b4ec-99b19ffd1695",
                                                                                    "displayName": "Handling fog - between [1.7, 9] FOP (visibility \u003c= 1/4 mile)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Fog_sub_behavior_c",
                                                                                    "id": "b9c557d4-eb18-485a-9f61-461b89c65b2b",
                                                                                    "displayName": "Handling fog \u003e 9 FOP",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_g",
                                                                    "id": "57a491cd-2b15-4e47-9782-cf97d55cf0c1",
                                                                    "displayName": "[Environment Condition] Handling Weather - Snow",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Snow_sub_behavior",
                                                                            "id": "013d0614-25b7-4d42-af03-c32c2ea2301e",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Snow directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Snow_sub_behavior_a",
                                                                                    "id": "9fc7d796-f8a0-4272-857a-04bc07ea6bc7",
                                                                                    "displayName": "Handling snow",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_h",
                                                                    "id": "b525e0f6-3a5c-4534-b3c5-01f10ea8eb52",
                                                                    "displayName": "[Environment Condition] Handling Weather - Hail",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Hail_sub_behavior",
                                                                            "id": "edc85d7b-5f94-4181-9aee-e60fc6c14999",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Hail directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Hail_sub_behavior_a",
                                                                                    "id": "2f1024bf-394f-45f1-802c-786f17bb3ed3",
                                                                                    "displayName": "Handling hail",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_i",
                                                                    "id": "c71abfa5-ef0a-4600-9fe1-420497952e45",
                                                                    "displayName": "[Environment Condition] Handling Weather - Heat Haze",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Heat_Haze_sub_behavior",
                                                                            "id": "5528b40d-e721-416a-b948-8f6505bd7a0d",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Heat Haze directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Heat_Haze_sub_behavior_a",
                                                                                    "id": "853ede8a-d2fc-4829-b404-ee53e13c3331",
                                                                                    "displayName": "Handling heat haze",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_j",
                                                                    "id": "331923dc-091a-4cb5-8360-dc2646f8eb86",
                                                                    "displayName": "[Environment Condition] Handling Airborne Particulates (sand, smoke, etc)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Airborne_Particulates_sub_behavior",
                                                                            "id": "cf76cb41-155b-4a54-8a93-d4ab9afc6b1e",
                                                                            "displayName": "Which sub-behavior of Handling Airborne Particulates (sand, smoke, etc) directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_a",
                                                                                    "id": "ecf1bd03-509e-45d5-8f91-b9d1dbb77937",
                                                                                    "displayName": "Handling other particulates",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_b",
                                                                                    "id": "cc29a65b-bf32-45f1-96ca-3b4ade9260a5",
                                                                                    "displayName": "Handling dust with visibility \u003c= 1/4 mile",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_c",
                                                                                    "id": "0b01d5e6-270f-49e1-a827-67414da0c49b",
                                                                                    "displayName": "Handling dust with visibility \u003e 1/4 mile",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_d",
                                                                                    "id": "8ac56284-e1a1-48c9-9efe-fcbf0aca15a0",
                                                                                    "displayName": "Handling non-precipitating water droplets (water sprays, etc.)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_e",
                                                                                    "id": "96378f99-562c-449e-b5b2-11bbc7cbc490",
                                                                                    "displayName": "Handling smoke or pollution with AQI \u003c 200",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_f",
                                                                                    "id": "4c1cfe2d-1ac4-4c64-b16d-f03e106715da",
                                                                                    "displayName": "Handling smoke or pollution with AQI \u003e= 200",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_g",
                                                                                    "id": "d8e9b62c-b092-4527-a850-ac2fdbcd58f2",
                                                                                    "displayName": "Handling volcanic ash",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_k",
                                                                    "id": "89d220ca-c068-4e58-b2fb-4b66ad8ff42d",
                                                                    "displayName": "[Environment Condition] Handling Standing / Flowing Water",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior",
                                                                            "id": "2dbdc26f-08e7-4ed9-9ae3-4da2e873ea0b",
                                                                            "displayName": "Which sub-behavior of Handling Standing / Flowing Water directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_a",
                                                                                    "id": "ee3c27e5-b3eb-49dd-a854-8ebec63f94fa",
                                                                                    "displayName": "Handling standing / flowing water on road \u003c1cm (very shallow puddle)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_b",
                                                                                    "id": "2f892ff4-1ba7-49ba-9d71-8f29ecb99587",
                                                                                    "displayName": "Handling standing / flowing water on road [1, 2) cm (shallow puddle)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_c",
                                                                                    "id": "0eae3217-1b77-4c09-b26f-2a19915abec0",
                                                                                    "displayName": "Handling standing / flowing water on road [2, 4) cm (significant splash at high speed)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_d",
                                                                                    "id": "56340c5a-c448-4826-acab-dae1f7d6e83f",
                                                                                    "displayName": "Handling standing / flowing water on road [4, 8) cm (significant splash at low speed)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_e",
                                                                                    "id": "3412e78e-4cba-4cc0-8eb0-841fb28c9bdc",
                                                                                    "displayName": "Handling standing / flowing water on road [8, 14) cm (deep puddle)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_f",
                                                                                    "id": "4bfb1879-fbae-455d-965d-d605b866578c",
                                                                                    "displayName": "Handling standing / flowing water on road \u003e= 14cm (flooded roadway)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_l",
                                                                    "id": "4ad9199e-3e6b-4a29-84b2-6a3ae0649d43",
                                                                    "displayName": "[Environment Condition] Handling Temporary Roadway Conditions - Reduced Traction",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior",
                                                                            "id": "c7e23ae4-e1b2-43f6-9a6a-5ec609af2c41",
                                                                            "displayName": "Which sub-behavior of Handling Temporary Roadway Conditions - Reduced Traction directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_a",
                                                                                    "id": "ffa66c89-5721-4f87-bbfe-1867ec89d303",
                                                                                    "displayName": "Handling wet roads - no standing water",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_b",
                                                                                    "id": "40c31098-42b6-4118-8e97-014a668d0e39",
                                                                                    "displayName": "Handling road surface covered with sand",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_c",
                                                                                    "id": "7bade7fa-0f05-41c8-a9e4-79eebaaee5ab",
                                                                                    "displayName": "Handling road surface covered with ice",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_d",
                                                                                    "id": "52f84705-ca00-46da-b734-095fad6d688e",
                                                                                    "displayName": "Handling road surface covered with snow",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_m",
                                                                    "id": "085a57e9-b43c-40d8-903f-c8bade996fda",
                                                                    "displayName": "[Environment Condition] Handling Artificial Conditions - Sensor Interference/degradation",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior",
                                                                            "id": "af53b74f-e7bb-4ae9-82fc-699845f790e3",
                                                                            "displayName": "Which sub-behavior of Handling Artificial Conditions - Sensor Interference/degradation directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_a",
                                                                                    "id": "e7df60a5-02c9-4e6f-84e0-b1ee8ee6edc4",
                                                                                    "displayName": "Handling artificial illumination (eg oncoming car lights)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_b",
                                                                                    "id": "bab501fa-de21-4587-9f99-18a118ee84fa",
                                                                                    "displayName": "Handling non-malicious sensor occlusion (bug spatter, bird droppings, mud splatter, etc)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_c",
                                                                                    "id": "08095f90-65bf-411a-b61c-76564cf5772b",
                                                                                    "displayName": "Handling malicious sensor occlusion",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_d",
                                                                                    "id": "f2740e5f-1188-46b4-9e5e-fe7b4a4d35b7",
                                                                                    "displayName": "Handling radio waves, other external signal interferences",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                }
                                                            ],
                                                            "status": ""
                                                        }
                                                    ],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "ec_is_Environmental_Conditions_b",
                                                    "id": "8550dd47-d958-416f-8c6a-0ccfb00703ce",
                                                    "displayName": "No",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "ri_is_Roadway_Infrastructure",
                                            "id": "cf7a0207-1cae-4b54-8060-6e4ed178ee20",
                                            "displayName": "Did the Roadway Infrastructure directly cause the hazardous behavior?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "ri_is_Roadway_Infrastructure_a",
                                                    "id": "233c5fe3-a985-4420-b2f1-fde1e094780a",
                                                    "displayName": "Yes",
                                                    "nodeType": "branch",
                                                    "childNodes": [
                                                        {
                                                            "name": "ri_Roadway_Infrastructure_behaviors",
                                                            "id": "05f18999-f210-44b7-9e45-2fcc7e6ecb0f",
                                                            "displayName": "Which Roadway Infrastructure directly cause the hazardous behavior?",
                                                            "nodeType": "choice",
                                                            "childNodes": [
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_a",
                                                                    "id": "87ead092-15ca-4a17-9afb-91abfe427f2b",
                                                                    "displayName": "[End to End Nav] Performing reversing",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Performing_reversing_sub_behavior",
                                                                            "id": "753f036e-e622-46c2-aace-b80119a0eafd",
                                                                            "displayName": "Which sub-behavior of Performing reversing directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Performing_reversing_sub_behavior_a",
                                                                                    "id": "fd72f8cc-ed77-447d-b1bd-a35fe27bfb02",
                                                                                    "displayName": "Performing Reverse on public right-of-way",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Performing_reversing_sub_behavior_b",
                                                                                    "id": "212f097c-fc86-49f7-8dc0-1985366a671b",
                                                                                    "displayName": "Performing multi-point turns / k-turns on public right of way",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_b",
                                                                    "id": "9b06675d-4385-46a3-8d22-d61a19733901",
                                                                    "displayName": "[End to End Nav] Navigation",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Navigation_sub_behavior",
                                                                            "id": "c79d0eb3-0b36-4a2d-95e4-d47bcb26d785",
                                                                            "displayName": "Which sub-behavior of Navigation directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Navigation_sub_behavior_a",
                                                                                    "id": "ee494167-a4bc-4620-a81f-d83711a143d3",
                                                                                    "displayName": "Navigation - Infinite route",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Navigation_sub_behavior_b",
                                                                                    "id": "47b2faeb-e784-4f04-b89d-6e8af3e081b7",
                                                                                    "displayName": "Navigation - Route following",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_c",
                                                                    "id": "aa898556-b362-4a4c-8f8e-2dd704ba9d9f",
                                                                    "displayName": "[Intersection - Protected] Handling intersection controlled by persistent traffic light",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior",
                                                                            "id": "f36e05b2-af18-4100-a751-d6eab0e89bea",
                                                                            "displayName": "Which sub-behavior of Handling intersection controlled by persistent traffic light directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior_a",
                                                                                    "id": "c4f13f8f-e85c-4a23-be88-7d4e5cae5a86",
                                                                                    "displayName": "Handling Hazard / Early Warning Indicator Light (Flashing Yellow Warning Lights)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior_b",
                                                                                    "id": "dc7056ec-84fc-4f36-8c74-9e1e10626485",
                                                                                    "displayName": "Navigating Highway On-Ramp Traffic Lights (out-of-phase traffic light intersections - solid circles)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior_c",
                                                                                    "id": "253600d9-d94b-42a9-905c-ecf4020e62ab",
                                                                                    "displayName": "Navigate Standard Traffic Light Configurations",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_d",
                                                                    "id": "156efc98-a4ba-4669-a27a-0fcb6055c4b3",
                                                                    "displayName": "[Lane Changes] Handling lane change",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_lane_change_sub_behavior",
                                                                            "id": "33993761-f4fd-403b-812f-78eec05f28ad",
                                                                            "displayName": "Which sub-behavior of Handling lane change caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_a",
                                                                                    "id": "550483a6-25ad-4333-8d2e-e9d21dd2d38d",
                                                                                    "displayName": "Handling lane change for route",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_b",
                                                                                    "id": "d2ce90e3-39fe-4884-a7c8-335ebf86d6a3",
                                                                                    "displayName": "Handling lane change for time (PASS maneuver - Pass At Speed Safely)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_c",
                                                                                    "id": "6d79187e-b304-44d2-878b-e0a674467113",
                                                                                    "displayName": "Handling lane change for preference (out of left-most lane)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_d",
                                                                                    "id": "f29aafba-72af-4663-8c65-4bca6a441bb2",
                                                                                    "displayName": "Handling lane change on driver demand",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_e",
                                                                    "id": "a6b21b05-66ba-443f-aa78-730c2cdb4db7",
                                                                    "displayName": "[Lane Changes] Handling merges",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_merges_sub_behavior",
                                                                            "id": "bce11092-84b4-4a18-a764-ca4ec2a7ab04",
                                                                            "displayName": "Which sub-behavior of Handling merges caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_merges_sub_behavior_a",
                                                                                    "id": "012a6656-7141-465a-9bd8-e06f30c20086",
                                                                                    "displayName": "Handling zipper merges (includes highway on/off ramp)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_f",
                                                                    "id": "d971b7f0-80cb-4a61-8f41-5fef4297407a",
                                                                    "displayName": "[Lane Keeping] Handling various ego vehicle speeds",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior",
                                                                            "id": "20acf31a-e8f8-463d-8510-9ee1902325ed",
                                                                            "displayName": "Which sub-behavior of Handling various ego vehicle speeds caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_a",
                                                                                    "id": "241b1856-eed0-4b4b-ae3a-81ad10f5ddbf",
                                                                                    "displayName": "Driving at speeds \u003c= 40 mph (PSL up to 40 mph)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_b",
                                                                                    "id": "9253c1f0-77ff-428e-8284-6c7172f4625b",
                                                                                    "displayName": "Driving at speeds (40, 75] mph (PSL up to 75 mph)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_c",
                                                                                    "id": "63a3c84c-2d2e-457a-9a16-129849d0ae9f",
                                                                                    "displayName": "Driving at speeds (75, 85] mph (PSL up to 85 mph)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_d",
                                                                                    "id": "685e804d-b7cc-464e-ad80-9ae762d0bcfb",
                                                                                    "displayName": "Driving at speeds \u003e 85 mph",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_g",
                                                                    "id": "1e91cbea-2e9d-44bb-9945-634e174c0c09",
                                                                    "displayName": "[Lane Keeping] Nominal driving (drive straight)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Nominal_driving_sub_behavior",
                                                                            "id": "08303600-585c-4390-b913-eb7093aef136",
                                                                            "displayName": "Which sub-behavior of Nominal driving (drive straight) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_a",
                                                                                    "id": "369542e1-e21a-4c04-8d40-24755889045c",
                                                                                    "displayName": "Performing nominal driving - lane centering",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_b",
                                                                                    "id": "b6163130-d68e-410b-8f0c-d760e7ebd709",
                                                                                    "displayName": "Performing nominal driving - maintain distance to lead car",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_c",
                                                                                    "id": "48677a0a-ed8f-44ea-96e8-ca92de74fd36",
                                                                                    "displayName": "Performing nominal driving - maintain speed",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_d",
                                                                                    "id": "f9d92581-3343-4068-8c99-d393daecc340",
                                                                                    "displayName": "Handling curved roads",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_e",
                                                                                    "id": "1c84f829-251d-4bcd-93c5-f77d3f582818",
                                                                                    "displayName": "Performing lane bias [in-lane nudge]",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_f",
                                                                                    "id": "437a3b7f-ed9d-41ca-9efb-6100e90497c3",
                                                                                    "displayName": "Performing lane bias [out-of-lane nudge]",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_h",
                                                                    "id": "1a667d5a-894f-4bfc-928b-aff83cbf2745",
                                                                    "displayName": "[Lane Keeping] Special Rule Modified Travel - Other",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior",
                                                                            "id": "115b0922-8451-46fa-b588-28cda4f0d047",
                                                                            "displayName": "Which sub-behavior of Special Rule Modified Travel - Other caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_a",
                                                                                    "id": "d9992a16-9aad-4cdb-b40b-d1f7a426716e",
                                                                                    "displayName": "Driving in restricted lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_b",
                                                                                    "id": "89e9b124-5578-4c0b-80ec-97d7836899e8",
                                                                                    "displayName": "Driving in HOV lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_c",
                                                                                    "id": "fe282b3e-b2a9-4d05-8168-457500f24f90",
                                                                                    "displayName": "Driving in reversible lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_d",
                                                                                    "id": "cfc314d1-2288-48a4-98c8-1178d83485e3",
                                                                                    "displayName": "Driving in time-dependent lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_e",
                                                                                    "id": "86c2d28c-79fb-4599-a836-0291866b522f",
                                                                                    "displayName": "Driving in variable speed lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_f",
                                                                                    "id": "c68ef770-5a81-48b3-97e2-622e710bcb1f",
                                                                                    "displayName": "Enter restricted or special purpose lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_i",
                                                                    "id": "148c02ca-1a32-4180-a9eb-40fe9a958daa",
                                                                    "displayName": "[Lane Keeping] Handling special structures",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_special_structures_sub_behavior",
                                                                            "id": "c88a36a9-0cab-4a33-a853-728a5bbe8006",
                                                                            "displayName": "Which sub-behavior of Handling special structures caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_special_structures_sub_behavior_a",
                                                                                    "id": "531ce4f5-fccf-4348-aebc-9ad75f5f403a",
                                                                                    "displayName": "Handling highway on / off ramps - Highway-to-highway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_special_structures_sub_behavior_b",
                                                                                    "id": "88076790-a023-44f1-9cb1-1a51dc3ad230",
                                                                                    "displayName": "Handling freeway on / off ramps",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_special_structures_sub_behavior_c",
                                                                                    "id": "366b2aa7-20ee-46c8-a52b-227dfef5058b",
                                                                                    "displayName": "Handling toll booths",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_j",
                                                                    "id": "f68a1c9f-6eaf-4935-8be6-d9d9bebc59a3",
                                                                    "displayName": "[Lane Keeping] Driving in specific areas - bridges",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Driving_in_specific_areas_bridges_sub_behavior",
                                                                            "id": "9f13cea2-a3b6-41a4-952d-0278aa598ed2",
                                                                            "displayName": "Which sub-behavior of Driving in specific areas - bridges caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_bridges_sub_behavior_a",
                                                                                    "id": "578b2c59-582a-434f-8472-2056d2164bd4",
                                                                                    "displayName": "Handling overpasses or bridges \u003c=100m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_bridges_sub_behavior_b",
                                                                                    "id": "d58a7152-a764-45d8-895c-532d0650e7c7",
                                                                                    "displayName": "Handling bridges 100m-400m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_bridges_sub_behavior_c",
                                                                                    "id": "93ea449e-1219-4398-9382-d7aa84ad7039",
                                                                                    "displayName": "Handling bridges \u003e 400m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_k",
                                                                    "id": "d2a6b0bc-a33f-4939-a0e9-df78f5c0c398",
                                                                    "displayName": "[Lane Keeping] Driving in specific areas - tunnels",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Driving_in_specific_areas_tunnels_sub_behavior",
                                                                            "id": "54f6edb6-2318-436c-b89a-8c1f62eddb4c",
                                                                            "displayName": "Which sub-behavior of Driving in specific areas - tunnels caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_tunnels_sub_behavior_a",
                                                                                    "id": "3e896e06-d618-4ad9-a0aa-dc30157f1fdd",
                                                                                    "displayName": "Handling underpasses or tunnels \u003c=200m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_tunnels_sub_behavior_b",
                                                                                    "id": "ddd00097-88a9-4799-9f8f-d1e1b28fd394",
                                                                                    "displayName": "Handling tunnels \u003e200m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_l",
                                                                    "id": "709befc7-2fb1-43b8-91ee-e8877403ec7e",
                                                                    "displayName": "[ODD Scenery] Direction of Traffic",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Direction_of_Traffic_sub_behavior",
                                                                            "id": "f5b47127-8628-482a-b181-6f7b04936afd",
                                                                            "displayName": "Which sub-behavior of Direction of Traffic caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Direction_of_Traffic_sub_behavior_a",
                                                                                    "id": "bf719abb-795e-4fd7-a58e-d04847a417f3",
                                                                                    "displayName": "Performing left-hand side driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Direction_of_Traffic_sub_behavior_b",
                                                                                    "id": "8f4c546a-dca3-465c-83e3-a63bdb0d3f49",
                                                                                    "displayName": "Performing right-hand side driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_m",
                                                                    "id": "8a1c6da6-fef6-401f-9d1e-a9733f6ba97c",
                                                                    "displayName": "[ODD Scenery] Handling various road surface types",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_road_surface_types_sub_behavior",
                                                                            "id": "6a7aef22-f18d-4ad6-8dd7-a570726bbcac",
                                                                            "displayName": "Which sub-behavior of Handling various road surface types caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_road_surface_types_sub_behavior_a",
                                                                                    "id": "88631c22-072a-4133-9a00-824c1f081074",
                                                                                    "displayName": "Handling asphalt / paved roads",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_road_surface_types_sub_behavior_b",
                                                                                    "id": "5e5844a8-3936-48e8-b74f-90d1219c3477",
                                                                                    "displayName": "Handling road surfaces with metal plates",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_n",
                                                                    "id": "b3d9fe99-24fc-4e11-9f75-012a599a6be2",
                                                                    "displayName": "[ODD Scenery] Handling various lane widths",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_lane_widths_sub_behavior",
                                                                            "id": "2a8ae715-dbfc-47e2-8d73-9eaa0e408d63",
                                                                            "displayName": "Which sub-behavior of Handling various lane widths caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_widths_sub_behavior_a",
                                                                                    "id": "83f5fa9e-061f-4cd5-81d6-35bfd61e4f58",
                                                                                    "displayName": "Handling lane widths \u003c 2.7 m (narrow lanes)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_widths_sub_behavior_b",
                                                                                    "id": "74189026-85a3-4b04-9a69-f7cbcb95ff31",
                                                                                    "displayName": "Handling lane widths 2.7 - 3.5 m (semi-narrow lanes)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_widths_sub_behavior_c",
                                                                                    "id": "45b4b1a3-20e4-4521-9bdf-9d099441f297",
                                                                                    "displayName": "Handling lane widths \u003e= 3.5 m (wide lanes)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_o",
                                                                    "id": "90654481-cc24-4866-9c77-3057203faad2",
                                                                    "displayName": "[ODD Scenery] Handling various lane grades",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_lane_grades_sub_behavior",
                                                                            "id": "9a0070b7-3cc6-496c-86d6-81fc36ae1879",
                                                                            "displayName": "Which sub-behavior of Handling various lane grades caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_grades_sub_behavior_a",
                                                                                    "id": "03ea7d75-ef8c-406e-9ae2-a2ccc727bc0f",
                                                                                    "displayName": "Handling lane grades 0 - 20%",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_grades_sub_behavior_b",
                                                                                    "id": "7fafa710-1e80-47d5-bf0b-5fc175369c10",
                                                                                    "displayName": "Handling lane grades 20 - 27%",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_grades_sub_behavior_c",
                                                                                    "id": "40a78c81-bd1e-4260-bfae-46a39c202bc3",
                                                                                    "displayName": "Handling lane grades \u003e 27%",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_p",
                                                                    "id": "fef85b38-b772-4cf6-b9d8-87a5a1d136aa",
                                                                    "displayName": "[ODD Scenery] Handling turn curvature",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_turn_curvature_sub_behavior",
                                                                            "id": "b6d48208-2ed2-4e05-94aa-8428a90315b9",
                                                                            "displayName": "Which sub-behavior of Handling turn curvature caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_turn_curvature_sub_behavior_a",
                                                                                    "id": "8f8441f3-295d-4431-8390-e5fcc2657ead",
                                                                                    "displayName": "Handling turns or curvature with radius 15 - 150 m",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_turn_curvature_sub_behavior_b",
                                                                                    "id": "12dab394-f320-4d50-ad10-438ac61ac6c8",
                                                                                    "displayName": "Handling turns or curvature with radius \u003e= 150 m",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_q",
                                                                    "id": "5a6db7ce-7dea-4f37-ab36-24e5a89d14d2",
                                                                    "displayName": "[ODD Scenery] Handling high roll / pitch turns",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_high_roll_pitch_turns_sub_behavior",
                                                                            "id": "4ec0d3d5-2e48-4971-ae06-8aba7c298c71",
                                                                            "displayName": "Which sub-behavior of Handling high roll / pitch turns caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_high_roll_pitch_turns_sub_behavior_a",
                                                                                    "id": "13cbdebc-29b9-4bc5-b59f-84fa78557cdf",
                                                                                    "displayName": "Handling high roll / pitch turns (eg - cloverleaf)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_r",
                                                                    "id": "58b825b9-ae0d-4007-9c16-8980e46b2318",
                                                                    "displayName": "[ODD Scenery] Driving on various roadway types",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Driving_on_various_roadway_types_sub_behavior",
                                                                            "id": "c13b982c-4615-4c75-81eb-80da04821a69",
                                                                            "displayName": "Which sub-behavior of Driving on various roadway types caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Driving_on_various_roadway_types_sub_behavior_a",
                                                                                    "id": "9cabc985-566b-4eb0-897d-0399c777cb8b",
                                                                                    "displayName": "Driving on limited access freeways",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                }
                                                            ],
                                                            "status": ""
                                                        }
                                                    ],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "ri_is_Roadway_Infrastructure_b",
                                                    "id": "5306fdca-2378-42d4-87ff-733e403bde25",
                                                    "displayName": "No",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "dc_is_Dynamic_Conditions",
                                            "id": "75ebb8f8-fb0b-43a3-b0c2-9046c8ed2060",
                                            "displayName": "Did the Dynamic Conditions directly cause the hazardous behavior?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "dc_is_Dynamic_Conditions_a",
                                                    "id": "6de7b43d-d425-4114-ac32-b2f519bc871f",
                                                    "displayName": "Yes",
                                                    "nodeType": "branch",
                                                    "childNodes": [
                                                        {
                                                            "name": "dc_Dynamic_Conditions_behaviors",
                                                            "id": "d4de1667-5695-4140-a7ad-a11429b388af",
                                                            "displayName": "Which Dynamic Conditions directly cause the hazardous behavior?",
                                                            "nodeType": "choice",
                                                            "childNodes": [
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_a",
                                                                    "id": "2ffb3a11-7fe6-4662-90cc-236da69719f5",
                                                                    "displayName": "[Lane Keeping] Specific Actor Interactions - Respond to Other Road Agent (ORA) actions",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior",
                                                                            "id": "d866fd08-7565-4688-97c1-c6f3bf8f694c",
                                                                            "displayName": "Which sub-behavior of Specific Actor Interactions - Respond to Other Road Agent (ORA) actions caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_a",
                                                                                    "id": "3f819e9f-c07d-4a8f-b07c-df895dd74300",
                                                                                    "displayName": "Responding to Other Road Agent (ORA) cut-ins",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_b",
                                                                                    "id": "fcfd6d3d-95f8-4f24-92ec-87243fd70e24",
                                                                                    "displayName": "Responding to ORA reversing in drivable area",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_c",
                                                                                    "id": "3fe82d79-d913-472f-86fa-7f66f075f33a",
                                                                                    "displayName": "Handling ORA-ORA Collisions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_d",
                                                                                    "id": "6d4eabdb-c4d1-4fb4-992d-fcfef82f6d41",
                                                                                    "displayName": "Handling Non-Ped VRU Lane-splitting",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_e",
                                                                                    "id": "3f435220-ed5f-4077-b808-5d8883ccdebd",
                                                                                    "displayName": "Responding to tailgating ORAs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_b",
                                                                    "id": "8af81cc0-825f-4967-b5d2-331d6643cdcf",
                                                                    "displayName": "[Lane Keeping] Specific Actor Interactions - Handle Large or Unusual Vehicles",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior",
                                                                            "id": "a57a6ceb-145c-4964-9e44-953295d5075c",
                                                                            "displayName": "Which sub-behavior of Specific Actor Interactions - Handle Large or Unusual Vehicles caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_a",
                                                                                    "id": "387388ca-2bfd-4ad5-97aa-f6cd96958422",
                                                                                    "displayName": "Handling large vehicles",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_b",
                                                                                    "id": "165fe949-7f7d-4cd1-bcaf-9da4edb6d60a",
                                                                                    "displayName": "Handling articulated vehicles",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_c",
                                                                                    "id": "6fae80e1-3590-4884-914d-345e6dc33c02",
                                                                                    "displayName": "Handling vehicles with objects extending beyond the vehicle frame",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_d",
                                                                                    "id": "b41d4644-1c4b-4d87-8033-3dcfafdb78c4",
                                                                                    "displayName": "Handling other unusual vehicles (non-VRU)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_c",
                                                                    "id": "aa29d149-2197-42c1-87dc-022d3b32a518",
                                                                    "displayName": "[Lane Obstructions] Handling double-parked vehicles (DPV)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_double_parked_vehicles_sub_behavior",
                                                                            "id": "2d01d1ff-f1cc-4cd6-bc7f-81fc627cb782",
                                                                            "displayName": "Which sub-behavior of Handling double-parked vehicles (DPV) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_double_parked_vehicles_sub_behavior_a",
                                                                                    "id": "f67bed08-460a-4e2a-8e8e-ef2601d4a581",
                                                                                    "displayName": "Handling double-parked or stalled vehicles (DPV) - same direction traffc lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_d",
                                                                    "id": "2d0f8b95-a829-422a-9f3a-88f814179961",
                                                                    "displayName": "[Lane Obstructions] Handling Animals",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Animals_sub_behavior",
                                                                            "id": "54f2a838-4c70-4403-a064-652c82f911b1",
                                                                            "displayName": "Which sub-behavior of Handling Animals caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_a",
                                                                                    "id": "f0c50095-e9df-441d-a0b2-833108f2932b",
                                                                                    "displayName": "Handling flying animals",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_b",
                                                                                    "id": "a7311ce2-d3a2-4016-ba56-2de13537bbcc",
                                                                                    "displayName": "Handling large non-pet animals (deer, etc.)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_c",
                                                                                    "id": "aafa9b65-6e02-4b38-8e92-92987d51d93e",
                                                                                    "displayName": "Handling other critical objects (pets, protected species, etc)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_d",
                                                                                    "id": "271995e5-2fc1-458a-b571-86f9d423d8c2",
                                                                                    "displayName": "Handling small non-pet animals (squirrels, etc.)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_e",
                                                                    "id": "1007dce8-b09b-44e1-9ce7-c51d1c43df4d",
                                                                    "displayName": "[Lane Obstructions] Handling Debris and Vegetation",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Debris_and_Vegetation_sub_behavior",
                                                                            "id": "10a7aef3-379e-4726-9c09-74119097201d",
                                                                            "displayName": "Which sub-behavior of Handling Debris and Vegetation caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Debris_and_Vegetation_sub_behavior_a",
                                                                                    "id": "53448913-0d78-4a31-8835-e88acc742710",
                                                                                    "displayName": "Handling debris on roadway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Debris_and_Vegetation_sub_behavior_b",
                                                                                    "id": "64c0bb15-bfdc-436b-ba74-f37a448c7bcb",
                                                                                    "displayName": "Handling vegetation",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Debris_and_Vegetation_sub_behavior_c",
                                                                                    "id": "4b4abbe5-c13d-45ab-9666-37be5f186dac",
                                                                                    "displayName": "Handling blowing debris",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_f",
                                                                    "id": "799f744f-d2fe-4526-bfcc-d53494352af6",
                                                                    "displayName": "[Lane Obstructions] Handling Critical Damaged Roads",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior",
                                                                            "id": "68bcee59-7d36-4aaa-b43b-2285035d023f",
                                                                            "displayName": "Which sub-behavior of Handling Critical Damaged Roads caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_a",
                                                                                    "id": "a816f934-6927-4f82-a218-40b2740010ab",
                                                                                    "displayName": "Handling pits / open holes not restricted by traffic signage",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_b",
                                                                                    "id": "f86f88ce-6952-4293-82a9-3877b07173f8",
                                                                                    "displayName": "Handling sinkholes in roadway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_c",
                                                                                    "id": "0d32361e-207a-49cd-b3c5-47e142dcb6cc",
                                                                                    "displayName": "Handling landslide-removed roadway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_d",
                                                                                    "id": "aec75ab4-c6f1-481a-9349-54ce53f38fcc",
                                                                                    "displayName": "Handling collapsed bridge",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_g",
                                                                    "id": "aaad5cb8-09ce-4822-8797-ef8f31e9c23f",
                                                                    "displayName": "[Lane Obstructions] Handling Non-Critical Damaged Roads",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior",
                                                                            "id": "be454e9b-87ea-4ca8-8d41-159d87a2660c",
                                                                            "displayName": "Which sub-behavior of Handling Non-Critical Damaged Roads caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_a",
                                                                                    "id": "34575dba-63f7-47ab-8d30-caa95d7631f8",
                                                                                    "displayName": "Handling road surface with cracks",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_b",
                                                                                    "id": "85dfab22-ff74-41aa-8bbd-b97065f314ce",
                                                                                    "displayName": "Handling road surface with potholes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_c",
                                                                                    "id": "1efea36b-777f-4f81-81a2-a306fe2164e3",
                                                                                    "displayName": "Handling road surface with ruts",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_d",
                                                                                    "id": "061a5481-f09d-4d60-a26f-4bcd7c74ee28",
                                                                                    "displayName": "Handling road surface with swells (upward bulges on the road surface)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_h",
                                                                    "id": "18918ae9-9eae-4afb-b3e5-2c01b5ceea2b",
                                                                    "displayName": "[Scenes] Responding to static EMV scenes",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Responding_to_static_EMV_scenes_sub_behavior",
                                                                            "id": "62f76bb4-855e-4b65-bcfb-ff44f5272bbd",
                                                                            "displayName": "Which sub-behavior of Responding to static EMV scenes caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Responding_to_static_EMV_scenes_sub_behavior_a",
                                                                                    "id": "d47f83ff-3002-4c7a-8c6c-2b11e7eb5d25",
                                                                                    "displayName": "Responding to EMV scenes (static EMV)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_static_EMV_scenes_sub_behavior_b",
                                                                                    "id": "7da1b239-a0ba-4ad4-94c7-9edcb5f2b857",
                                                                                    "displayName": "Handling fire hoses",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_static_EMV_scenes_sub_behavior_c",
                                                                                    "id": "21ff6758-c541-4142-874f-9b42f2cd22cc",
                                                                                    "displayName": "Handling flares",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_i",
                                                                    "id": "c9d7c192-43a3-48db-b796-7dc64147b1d3",
                                                                    "displayName": "[Scenes] Handling temporary traffic restrictions (TTR) - Channelization",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_TTR_Channelization_sub_behavior",
                                                                            "id": "8949d4c9-337e-4f23-a7c5-8b47a8926622",
                                                                            "displayName": "Which sub-behavior of Handling temporary traffic restrictions (TTR) - Channelization caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_TTR_Channelization_sub_behavior_a",
                                                                                    "id": "daa7a578-2763-4c58-a7ca-c9d70633b1f9",
                                                                                    "displayName": "Handling channelization - lane boundary divergence \u003c= defined threshold from baseline conditions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_TTR_Channelization_sub_behavior_b",
                                                                                    "id": "3cff515f-66d3-44c1-bd13-e253e2bdcfcb",
                                                                                    "displayName": "Handling channelization - lane boundary divergence \u003e than defined threshold from baseline conditions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_j",
                                                                    "id": "b751cbf1-fa7f-42d1-b0ad-eac1b461cc27",
                                                                    "displayName": "[Scenes] Handling temporary traffic restrictions (TTR) - Road Closure",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_TTR_Road_Closure_sub_behavior",
                                                                            "id": "0df8e3ee-e765-4476-b1e2-d93c4b9dfe2e",
                                                                            "displayName": "Which sub-behavior of Handling temporary traffic restrictions (TTR) - Road Closure caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_TTR_Road_Closure_sub_behavior_a",
                                                                                    "id": "c5231d1a-e46a-4fc3-9e04-0fc4188c0abb",
                                                                                    "displayName": "Responding to traffic signs causing road closure",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_TTR_Road_Closure_sub_behavior_b",
                                                                                    "id": "b09a9dd0-6165-46ff-b2e4-cff65c31ad2a",
                                                                                    "displayName": "Responding to objects causing road closure",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_k",
                                                                    "id": "dc54ee39-b6d6-4255-9595-8117c80b75df",
                                                                    "displayName": "[Scenes] Handling temporary traffic restrictions (TTR) - Pits / Open Holes",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_TTR_Pits_Open_Holes_sub_behavior",
                                                                            "id": "f2737554-f876-44ad-97a6-2af6e3e04262",
                                                                            "displayName": "Which sub-behavior of Handling temporary traffic restrictions (TTR) - Pits / Open Holes caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_TTR_Pits_Open_Holes_sub_behavior_a",
                                                                                    "id": "0626a8b9-e90e-4a01-889b-f7319270a5e0",
                                                                                    "displayName": "Handling pits / open holes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_l",
                                                                    "id": "ee706e06-8e44-4d64-9324-6af7d095157c",
                                                                    "displayName": "[SPA] Specific Scenes - Handling active rear/oncoming EMVs",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior",
                                                                            "id": "0c52390d-9900-4f99-8673-84fbb3671179",
                                                                            "displayName": "Which sub-behavior of Specific Scenes - Handling active rear/oncoming EMVs caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior_a",
                                                                                    "id": "3ef47dfe-c0f5-4cab-aa42-6d06d544e65b",
                                                                                    "displayName": "Handling active rear EMVs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior_b",
                                                                                    "id": "23398946-af4c-44c0-bbf7-c1bc0918e16b",
                                                                                    "displayName": "Handling active oncoming EMVs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior_c",
                                                                                    "id": "6654bfde-99d8-4182-9bd6-1c9615f96a87",
                                                                                    "displayName": "Handling active EMVs - law enforcement officer (LEO) traffic stop",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_m",
                                                                    "id": "52dcf4ab-69ab-44cc-b59c-0b26f9d3dcd4",
                                                                    "displayName": "[SPA] Specific Scenes - Handling human controlling traffic situations (HCT)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Scenes_HCT_sub_behavior",
                                                                            "id": "ffe57393-45a5-4736-9c59-0b00f958513d",
                                                                            "displayName": "Which sub-behavior of Specific Scenes - Handling human controlling traffic situations (HCT) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_HCT_sub_behavior_a",
                                                                                    "id": "577dc3c3-26b0-4fe1-9ece-bd09d1235e83",
                                                                                    "displayName": "Handling human controlling traffic situations (HCT)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_n",
                                                                    "id": "3250e0f7-eefc-43a4-a61b-8b9563b58048",
                                                                    "displayName": "[VRU] Handling pedestrians outside of crosswalks",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_pedestrians_outside_of_crosswalks_sub_behavior",
                                                                            "id": "2fdc18b8-e894-430d-a556-291d8337de62",
                                                                            "displayName": "Which sub-behavior of Handling pedestrians outside of crosswalks caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_pedestrians_outside_of_crosswalks_sub_behavior_a",
                                                                                    "id": "1a84126a-7892-448e-acc6-15e8a48a9007",
                                                                                    "displayName": "Handling pedestrian interactions (excluding crosswalks)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_o",
                                                                    "id": "9fe8a594-af93-4929-b36d-15293f149976",
                                                                    "displayName": "[VRU] Handling Non-Ped VRUs",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Non_Ped_VRUs_sub_behavior",
                                                                            "id": "d2fca2a2-ab3e-40c5-9ad8-abad1a5de497",
                                                                            "displayName": "Which sub-behavior of Handling Non-Ped VRUs caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_a",
                                                                                    "id": "798ebe7f-d9c9-4017-90a9-5a384d5e6f50",
                                                                                    "displayName": "Handling motorized cyclists",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_b",
                                                                                    "id": "02cfe16d-f2b3-424c-9677-99237f9b2c50",
                                                                                    "displayName": "Handling non-motorized cyclists",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_c",
                                                                                    "id": "01932cf5-02da-4e94-9db4-0089d5ffcd1f",
                                                                                    "displayName": "Handling VRUs in exposed vehicles",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_d",
                                                                                    "id": "8b0917fc-7fee-42a1-9562-afebd3280fe7",
                                                                                    "displayName": "Handling other non-pedestrian VRUs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_p",
                                                                    "id": "f46e69b8-1117-4f76-9d63-4b53e1d7ff6f",
                                                                    "displayName": "[VRU] Handling Small VRUs and Strollers",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Small_VRUs_and_Strollers_sub_behavior",
                                                                            "id": "293838f9-119c-4bd1-9626-a827c7cac121",
                                                                            "displayName": "Which sub-behavior of Handling Small VRUs and Strollers caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Small_VRUs_and_Strollers_sub_behavior_a",
                                                                                    "id": "ce24cbf2-8b5e-461c-b6c2-d29abb3f7399",
                                                                                    "displayName": "Handling small pedestrians",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Small_VRUs_and_Strollers_sub_behavior_b",
                                                                                    "id": "15f9ec11-c990-456b-addc-6d364e197e81",
                                                                                    "displayName": "Handling strollers",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_q",
                                                                    "id": "4c1520b1-0b9b-4483-8d7f-f6e73181f21f",
                                                                    "displayName": "[VRU] Handling nearfield interactions (all VRU)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Nearfield_Interactions_VRU_sub_behavior",
                                                                            "id": "144560be-3db0-45a2-8b04-840d19599e65",
                                                                            "displayName": "Which sub-behavior of Handling nearfield interactions (all VRU) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Nearfield_Interactions_VRU_sub_behavior_a",
                                                                                    "id": "1cfa26f1-859f-4d09-a131-0ee525516616",
                                                                                    "displayName": "Handling nearfield interactions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_r",
                                                                    "id": "4a20310a-8305-4efb-a8bc-dfdd98dbdb96",
                                                                    "displayName": "[Collision and Stopping Maneuver] Stopping Maneuver Handling",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Stopping_Maneuver_Handling_sub_behavior",
                                                                            "id": "e6a45da8-31de-4f49-9ebb-b2454abf671f",
                                                                            "displayName": "Which sub-behavior of Stopping Maneuver Handling caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Stopping_Maneuver_Handling_sub_behavior_a",
                                                                                    "id": "75f1e2cf-4eab-4209-a978-f2f7dd2556bd",
                                                                                    "displayName": "Performing Stopping Maneuvers (according to stopping taxonomy)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_s",
                                                                    "id": "73bfc389-22b4-4c99-ab3e-b211da377a0c",
                                                                    "displayName": "[Collision and Stopping Maneuver] Responding to degraded states",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Responding_to_degraded_states_sub_behavior",
                                                                            "id": "0dd43478-5c65-42eb-a44f-1fb71d8d10d2",
                                                                            "displayName": "Which sub-behavior of Responding to degraded states caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Responding_to_degraded_states_sub_behavior_a",
                                                                                    "id": "5c052467-75e4-4243-a63c-6561aed3a83d",
                                                                                    "displayName": "Responding to performance-relevant failure with out of lane pullover",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_degraded_states_sub_behavior_b",
                                                                                    "id": "15c6ff76-c515-411f-be70-67acf7ba6764",
                                                                                    "displayName": "Responding to performance-relevant failure with in-lane pullover",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_degraded_states_sub_behavior_c",
                                                                                    "id": "bf98ccc9-932b-4647-a3c3-d2ea87f6b0f9",
                                                                                    "displayName": "Responding to performance-relevant failure with immediate stop",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_t",
                                                                    "id": "2c95d1c1-2783-40bc-b4df-4fc89b5b3fe0",
                                                                    "displayName": "[Collision and Stopping Maneuver] Collision Detection and Response",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Collision_Detection_and_Response_sub_behavior",
                                                                            "id": "7f1251f8-b79b-4c1d-a99f-49a6a22b4b54",
                                                                            "displayName": "Which sub-behavior of Collision Detection and Response caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Collision_Detection_and_Response_sub_behavior_a",
                                                                                    "id": "27ce93e4-1661-42be-8733-1c5f0b4a8588",
                                                                                    "displayName": "Detect collisions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Collision_Detection_and_Response_sub_behavior_b",
                                                                                    "id": "8613296b-0961-4aa8-aadc-eac68d11329b",
                                                                                    "displayName": "Responding to collisions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_u",
                                                                    "id": "81202285-d8d9-48ae-bc57-af65a2dc73b2",
                                                                    "displayName": "[Collision and Stopping Maneuver] Handling cloud outage",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Cloud_Outage_sub_behavior",
                                                                            "id": "d8c229e5-8fb2-4e2f-9baf-b8ddf06f9155",
                                                                            "displayName": "Which sub-behavior of Handling cloud outage caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Cloud_Outage_sub_behavior_a",
                                                                                    "id": "79713a40-b48a-435b-be91-9121de086fac",
                                                                                    "displayName": "Handling cloud outage",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                }
                                                            ],
                                                            "status": ""
                                                        }
                                                    ],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "dc_is_Dynamic_Conditions_b",
                                                    "id": "5cd282c1-d886-44f3-944d-0208f36596dd",
                                                    "displayName": "No",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_type",
                                            "id": "059c19e9-7e8b-4b75-b7aa-e41ed1eb866b",
                                            "displayName": "What is the loss factor type you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_type_a",
                                                    "id": "f866c4ba-f130-4b62-b46f-b19274d54068",
                                                    "displayName": "Car",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_b",
                                                    "id": "bf24f8c1-d735-4607-be5f-414483da09d4",
                                                    "displayName": "Bus",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_c",
                                                    "id": "bb937081-dcb2-4a4c-8f6d-b3dece16d4d0",
                                                    "displayName": "Rail",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_d",
                                                    "id": "61c2ad6f-5f13-4600-9b9e-86d3e7b4856a",
                                                    "displayName": "Light Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_e",
                                                    "id": "ede029f1-b545-4132-9f92-ecd8a906ebbf",
                                                    "displayName": "Medium Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_f",
                                                    "id": "e6bfd3e7-8e3e-444a-95d5-fcebcd6bb4f7",
                                                    "displayName": "Heavy Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_g",
                                                    "id": "65025849-11b7-4919-9fe0-4ea949f2ab6a",
                                                    "displayName": "Super Heavy Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_h",
                                                    "id": "1fbc5a89-d756-4931-9e8e-f9f055000497",
                                                    "displayName": "Special Emergency Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_i",
                                                    "id": "1a72c57b-9e8a-4b99-b36a-680629f419be",
                                                    "displayName": "Motorcycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_j",
                                                    "id": "a66e5615-77b5-4697-82d4-e6de1c6a9511",
                                                    "displayName": "Cyclist",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_k",
                                                    "id": "e23d4d12-fc74-4e4d-837a-c2eb424ac9fe",
                                                    "displayName": "Adult",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_l",
                                                    "id": "bbd5b93d-e90e-41e3-85d2-955fee5d7cef",
                                                    "displayName": "Small Pedestrian",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_m",
                                                    "id": "d576388d-85d4-4e35-ac32-11672fa74806",
                                                    "displayName": "Animal",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_n",
                                                    "id": "091165fe-a946-4e0c-a024-f8a4962b444d",
                                                    "displayName": "Tall Fod",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_o",
                                                    "id": "509ea8f6-7332-4b50-9705-9188d20a1202",
                                                    "displayName": "Short Fod",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_p",
                                                    "id": "6d2b05e0-6119-41a8-9c32-0214fb7c0f75",
                                                    "displayName": "Traffic Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_q",
                                                    "id": "544f59ec-7263-487a-8218-f510c97b1087",
                                                    "displayName": "Bicycle Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_r",
                                                    "id": "7a5a7f76-081d-4b8d-95fe-e76a40e43964",
                                                    "displayName": "Bus Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_s",
                                                    "id": "cffe49a8-c663-418e-aea3-f4831f52f690",
                                                    "displayName": "HOV Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_t",
                                                    "id": "f0729684-6cc3-47fe-a3db-9f089ad7fe26",
                                                    "displayName": "HOV Toll Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_u",
                                                    "id": "eb730af1-e763-4467-8df5-b89b2305939e",
                                                    "displayName": "Motorcycle Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_v",
                                                    "id": "7a62932a-fa7a-4a6e-9b15-09d9953db37c",
                                                    "displayName": "Shared Used Bicycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_w",
                                                    "id": "5ac481fd-dd05-446c-9366-82c3dfeed23c",
                                                    "displayName": "Shared Used Tram",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_x",
                                                    "id": "e4973a1a-a5cb-42e9-bf8f-2ad6a615868d",
                                                    "displayName": "Tramways",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_y",
                                                    "id": "eadeb2ef-8c93-436c-85b8-35c51d04a21a",
                                                    "displayName": "Truckway",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_z",
                                                    "id": "971bf85e-e056-4f6c-aa44-bf8c53d5a2ec",
                                                    "displayName": "Emergency Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aa",
                                                    "id": "e8e0b91b-24a5-467c-9d6a-f7331503e2d2",
                                                    "displayName": "No Turn On Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ab",
                                                    "id": "f2cbcffd-be52-4fb3-b4c9-88fb2f0acb30",
                                                    "displayName": "Ped Crossing",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ac",
                                                    "id": "19953dac-232d-43ff-8d34-2d3e4310070a",
                                                    "displayName": "School Zone Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ad",
                                                    "id": "5c062339-0715-49cc-9912-1e2e366c04d6",
                                                    "displayName": "Regulatory All Way Stop",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ae",
                                                    "id": "e5d23506-604c-48e8-b1d2-534956947049",
                                                    "displayName": "Regulatory Stop",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_af",
                                                    "id": "e244736c-dbbf-46b9-89cd-d102a07a79a6",
                                                    "displayName": "Regulatory Yield",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ag",
                                                    "id": "87b6dee5-5ab9-4668-bd0c-c5594ec26d79",
                                                    "displayName": "End Road Work",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ah",
                                                    "id": "1f004937-d9ec-4f07-9fb1-0600c1d96503",
                                                    "displayName": "Flagger Ahead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ai",
                                                    "id": "1ad5c47d-6833-4372-8d4c-2ecd73393d40",
                                                    "displayName": "Road Closed",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aj",
                                                    "id": "f72198f6-217f-46e8-931e-8fe6097d1906",
                                                    "displayName": "Road Work Ahead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ak",
                                                    "id": "f1aa8b26-1baa-4dd9-9f87-999a3c47eb9b",
                                                    "displayName": "Shoulder Work Ahead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_al",
                                                    "id": "4bd22868-adcd-4aec-ac17-8e08812be7e2",
                                                    "displayName": "Changeable Message",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_am",
                                                    "id": "abed2603-129b-4ea9-aba7-a1202a15b5c0",
                                                    "displayName": "Guide",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_an",
                                                    "id": "8201b2b6-1cde-405e-87f1-6632ac67c676",
                                                    "displayName": "Hospital",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ao",
                                                    "id": "f703e2ba-02aa-440f-ba6c-8108e60bc182",
                                                    "displayName": "Toll Road",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ap",
                                                    "id": "ae662ce0-6eba-4c32-9d7b-d6f5cf9b9aba",
                                                    "displayName": "Warning",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aq",
                                                    "id": "b6ddda09-f0d5-4083-a2aa-8ff3204ac13d",
                                                    "displayName": "Lane Shift",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ar",
                                                    "id": "c00b4bc5-3021-4040-832e-b3b7af6f9d4a",
                                                    "displayName": "Speed Limit Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_as",
                                                    "id": "3f95c2cb-95c3-4ce8-b3ec-dc1a31bd02cb",
                                                    "displayName": "Work Zone Begin",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_at",
                                                    "id": "18fd89f5-928c-4b68-8ed1-dd6a4396eb35",
                                                    "displayName": "Warning Traffic Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_au",
                                                    "id": "bfddd949-cd51-4152-a4b0-350c11421ce0",
                                                    "displayName": "Green",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_av",
                                                    "id": "70b9ebc9-e381-4479-9b4e-6cc76adf167c",
                                                    "displayName": "Yellow",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aw",
                                                    "id": "fe64f950-a1d7-4213-8b84-dbc0cbf5398e",
                                                    "displayName": "Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ax",
                                                    "id": "05acbb3f-432f-4dac-bfb6-a542225d7581",
                                                    "displayName": "Green Trasitioning To Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ay",
                                                    "id": "bd7cfdc8-8865-423a-99c3-ed0ec8577d93",
                                                    "displayName": "Red Trasitioning To Green",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_az",
                                                    "id": "a8d0e7a9-69a3-444c-8923-ea2a54a6709c",
                                                    "displayName": "Flashing Green",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ba",
                                                    "id": "294fc816-67c4-4cf5-83df-71e4da172e53",
                                                    "displayName": "Fashing Yellow",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bb",
                                                    "id": "18b949ca-d3a3-4c3f-bace-e90003a41a79",
                                                    "displayName": "Flashing Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bc",
                                                    "id": "4e996293-3c2d-4740-a312-7c83a0a76b5c",
                                                    "displayName": "Normal Steady Cycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bd",
                                                    "id": "ba821e83-5167-4eec-8a8a-775b8d756264",
                                                    "displayName": "Walk Dontwalk Cycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_be",
                                                    "id": "f4061b97-b4d8-4807-8c7d-eafe45f5842a",
                                                    "displayName": "Malfunctioning",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bf",
                                                    "id": "4e9371dc-5727-4a1b-b6e9-c3cb48fcc8dd",
                                                    "displayName": "Other Equipment",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bg",
                                                    "id": "5130e5c7-0325-449a-8838-31abd3da4e59",
                                                    "displayName": "Traffic Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bh",
                                                    "id": "1553b262-34ba-4448-ae37-b5b620a2f105",
                                                    "displayName": "Short Basic Road Structure",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bi",
                                                    "id": "59885781-a455-4039-ba59-d787d6af5499",
                                                    "displayName": "Tall Basic Road Structure",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bj",
                                                    "id": "4a67bc80-b450-4e03-ab14-3bdc71fa8c8f",
                                                    "displayName": "Passenger",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_action",
                                            "id": "ade3e85f-4e77-4564-98d1-3346a24c89f1",
                                            "displayName": "What is the loss factor action you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_action_a",
                                                    "id": "ef1da75b-12ac-4b7d-b65c-1d81e7fc5d6a",
                                                    "displayName": "Drive Straight",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_b",
                                                    "id": "7aac9837-cbe4-4c7a-b3d6-ee78babbbde3",
                                                    "displayName": "Navigate Intersection",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_c",
                                                    "id": "9ac47592-f6f7-43c4-a6fa-a010d8fa8179",
                                                    "displayName": "Lateral Maneuver",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_d",
                                                    "id": "23c81674-9699-4478-8aa0-7d8e5b95692a",
                                                    "displayName": "Parking Low Speed Maneuver",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_e",
                                                    "id": "7f48f5e8-5d1a-4b8d-963d-2280868627b8",
                                                    "displayName": "VRU Lane Splitting Through Dense Traffic",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_f",
                                                    "id": "f9e12d3f-f403-4e3a-821f-29306239cf0a",
                                                    "displayName": "Walking",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_g",
                                                    "id": "3a542828-21e9-47aa-9d43-ab7d3ee1aff7",
                                                    "displayName": "Running",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_h",
                                                    "id": "c14e049f-f50e-499d-9628-96850aa006d4",
                                                    "displayName": "Traversing Crosswalk",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_i",
                                                    "id": "55672f2c-17c1-4c06-8030-6c2505336014",
                                                    "displayName": "Entering Exiting Parked Or Stopped Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_j",
                                                    "id": "e0dcc778-7bcb-4498-946e-30a7c230fc19",
                                                    "displayName": "Getting Onto Bicycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_k",
                                                    "id": "ca4fdb85-e744-47f7-bce2-5e7d96117ad2",
                                                    "displayName": "Getting Off Bicycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_l",
                                                    "id": "2edb0ada-0e34-427a-8f40-a59b0558d8ec",
                                                    "displayName": "Standing",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_m",
                                                    "id": "b8088ca3-7231-4497-a138-58796879943d",
                                                    "displayName": "Sitting",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_n",
                                                    "id": "36efd427-cddf-4814-9433-5a289813d53a",
                                                    "displayName": "Lying Down",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_o",
                                                    "id": "cef22ccc-7ba3-424d-8dbd-e293f9a0e697",
                                                    "displayName": "Crouching",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_p",
                                                    "id": "252e2f97-0ffc-41d2-ae76-39cd7dcb73cc",
                                                    "displayName": "Kneeling",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_q",
                                                    "id": "f2327401-979d-4b10-9283-95dbfdd64042",
                                                    "displayName": "Upside Down",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_r",
                                                    "id": "9972da91-4077-445a-8e35-cbc127034d6a",
                                                    "displayName": "All Fours",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_s",
                                                    "id": "0634b7fe-4eb1-4092-9e33-127c2c1d1b67",
                                                    "displayName": "Collision Or Stopping Maneuver",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_t",
                                                    "id": "e6d8d21d-fd6a-4eac-835b-3cea5ea53b16",
                                                    "displayName": "Stationary",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_u",
                                                    "id": "dba86c20-01c0-4f98-97db-3a5d2ddcaf6b",
                                                    "displayName": "Moving",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_relative_location",
                                            "id": "64cbf8ae-f2a6-4aa7-8936-1e079583b4b1",
                                            "displayName": "What is the loss factor relative location you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_relative_location_a",
                                                    "id": "99db488b-1a70-46cd-baf5-c319853f9337",
                                                    "displayName": "Lead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_b",
                                                    "id": "335afab9-ffba-455b-8a89-f463e9ccc2c3",
                                                    "displayName": "Front",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_c",
                                                    "id": "28b50485-90ae-412f-8392-dc38bb9a96e4",
                                                    "displayName": "Adjacent",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_d",
                                                    "id": "b8953397-b849-4121-8763-d2406a69bade",
                                                    "displayName": "Rear",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_e",
                                                    "id": "948bcc16-51ad-4c02-b6dc-dece1f1ab5ba",
                                                    "displayName": "Above",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_f",
                                                    "id": "f3917b66-b010-47c8-89a7-835e1e26fccf",
                                                    "displayName": "Under",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_relative_motion",
                                            "id": "db81041e-1988-4692-a27b-10b4f5e40ce1",
                                            "displayName": "What is the loss factor relative motion you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_relative_motion_a",
                                                    "id": "0e82d76a-d6c7-4274-9e2f-6ba027a587ea",
                                                    "displayName": "Along Lane Codirected",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_b",
                                                    "id": "00330bd8-a8ab-474e-8c0a-88686d4e14ca",
                                                    "displayName": "Along Lane Oncoming",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_c",
                                                    "id": "ecd20509-0fab-46d2-b397-86d880ffcde1",
                                                    "displayName": "Towards Ego Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_d",
                                                    "id": "40d20778-366e-46ed-8cee-2404870255fc",
                                                    "displayName": "Away From Ego Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_e",
                                                    "id": "c096cd25-c1bc-4e73-a38d-76c7f3e2961f",
                                                    "displayName": "Crossing Path",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_f",
                                                    "id": "dc65cbba-086a-4eff-8a7e-335f5097720e",
                                                    "displayName": "Encroaching Upon Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_g",
                                                    "id": "6671b0fb-eef4-4370-91e7-bbfc1a556ee9",
                                                    "displayName": "Merging Into Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_h",
                                                    "id": "ea502992-7214-4712-80b5-6bbf00b7df6a",
                                                    "displayName": "Diverging From Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_i",
                                                    "id": "774916b8-432d-4cc8-beb4-553e78753f07",
                                                    "displayName": "Moving Above Or Below Ego Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_j",
                                                    "id": "65916671-9f12-41ad-aefb-4a62eb302e29",
                                                    "displayName": "None",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        }
                                    ],
                                    "status": ""
                                },
                                {
                                    "name": "hb_is_hazardous_behaviors_b",
                                    "id": "6636eb72-a5b2-417c-9fdf-c8ae4531d9a3",
                                    "displayName": "No",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        }
                    ],
                    "status": ""
                }
            ],
            "status": ""
        },
        {
            "name": "sd_rationale_comments",
            "id": "e0a759a5-9ca7-4192-9f07-da99acf519bd",
            "displayName": "Rationale Comments: Please note any observations or details you think are worth highlighting.",
            "nodeType": "freeText",
            "childNodes": [],
            "status": ""
        },
        {
            "name": "sd_sme",
            "id": "12acef23-5a5b-4114-b9a5-d1e251f30932",
            "displayName": "What type of task are you completing?",
            "nodeType": "choice",
            "childNodes": [
                {
                    "name": "sd_sme_a",
                    "id": "3d2cef23-c37f-4ec6-b2c8-93b64a119d49",
                    "displayName": "Production First Pass or QA",
                    "nodeType": "terminal",
                    "childNodes": [],
                    "status": ""
                },
                {
                    "name": "sd_sme_b",
                    "id": "bcca464b-baa3-48fe-9053-7cc6706343e2",
                    "displayName": "Cruise/GM employee or vendor doing Audit or Overwrite per Cruise/GMs request",
                    "nodeType": "branch",
                    "childNodes": [
                        {
                            "name": "sd_sme_made_changes",
                            "id": "2ec12d63-d3ef-4c4e-bbd3-b05d60075414",
                            "displayName": "Did you make any changes to the hazardous behavior, ego action, or loss factor?",
                            "nodeType": "choice",
                            "childNodes": [
                                {
                                    "name": "sd_sme_made_changes_a",
                                    "id": "c9c8ee3d-8185-449d-b507-e2d6aa8eeedf",
                                    "displayName": "Yes",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_made_changes_b",
                                    "id": "a9836644-49ed-46cb-bb3a-52f1fb698974",
                                    "displayName": "No",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_feedback",
                            "id": "95d40280-ed25-4406-81d9-cf1ef7343124",
                            "displayName": "Was there a reason for disagreement or potential gaps?",
                            "nodeType": "choice",
                            "childNodes": [
                                {
                                    "name": "sd_sme_feedback_a",
                                    "id": "609a8123-3ac7-4174-a3eb-ce112753fcc3",
                                    "displayName": "Labeler Adherence",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_b",
                                    "id": "595dc348-74b9-43d9-8afe-c68248a104a1",
                                    "displayName": "Guidance Ambiguity",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_c",
                                    "id": "6fa5e10d-4fe1-45c2-8429-5b89b5893b08",
                                    "displayName": "Guidance Gap",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_d",
                                    "id": "09a3d262-5ae9-4c75-b675-6f8237449a03",
                                    "displayName": "Other Error",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_e",
                                    "id": "02f78151-1f99-4169-83a4-97a39fbfa145",
                                    "displayName": "No Change or Gaps",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_feedback_categories",
                            "id": "562a59ef-97cb-48af-8331-f26520eb1b6b",
                            "displayName": "If there is guidance ambiguity or gap, what is the category?",
                            "nodeType": "branch",
                            "childNodes": [
                                {
                                    "name": "sd_sme_hazardous_behavior_gap",
                                    "id": "4a3803a2-7187-4682-bc94-67efc138d742",
                                    "displayName": "Hazardous Behavior",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_environment_condition_gap",
                                    "id": "e7edde6b-28ad-4fee-939c-e7061587bbb1",
                                    "displayName": "Environment Condition",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_roadway_infrastructure_gap",
                                    "id": "78c07e88-b1ae-456e-a1d4-9822732ba408",
                                    "displayName": "Roadway Infrastructure",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_dynamic_conditions_gap",
                                    "id": "ab474d82-7137-492a-b87d-e6f5303046e5",
                                    "displayName": "Dynamic Conditions",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_type_gap",
                                    "id": "db26547d-ef49-417f-b784-476b0cf648c5",
                                    "displayName": "Loss Factor Type",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_action_gap",
                                    "id": "25b3f487-0a4a-4878-9e5b-a2bb7d3470d2",
                                    "displayName": "Loss Factor Action",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_relative_location_gap",
                                    "id": "31a50f3b-52f9-4d65-8b0b-d897fff3fb7b",
                                    "displayName": "Loss Factor Relative Location",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_relative_motion_gap",
                                    "id": "63b6e4e4-ff24-45b4-8803-fc8925c6b6ff",
                                    "displayName": "Loss Factor Relative Motion",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_feedback_text",
                            "id": "f8ffb1ab-ace9-4666-9017-848e26d02794",
                            "displayName": "Please elaborate on any modifications / changes you made.",
                            "nodeType": "freeText",
                            "childNodes": [],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_escalation",
                            "id": "791e57b5-9e15-4606-84a4-a6dbd52f405a",
                            "displayName": "Please select if you have received input from a SME to adjust any labels.",
                            "nodeType": "boolean",
                            "childNodes": [],
                            "status": ""
                        }
                    ],
                    "status": ""
                }
            ],
            "status": ""
        }
    ]
}
        // ==============================================
        // === نهاية منطقة شجرة القرارات ==================
        // ==============================================


        // User data with shifts
        const usersByShift = {
            "Morning": [
                  { name: "Fatma Elzahraa Atef Mohamed", flashNumber: "" },
  { name: "Mayar gamal abdelfatah tantawy", flashNumber: "" },
  { name: "Rawan Essam Abdel Khaleq", flashNumber: "" },
  { name: "Eman Gamal Ahmed", flashNumber: "" },
  { name: "Rawan Saeed Mohamed Hekal", flashNumber: "" },
  { name: "Bsmalh Muhammad Yehya Muhammad", flashNumber: "" },
  { name: "Ibtissam mustafa abdelsadiek elsaied", flashNumber: "" }
            ],
            "Night": [
                { name: "Kareem Ahmed Mohamed Farrag", flashNumber: "" },
  { name: "Mohamed Khaled Elsayed Sakr", flashNumber: "" },
  { name: "Motassem mahmoud ali abdellah", flashNumber: "" },
  { name: "Muhannad Emadaldin Mohammed Jamal", flashNumber: "" },
  { name: "Ahmed Mohamed shabaan Saber", flashNumber: "" },
  { name: "Peter Awad Labib Isaaq", flashNumber: "" },
  { name: "Mustafa salah hassan", flashNumber: "" },
  { name: "Michele Gerges Shokry Attia", flashNumber: "" },
  { name: "youssouf hatem abdelhamid", flashNumber: "" },
  { name: "Abdelrhman Mahmoud Mohamed", flashNumber: "" },
  { name: "Samir Gamal ElMohammadi Mohamed", flashNumber: "" },
  { name: "Yousef Ahmed Fouad Abdullatif", flashNumber: "" },
  { name: "Ahmed Wasfi Ali Metwally", flashNumber: "" },
  { name: "Mostafa Ibrahim Mostafa Ibrahim", flashNumber: "" },
  { name: "MOHAMED KHALED MOHAMED ALI", flashNumber: "" }
            ],
            "Overnight": [
                { name: "Saleh Saad Aldin Moghazy Ahmed", flashNumber: "" },
  { name: "Ziad Shaban ibrahim", flashNumber: "" },
  { name: "Aly Ekramy Hasan Elzaiaty", flashNumber: "" },
  { name: "Mahmoud Mohamed Saad Mohamed", flashNumber: "" },
  { name: "Mahmoud Mohamed Nagep Mahmoud", flashNumber: "" },
  { name: "Robert Gerges Shokry Attia", flashNumber: "" },
  { name: "Muhand Hesham Salama Mohamed", flashNumber: "" },
  { name: "ِAkram Ayman Mohamed Eltanany", flashNumber: "" },
  { name: "Ali Abdelwahed Hasan Eid", flashNumber: "" },
  { name: "kareem mohamed badr eldin elwan", flashNumber: "" },
  { name: "MOHAMED IBRAHIM MOHAMED", flashNumber: "" },
  { name: "Abdelmalek Mansour Mohammed Gad", flashNumber: "" },
  { name: "Yousef Hisham Abd Alghany Mahdy", flashNumber: "" },
  { name: "Youssef shaaban abdelzaher ahmed", flashNumber: "" },
  { name: "Abd El Rahman Hesham Mohamed Mahrous", flashNumber: "" },
  { name: "Mahmoud Mohamed Gaber Mohamed", flashNumber: "" }
            ]
        };

        // App State
        const state = {
            currentUser: null,
            currentTask: null,
            isAdmin: false,
            users: [],
            submissions: [],
            currentAnswers: {},
            accuracyData: {} // لتخزين بيانات Accuracy من Google Sheets
        };

        // Admin credentials
        const ADMIN_CREDENTIALS = {
            username: "admin",
            password: "admin123"
        };

        // DOM Elements
        const loginPanel = document.getElementById('login-panel');
        const taskPanel = document.getElementById('task-panel');
        const classificationPanel = document.getElementById('classification-panel');
        const submissionsPanel = document.getElementById('submissions-panel');
        const adminPanel = document.getElementById('admin-panel');
        const usersList = document.getElementById('users-list');
        const adminSubmissionsList = document.getElementById('admin-submissions-list');
        const userSubmissionsView = document.getElementById('user-submissions-view');
        const selectedUserInfo = document.getElementById('selected-user-info');
        const submissionsList = document.getElementById('submissions-list');
        const usernameInput = document.getElementById('username');
        const flashValue = document.getElementById('flash-number').value.trim() || 'Not provided';
        const adminUsernameInput = document.getElementById('admin-username');
        const adminPasswordInput = document.getElementById('admin-password');
        const taskIdInput = document.getElementById('task-id');
        const currentUserDisplay = document.getElementById('current-user');
        const currentTaskDisplay = document.getElementById('current-task');
        const submitBtn = document.getElementById('submit-btn');
        const userDropdown = document.getElementById('user-dropdown');

       // Initialize shift buttons
document.addEventListener('DOMContentLoaded', () => {
  const userDropdown = document.getElementById('user-dropdown');
  const manualContainer = document.getElementById('manual-name-container');
  const manualInput = document.getElementById('manual-name');

  function ensureManualOption() {
    // Add only if missing
    if (![...userDropdown.options].some(o => o.value === '__manual__')) {
      const manualOption = document.createElement('option');
      manualOption.value = '__manual__';
      manualOption.textContent = 'Other (Enter Manually)';
      userDropdown.appendChild(manualOption);
    }
  }

  function populateUsersForShift(selectedShift) {
    userDropdown.disabled = false;
    userDropdown.innerHTML = '<option value="">Select your name</option>';

    // Guard against undefined data
    const list = (window.usersByShift && window.usersByShift[selectedShift]) || [];
    list.forEach(u => {
      const opt = document.createElement('option');
      opt.value = u.name;
      opt.textContent = u.name;
      userDropdown.appendChild(opt);
    });

    // Always append the manual option
    ensureManualOption();

    // Reset manual input UI every time shift changes
    manualContainer.style.display = 'none';
    manualInput.value = '';
  }

  // Shift buttons
  document.querySelectorAll('.shift-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      const selectedShift = btn.dataset.shift;

      // Don’t let init errors block dropdown population
      try { initializeFirebaseForShift(selectedShift); } catch (e) {
        console.warn('initializeFirebaseForShift error:', e);
      }

      populateUsersForShift(selectedShift);

      // If some other code repopulates later, re-ensure the manual option
      setTimeout(ensureManualOption, 0);
    });
  });

  // Toggle manual input
  userDropdown.addEventListener('change', () => {
    manualContainer.style.display = (userDropdown.value === '__manual__') ? 'block' : 'none';
  });
});



       

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Firebase with Overnight shift by default
            initializeFirebaseForShift('Overnight');
            
            // Check authentication state
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    if (user.uid === "admin") {
                        state.isAdmin = true;
                        showAdminPanel();
                    } else {
                        // Load user data from Firestore
                        db.collection("users").doc(user.uid).get().then(doc => {
                            if (doc.exists) {
                                state.currentUser = doc.data();
                                showTaskPanel();
                            }
                        });
                    }
                } else {
                    // No user is signed in
            showLoginPanel();
                }
            });

            // Load initial data
            loadUsers();
            loadSubmissions();
            loadAccuracyData(); // تحميل بيانات Accuracy من Google Sheets
            startAccuracyUpdateInterval(); // بدء التحديث التلقائي

            // Event listeners
            document.getElementById('login-btn').addEventListener('click', handleLogin);
            document.getElementById('admin-login-btn').addEventListener('click', handleAdminLogin);
            document.getElementById('start-task-btn').addEventListener('click', startTask);
            document.getElementById('submit-btn').addEventListener('click', submitClassification);
            document.getElementById('new-task-btn').addEventListener('click', startNewTask);
            document.getElementById('logout-btn').addEventListener('click', logout);
            document.getElementById('user-logout-btn').addEventListener('click', logout);
            document.getElementById('admin-logout-btn').addEventListener('click', logout);
            document.getElementById('cancel-task-btn').addEventListener('click', cancelTask);
            document.getElementById('back-to-users-btn').addEventListener('click', () => {
                userSubmissionsView.classList.add('hidden');
            });
            document.getElementById('back-to-submissions-btn').addEventListener('click', function() {
                document.getElementById('submission-details-view').classList.add('hidden');
                document.getElementById('admin-submissions-list').classList.remove('hidden');
            });

            // Shift selection buttons
            document.querySelectorAll('.shift-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    userDropdown.disabled = false;
                    const shift = this.dataset.shift;
                    userDropdown.innerHTML = '<option value="">Select your name</option>';
                    
                    usersByShift[shift].forEach(user => {
                        const option = document.createElement('option');
                        option.value = user.name;
                        option.textContent = user.name;
                        userDropdown.appendChild(option);
                    });
                });
            });

            // Filter event listeners
            document.getElementById('apply-filters').addEventListener('click', applyFilters);
            document.getElementById('reset-filters').addEventListener('click', function() {
                document.getElementById('shift-filter').value = 'all';
                document.getElementById('date-filter').value = '';
                applyFilters();
            });
        });

        // Firebase Functions
        async function loadUsers() {
            try {
                const snapshot = await db.collection("users").get();
                state.users = snapshot.docs.map(doc => doc.data());
            } catch (error) {
                console.error("Error loading users:", error);
                alert("Error loading users. Please try again.");
            }
        }

        async function loadSubmissions() {
            try {
                // تحميل التسليمات من Firestore
                const snapshot = await db.collection("submissions").get();
                state.submissions = snapshot.docs.map(doc => {
                    const data = doc.data();
                    return {
                        id: doc.id,
                        ...data,
                        date: data.date.toDate(), // تحويل طابع الوقت من Firestore إلى كائن Date
                        // إضافة معلومات التاريخ المنسقة للفلترة
                        dateString: data.date.toDate().toLocaleDateString('en-US'),
                        dateFormatted: formatDate(data.date.toDate())
                    };
                });
                console.log(`Loaded ${state.submissions.length} submissions`);
            } catch (error) {
                console.error("Error loading submissions:", error);
              
            }
        }
        
        // دالة مساعدة لتنسيق التاريخ بتنسيق "YYYY-MM-DD"
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // دالة مساعدة للتحقق مما إذا كان التاريخ هو اليوم
        function isToday(date) {
            const today = new Date();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }



        // Initialize Google Sheets API (simplified)
        async function initGoogleSheetsAPI() {
            try {
                console.log('Initializing Google API client...');
                
                // Initialize the Google API client with minimal configuration
                await gapi.client.init({
                    apiKey: 'AIzaSyBVoVWGNGqHXUkDuK9oUPuX_QZZtDgpVoE',
                    clientId: '1094461669104-4q2h3b3h84nscv7viv0obpm7jr9edin1.apps.googleusercontent.com',
                    discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
                    scope: 'https://www.googleapis.com/auth/spreadsheets.readonly'
                });
                
                console.log('Google client initialized successfully');

                // Add a small delay to ensure initialization is complete
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Load the sheets API if not already loaded
                if (!gapi.client.sheets) {
                    console.log('Loading sheets API...');
                    await gapi.client.load('sheets', 'v4');
                    console.log('Sheets API loaded successfully');
                } else {
                    console.log('Sheets API already loaded');
                }
                
                // Add another small delay before loading data
                await new Promise(resolve => setTimeout(resolve, 1000));
                console.log('Google Sheets API initialization complete');
                return true;
            } catch (error) {
                console.error('Error initializing Google Sheets API:', error);
                if (error.result && error.result.error) {
                    console.error('API Error details:', error.result.error);
                }
                return false;
            }
        }

        // Load gapi on page load
        window.addEventListener('load', function() {
            const script = document.createElement('script');
            script.src = 'https://apis.google.com/js/api.js';
            script.onload = function() {
                console.log('Google API client loaded');
                initGoogleSheetsAPI();
            };
            script.onerror = function() {
                console.error('Failed to load Google API client');
            };
            document.body.appendChild(script);
        });

        // Load model answers and metrics from Google Sheet
        async function loadAccuracyData() {
            try {
                console.log('Starting to load accuracy data...');
                
                // Make sure the client is initialized and signed in
                if (!gapi.client?.sheets) {
                    console.log('Google Sheets API not initialized, initializing now...');
                    try {
                        await gapi.client.load('sheets', 'v4');
                        console.log('Google Sheets API initialized successfully');
                    } catch (initError) {
                        console.error('Failed to initialize Google Sheets API:', initError);
                        return;
                    }
                }

                const SPREADSHEET_ID = '10LZ2HxQ7V1O4sG6-78kDf6CgUKcB36MMtAAHHt2otOw';
                const RANGE = 'Sheet1!A:F'; // Include columns for GULP Link, TP, FP, FN, TN

                console.log('Fetching data from sheet:', SPREADSHEET_ID);
                let response;
                try {
                    response = await gapi.client.sheets.spreadsheets.values.get({
                        spreadsheetId: SPREADSHEET_ID,
                        range: RANGE,
                        valueRenderOption: 'UNFORMATTED_VALUE'
                    });
                    console.log('Successfully fetched data from sheet');
                } catch (fetchError) {
                    console.error('Failed to fetch data from sheet:', fetchError);
                    if (fetchError.status === 401) {
                        console.log('Authentication error detected, attempting to reinitialize...');
                        await initGoogleSheetsAPI();
                        return;
                    }
                    return;
                }

                const rows = response.result.values;
                if (!rows || rows.length === 0) {
                    console.error('No data found in sheet');
                    return;
                }

                console.log(`Found ${rows.length} rows in sheet`);
                state.accuracyData = {};
                let processedCount = 0;
                let errorCount = 0;
                
                // Skip header row
                for (let i = 1; i < rows.length; i++) {
                    const row = rows[i];
                    if (!row || row.length < 5) {
                        console.log(`Skipping incomplete row ${i}: insufficient columns`);
                        continue;
                    }

                    const [gulpLink, tp, fp, fn, tn] = row;
                    if (!gulpLink) {
                        console.log(`Skipping row ${i}: missing GULP link`);
                        continue;
                    }

                    try {
                        // Convert metrics to numbers and handle invalid values
                        const metrics = {
                            tp: Number(tp),
                            fp: Number(fp),
                            fn: Number(fn),
                            tn: Number(tn)
                        };

                        // Log raw values for debugging
                        console.log(`Row ${i} raw values:`, {
                            gulpLink,
                            metrics,
                            rawTP: tp,
                            rawFP: fp,
                            rawFN: fn,
                            rawTN: tn
                        });
                        
                        // Calculate accuracy
                        const accuracy = calculateAccuracy(metrics);
                        state.accuracyData[gulpLink] = accuracy + '%';
                        console.log(`Successfully processed ${gulpLink}: ${accuracy}%`);
                        processedCount++;
                    } catch (err) {
                        console.error(`Error processing row ${i}:`, err);
                        errorCount++;
                    }
                }

                console.log(`Accuracy data loading complete:\n` +
                           `- Total rows processed: ${rows.length - 1}\n` +
                           `- Successfully processed: ${processedCount}\n` +
                           `- Errors encountered: ${errorCount}`);
                           
                // Update UI if needed
                if (typeof updateSubmissionsList === 'function') {
                    updateSubmissionsList();
                }
            } catch (error) {
                console.error('Fatal error in loadAccuracyData:', error);
            }
        }

        

        // Get accuracy for a specific task
        function getAccuracyForTask(taskId) {
            if (!taskId || taskId.trim() === '') {
                return 'N/A';
            }

            return state.accuracyData[taskId] || 'N/A';
        }

        // Update accuracy data every 5 minutes
        function startAccuracyUpdateInterval() {
            // Load initial data
            loadAccuracyData();

            // Update every 5 minutes
            setInterval(() => {
                loadAccuracyData();
                // Update existing submissions
                if (state.submissions.length > 0) {
                    state.submissions.forEach(sub => {
                        sub.accuracy = getAccuracyForTask(sub.taskId);
                    });
                }
            }, 5 * 60 * 1000);
        }

        // Initialize Google Sheets API when the page loads
        gapi.load('client', initGoogleSheetsAPI);

        async function saveUser(user) {
            try {
                // Create a simplified ID from the user's name
                const userId = user.name.replace(/\s+/g, '_').toLowerCase();
                await db.collection("users").doc(userId).set({
                    ...user,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                return userId;
            } catch (error) {
                console.error("Error saving user:", error);
                throw error;
            }
        }

        async function saveSubmission(submission) {
            try {
                const flashInput = document.getElementById('flash-number');
const flashNumber = flashInput ? flashInput.value.trim() : '';

submission.user.flashNumber = flashNumber;

const docRef = await db.collection("submissions").add({
  ...submission,
  user: {
    name: submission.user.name,
    shift: submission.user.shift,
    flashNumber: submission.user.flashNumber // ✅ هياخد القيمة اللي أدخلها المستخدم
  },
  date: firebase.firestore.FieldValue.serverTimestamp(),
  classification: submission.classification,
  answers: submission.answers,
  taskId: submission.taskId
});

                return docRef.id;
            } catch (error) {
                console.error("Error saving submission:", error);
                throw error;
            }
        }

        // App Functions
       async function handleLogin(e) {
    e.preventDefault();

    const selectedShift = document.querySelector('.shift-btn.active')?.dataset.shift;
    const selectedName = document.getElementById('user-dropdown').value;
    const manualName = document.getElementById('manual-name').value.trim();
    const flashNumber = document.getElementById('flash-number').value.trim();

    // Use manual name if "Other" was chosen
    const finalName = selectedName === "__manual__" ? manualName : selectedName;

    // Check for shift & name
    if (!selectedShift || !finalName) {
        alert('Please select your shift and name');
        return;
    }

    // ✅ Check for yubikey (flash number)
    if (!flashNumber) {
        alert('Please enter your Yubikey number');
        return;
    }

    // ---- If everything is OK, continue login ----
    console.log("Logging in with:", {
        shift: selectedShift,
        name: finalName,
        yubikey: flashNumber
    });

    
    // Find or create user
    let user = state.users.find(u => u.name === finalName && u.shift === selectedShift);
    if (!user) {
        user = { 
            id: Date.now().toString(),
            name: finalName, 
            flashNumber,
            shift: selectedShift,
            username: finalName.replace(/\s+/g, '_').toLowerCase()
        };
        try {
            const userRef = window.db.collection('users').doc(user.id);
            await userRef.set({
                ...user,
                createdAt: window.firebase.firestore.FieldValue.serverTimestamp()
            });
            state.users.push(user);
        } catch (error) {
            console.error("Error creating user:", error);
            alert("Error creating user account. Please try again.");
            return;
        }
    }


            
            // Set user in state
            state.currentUser = user;
            showTaskPanel();
        }

        async function handleAdminLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }
            
            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                state.isAdmin = true;
                showAdminPanel();
            } else {
                alert('Invalid admin credentials');
            }
        }

        function showTaskPanel() {
            hideAllPanels();
            taskPanel.style.display = 'block';
            flashNumberInput.value = '';
        }

        function showAdminPanel() {
            hideAllPanels();
            adminPanel.style.display = 'block';
            adminUsernameInput.value = '';
            adminPasswordInput.value = '';
            applyFilters();
        }

        function applyFilters() {
            const shiftFilter = document.getElementById('shift-filter').value;
            const dateFilter = document.getElementById('date-filter').value;
            
            let filteredUsers = [...state.users];
            
            if (shiftFilter !== 'all') {
                filteredUsers = filteredUsers.filter(user => user.shift === shiftFilter);
            }
            
            renderFilteredUsersList(filteredUsers);
        }
        
        function renderFilteredUsersList(users) {
            usersList.innerHTML = '<table><tr><th>Username</th><th>Name</th><th>Shift</th><th>Submissions</th><th>Actions</th></tr>';
            
            users.forEach(user => {
                let userSubmissions = state.submissions.filter(s => s.user.name === user.name);
                
                const dateFilter = document.getElementById('date-filter').value;
                if (dateFilter) {
                    const filterDate = new Date(dateFilter);
                    userSubmissions = userSubmissions.filter(sub => {
                        const subDate = new Date(sub.date);
                        return subDate.toDateString() === filterDate.toDateString();
                    });
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.username || ''}</td>
                    <td>${user.name}</td>
                    <td>${user.shift}</td>
                    <td>${userSubmissions.length}</td>
                    <td><button onclick="viewUserSubmissions('${user.name}', '${dateFilter || ''}')">View Submissions</button></td>

                `;
                usersList.querySelector('table').appendChild(row);
            });
            
            usersList.innerHTML += '</table>';
        }

       function viewUserSubmissions(username, dateFilter = '') {
    const user = state.users.find(u => u.name === username);
    let userSubmissions = state.submissions.filter(s => s.user.name === username);

    if (dateFilter) {
        const filterDate = new Date(dateFilter);
        userSubmissions = userSubmissions.filter(sub => {
            const subDate = new Date(sub.date);
            return subDate.toDateString() === filterDate.toDateString();
        });
    }

    // Optional: Sort by date
    userSubmissions.sort((a, b) => new Date(a.date) - new Date(b.date));

    selectedUserInfo.innerHTML = `
        <h4>User: ${user.name}</h4>
        <p>Shift: ${user.shift}</p>
        <p>Yubikey Number: ${user.flashNumber || 'Not provided'}</p>
        <p>Total Submissions: ${userSubmissions.length}</p>
    `;

    adminSubmissionsList.innerHTML = '';

    if (userSubmissions.length === 0) {
        adminSubmissionsList.innerHTML = `<p>No submissions found for this date.</p>`;
    } else {
        userSubmissions.forEach(sub => {
            const subElement = document.createElement('div');
            subElement.className = 'submission';
            subElement.innerHTML = `
                <p><strong>GULP Link:</strong> ${sub.taskId}</p>
                <p><strong>Date:</strong> ${new Date(sub.date).toLocaleString()}</p>
                <p><strong>Classification:</strong> ${sub.classification}</p>
                <p><strong>Accuracy:</strong> <span class="accuracy-score">${sub.accuracy || getAccuracyForTask(sub.taskId)}</span></p>
                <button onclick="viewSubmissionDetails('${sub.id}')">View Details</button>
                <button onclick="downloadSubmission('${sub.id}')">Download</button>
            `;
            adminSubmissionsList.appendChild(subElement);
        });
    }

    userSubmissionsView.classList.remove('hidden');
    document.getElementById('submission-details-view').classList.add('hidden');
}


        // دالة لحساب متوسط Accuracy للمستخدم
        function calculateAverageAccuracy(submissions) {
            if (submissions.length === 0) return 'N/A';
            
            const accuracies = submissions.map(sub => {
                const accuracy = getAccuracyForTask(sub.taskId);
                return accuracy === 'N/A' ? 0 : parseInt(accuracy.replace('%', ''));
            }).filter(acc => acc > 0);
            
            if (accuracies.length === 0) return 'N/A';
            
            const average = accuracies.reduce((sum, acc) => sum + acc, 0) / accuracies.length;
            return Math.round(average) + '%';
        }

        function viewSubmissionDetails(submissionId) {
            const submission = state.submissions.find(sub => sub.id === submissionId);
            if (!submission) return;
            
            document.getElementById('admin-submissions-list').classList.add('hidden');
            document.getElementById('submission-details-view').classList.remove('hidden');
            
            const detailsContainer = document.getElementById('submission-full-details');
            detailsContainer.innerHTML = '';
            
            const classificationReconstruction = document.createElement('div');
            classificationReconstruction.className = 'classification-reconstruction';
            
            const header = document.createElement('div');
            header.innerHTML = `
                <h4>Submission Details - GULP Link: ${submission.taskId}</h4>
                <p><strong>User:</strong> ${submission.user.name} (${submission.user.shift})</p>
                <p><strong>Date:</strong> ${submission.date.toLocaleString()}</p>
                <p><strong>Final Classification:</strong> ${submission.classification}</p>
                <p><strong>Accuracy:</strong> <span class="accuracy-score">${submission.accuracy || getAccuracyForTask(submission.taskId)}</span></p>
                <hr>
            `;
            classificationReconstruction.appendChild(header);
            
            const answersList = document.createElement('div');
            answersList.className = 'submission-answers';
            
            for (const [question, answer] of Object.entries(submission.answers)) {
                const answerItem = document.createElement('div');
                answerItem.className = 'answer-item';
                answerItem.innerHTML = `
                    <div class="answer-question">${question}</div>
                    <div class="answer-value">${answer}</div>
                `;
                answersList.appendChild(answerItem);
            }
            
            classificationReconstruction.appendChild(answersList);
            detailsContainer.appendChild(classificationReconstruction);
        }

        function startTask(e) {
            e.preventDefault();
            
            const taskId = taskIdInput.value.trim();

            if (!taskId) {
                alert('Please enter a task ID');
                    return;
                }
            state.currentTask = taskId;
            showClassificationPanel();
        }

        function showClassificationPanel() {
    hideAllPanels();
    classificationPanel.style.display = 'block';

    const flashValue = document.getElementById('flash-number').value.trim() || 'Not provided';
    currentUserDisplay.textContent = `User: ${state.currentUser.name} (${state.currentUser.shift}) - Flash: ${flashValue}`;

    currentTaskDisplay.textContent = `GULP Link: ${state.currentTask}`;
    submitBtn.style.display = 'block';

    document.getElementById('tree-container').innerHTML = '';
    new DecisionTreeNavigator(decisionTree);
}


        function collectAnswers() {
            state.currentAnswers = {};
            let isValid = true;
            
            document.querySelectorAll('.error-message').forEach(el => el.remove());
            
            const radioGroups = {};
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                const questionId = radio.name;
                radioGroups[questionId] = radioGroups[questionId] || [];
                radioGroups[questionId].push(radio);
            });
            
            for (const [questionId, radios] of Object.entries(radioGroups)) {
                const checkedRadio = radios.find(r => r.checked);
                const questionText = document.querySelector(`.question[data-id="${questionId}"]`)?.textContent || questionId;
                
                if (!checkedRadio) {
                    const questionElement = document.querySelector(`.question[data-id="${questionId}"]`);
                    if (questionElement) {
                        const errorElement = document.createElement('div');
                        errorElement.className = 'error-message';
                        errorElement.textContent = 'Please select an option for this question';
                        questionElement.parentNode.insertBefore(errorElement, questionElement.nextSibling);
                    }
                    isValid = false;
                } else {
                    const optionId = checkedRadio.parentElement.textContent.trim();
                    state.currentAnswers[questionText] = optionId;
                }
            }
            
            // معالجة الأسئلة من نوع boolean (checkboxes)
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                const questionText = checkbox.parentElement.textContent.trim();
                if (checkbox.checked) {
                    state.currentAnswers[questionText] = 'Yes';
                }
            });
            
            document.querySelectorAll('.text-input').forEach(input => {
                const questionId = input.id || input.parentElement.querySelector('.question')?.textContent.trim();
                if (input.value.trim()) {
                    state.currentAnswers[questionId] = input.value.trim();
                }
            });
            
            return isValid;
        }

        async function submitClassification(e) {
            e.preventDefault();

            const submitButton = e.target; // Define earlier to use in case of early return
            const originalText = submitButton.textContent;
            
            if (!collectAnswers()) {
                alert('Please complete all required questions before submitting');
                return;
            }

            if (!db || !currentShift) {
                alert("Firebase is not properly initialized for the current shift. Please select your shift again and wait for confirmation.");
                console.error("SubmitClassification: Firebase not ready. Current DB state:", db, "Current shift:", currentShift);
                // No need to disable/re-enable button here as it's not yet disabled for submission
                return;
            }

            submitButton.disabled = true;
            submitButton.innerHTML = `Submitting <span class="loading"></span>`;

            try {
                const submission = {
                    user: state.currentUser,
                    taskId: state.currentTask,
                    date: new Date(), // This will be client's date, Firestore serverTimestamp is better for consistency
                    answers: state.currentAnswers,
                    classification: getFinalClassification()
                };

                const submissionId = await saveSubmission(submission);
                submission.id = submissionId;
                submission.accuracy = getAccuracyForTask(state.currentTask); // إضافة Accuracy
                state.submissions.push(submission);

                // تحديث البيانات في الوقت الفعلي
                if (!state.accuracyData[state.currentTask]) {
                    state.accuracyData[state.currentTask] = submission.accuracy;
                }

                // Show custom popup with cat GIF based on accuracy
                const accuracy = getAccuracyForTask(state.currentTask);
                const popupContent = document.createElement('div');
                popupContent.className = 'quality-popup';
                
                // Select GIF based on accuracy
                let catGifUrl = '';
                if (accuracy >= 80) {
                    catGifUrl = 'https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExbTI1NnI4Z2g5Y25uaWt5MGoweDE2emluZWZvaW8yazlvOTZnNjBicCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/BzyTuYCmvSORqs1ABM/giphy.gif'; // Happy cat
                } else if (accuracy >= 50) {
                    catGifUrl = 'https://media.giphy.com/media/13HXKG2HGN8aPK/giphy.gif'; // Cat driving
                } else {
                    catGifUrl = 'https://i.giphy.com/H4DjXQXamtTiIuCcRU.webp'; // Sad/angry cat
                }
                
                popupContent.innerHTML = `
                    <div class="popup-content">
                        <img src="${catGifUrl}" alt="Cat reaction" class="cat-gif">
                        <h3>Submission Successful! 🎉</h3>
                        <p><strong>Task ID:</strong> ${state.currentTask}</p>
                        <button id="responder-dashboard-btn" onclick="window.open('https://script.google.com/macros/s/AKfycbwV5TFYA7TYy3FdESpmUO8BElxesOPnbB4Z-9rr7BbbBPMWo8A8k0F90cYGB5fKJNKOKQ/exec', '_blank')">Responder Dashboard</button>
                        <button onclick="this.parentElement.parentElement.remove()" class="close-popup">Close</button>
                    </div>
                `;
                
                document.body.appendChild(popupContent);
                
                showSubmissionsPanel();
            } catch (error) {
                console.error("Error submitting classification:", error);
                alert("Error submitting classification. Please try again.");
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            }
        }

   


       let currentSubmissionPage = 1;
const submissionsPerPage = 5;
let filteredSubmissions = [];

async function showSubmissionsPanel() {
    hideAllPanels();
    submissionsPanel.style.display = 'block';

    // تحميل التسليمات
    await loadSubmissions();

    // فلتر التاريخ إذا مش موجود
    if (!document.getElementById('date-filter-container')) {
        const filterContainer = document.createElement('div');
        filterContainer.id = 'date-filter-container';
        filterContainer.className = 'date-filter-container';
        filterContainer.innerHTML = `
            <div class="form-group">
                <label for="date-filter">Filter by date:</label>
                <select id="date-filter" class="date-filter">
                    <option value="today" selected>Today only</option>
                    <option value="all">All dates</option>
                    <option value="custom">Select date...</option>
                </select>
                <input type="date" id="custom-date" class="custom-date" style="display: none;">
                <button id="responder-dashboard-btn" onclick="window.open('https://script.google.com/macros/s/AKfycbwV5TFYA7TYy3FdESpmUO8BElxesOPnbB4Z-9rr7BbbBPMWo8A8k0F90cYGB5fKJNKOKQ/exec', '_blank')">Responder Dashboard</button>
            </div>
        `;

        submissionsPanel.insertBefore(filterContainer, submissionsList);

        const dateFilter = document.getElementById('date-filter');
        const customDate = document.getElementById('custom-date');

        dateFilter.addEventListener('change', function () {
            if (this.value === 'custom') {
                customDate.style.display = 'inline-block';
                const today = new Date();
                customDate.value = formatDate(today);
            } else {
                customDate.style.display = 'none';
            }
            filterSubmissions();
        });

        customDate.addEventListener('change', filterSubmissions);
    }

    filterSubmissions();
}

function filterSubmissions() {
    const dateFilter = document.getElementById('date-filter');
    const customDate = document.getElementById('custom-date');
    const filterValue = dateFilter.value;

    submissionsList.innerHTML = '';

    let userSubmissions = state.submissions.filter(sub => sub.user.name === state.currentUser.name);

    if (filterValue === 'today') {
        userSubmissions = userSubmissions.filter(sub => isToday(sub.date));
    } else if (filterValue === 'custom' && customDate.value) {
        const selectedDate = customDate.value;
        userSubmissions = userSubmissions.filter(sub => sub.dateFormatted === selectedDate);
    }

    userSubmissions.sort((a, b) => b.date - a.date);
    filteredSubmissions = userSubmissions;
    currentSubmissionPage = 1;

    renderSubmissionPage();
}

function renderSubmissionPage() {
    submissionsList.innerHTML = '';

    if (filteredSubmissions.length === 0) {
        submissionsList.innerHTML = '<p>No submissions found for the selected date.</p>';
        removePaginationControls();
        return;
    }

    // ✅ حساب عدد الصفحات الكلي
    const totalPages = Math.ceil(filteredSubmissions.length / submissionsPerPage);

    // ✅ التأكد من أن الصفحة الحالية ضمن النطاق
    if (currentSubmissionPage > totalPages) currentSubmissionPage = totalPages || 1;

    // ✅ حساب الفهرسة لبدء ونهاية الصفحة
    const start = (currentSubmissionPage - 1) * submissionsPerPage;
    const pageItems = filteredSubmissions.slice(start, start + submissionsPerPage);

    // ✅ عرض عناصر الصفحة
    pageItems.forEach(sub => {
        const subElement = document.createElement('div');
        subElement.className = 'submission';
        subElement.innerHTML = `
            <p><strong>GULP Link:</strong> ${sub.taskId}</p>
            <p><strong>Date:</strong> ${sub.date.toLocaleString()}</p>
            <p><strong>Classification:</strong> ${sub.classification}</p>
            <p><strong>Accuracy:</strong> <span class="accuracy-score">${sub.accuracy || getAccuracyForTask(sub.taskId)}</span></p>
            <button onclick="viewSubmissionDetails('${sub.id}')">View Details</button>
            <button onclick="downloadSubmission('${sub.id}')">Download</button>
        `;
        submissionsList.appendChild(subElement);
    });

    // ✅ عرض أزرار الصفحة
    renderPaginationControls(totalPages);
}


function renderPaginationControls() {
    removePaginationControls();

    const totalPages = Math.ceil(filteredSubmissions.length / submissionsPerPage);
    if (totalPages <= 1) return;

    const pagination = document.createElement("div");
    pagination.id = "pagination-controls";
    pagination.className = "pagination-controls";
    pagination.innerHTML = `
        <button onclick="prevSubmissionPage()" ${currentSubmissionPage === 1 ? 'disabled' : ''}>Previous</button>
        <span>Page ${currentSubmissionPage} of ${totalPages}</span>
        <button onclick="nextSubmissionPage()" ${currentSubmissionPage === totalPages ? 'disabled' : ''}>Next</button>
    `;

submissionsPanel.insertBefore(pagination, document.getElementById("new-task-btn"));
}

function removePaginationControls() {
    const existing = document.getElementById("pagination-controls");
    if (existing) existing.remove();
}

function nextSubmissionPage() {
    const totalPages = Math.ceil(filteredSubmissions.length / submissionsPerPage);
    if (currentSubmissionPage < totalPages) {
        currentSubmissionPage++;
        renderSubmissionPage();
    }
}

function prevSubmissionPage() {
    if (currentSubmissionPage > 1) {
        currentSubmissionPage--;
        renderSubmissionPage();
    }
}

        function startNewTask() {
            showTaskPanel();
            taskIdInput.value = '';
            state.currentTask = null;
        }

        function cancelTask() {
            if (confirm('Are you sure you want to cancel this task? All progress will be lost.')) {
                showTaskPanel();
                taskIdInput.value = state.currentTask;
                state.currentTask = null;
            }

        }

        function logout() {
            state.currentUser = null;
            state.isAdmin = false;
            state.currentTask = null;
            showLoginPanel();
        }

        function showLoginPanel() {
            hideAllPanels();
            loginPanel.style.display = 'block';
            document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
            userDropdown.innerHTML = '<option value="">Please select shift first</option>';
            userDropdown.disabled = true;
            flashNumberInput.value = '';
        }

        function hideAllPanels() {
            loginPanel.style.display = 'none';
            taskPanel.style.display = 'none';
            classificationPanel.style.display = 'none';
            submissionsPanel.style.display = 'none';
            adminPanel.style.display = 'none';
            userSubmissionsView.classList.add('hidden');
            document.getElementById('submission-details-view').classList.add('hidden');
        }

        // Global functions
        window.downloadSubmission = function(submissionId) {
            const submission = state.submissions.find(sub => sub.id === submissionId);
            if (!submission) return;

            // Convert date to string for JSON
            const submissionForExport = {
                ...submission,
                date: submission.date.toISOString()
            };

            const dataStr = JSON.stringify(submissionForExport, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `AV_Classification_${submission.taskId}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        };

        window.viewUserSubmissions = viewUserSubmissions;
        window.viewSubmissionDetails = viewSubmissionDetails;

 class DecisionTreeNavigator {
        constructor(treeData) {
            this.treeData = treeData;
            this.container = document.getElementById('tree-container');
            this.container.innerHTML = '';
            this.renderTree(this.treeData.childNodes, this.container);
        }
        renderTree(nodes, parentElement) {
            nodes.forEach(node => {
                const nodeElement = document.createElement('div');
                nodeElement.className = 'node';
                // Render question
                const questionElement = document.createElement('div');
                questionElement.className = 'question';
                questionElement.textContent = node.displayName;
                questionElement.setAttribute('data-id', node.id);
                nodeElement.appendChild(questionElement);
                // Render options if choice node or branch node with choices
                if (node.nodeType === 'choice' || (node.nodeType === 'branch' && node.childNodes.some(child => child.nodeType !== 'boolean'))) {
    const optionsElement = document.createElement('div');
    optionsElement.className = 'options';

    node.childNodes.forEach((child, index) => {
        const optionId = `${node.id}_${index}`;

        const label = document.createElement('label');
        label.className = 'option';
        label.setAttribute('for', optionId); // optional but good

        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = node.id;
        radio.id = optionId;

        radio.addEventListener('change', () => {
            this.handleSelection(label, child);
        });

        label.appendChild(radio);
        label.appendChild(document.createTextNode(' ' + child.displayName));
        optionsElement.appendChild(label);
    });

    nodeElement.appendChild(optionsElement);
}
                // Render branch node with boolean children directly
                else if (node.nodeType === 'branch' && node.childNodes.every(child => child.nodeType === 'boolean')) {
                    const booleanGroupElement = document.createElement('div');
                    booleanGroupElement.className = 'boolean-group';
                    
                    node.childNodes.forEach(child => {
                        const checkboxElement = document.createElement('label');
                        checkboxElement.className = 'boolean-option';
                        checkboxElement.htmlFor = child.id;
                        checkboxElement.style.display = 'flex';
                        checkboxElement.style.alignItems = 'center';
                        checkboxElement.style.padding = '12px 16px';
                        checkboxElement.style.borderRadius = '6px';
                        checkboxElement.style.cursor = 'pointer';
                        checkboxElement.style.transition = 'all 0.2s';
                        
                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.id = child.id;
                        checkbox.name = child.id;
                        checkbox.style.marginRight = '12px';
                        checkbox.style.cursor = 'pointer';
                        
                        const label = document.createElement('span');
                        label.textContent = child.displayName;
                        label.style.flex = '1';
                        
                        // Handle click on the entire checkbox element
                        checkboxElement.addEventListener('change', () => {
                            this.handleBooleanSelection(checkbox, child);
                        });
                        
                        checkboxElement.appendChild(checkbox);
                        checkboxElement.appendChild(label);
                        booleanGroupElement.appendChild(checkboxElement);
                    });
                    
                    nodeElement.appendChild(booleanGroupElement);
                }

                // Render boolean node as checkbox
                else if (node.nodeType === 'boolean') {
                    const checkboxElement = document.createElement('div');
                    checkboxElement.className = 'boolean-option';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = node.id;
                    checkbox.name = node.id;
                    checkbox.addEventListener('change', () => {
                        this.handleBooleanSelection(checkbox, node);
                    });
                    
                    const label = document.createElement('label');
                    label.setAttribute('for', node.id);
                    label.textContent = node.displayName;
                    label.style.cursor = 'pointer';
                    label.style.flex = '1';
                    
                    // Make the entire element clickable
                    checkboxElement.addEventListener('click', (e) => {
                        // Don't trigger if clicking directly on the checkbox
                        if (e.target !== checkbox) {
                            checkbox.checked = !checkbox.checked;
                            this.handleBooleanSelection(checkbox, node);
                        }
                    });
                    
                    checkboxElement.appendChild(checkbox);
                    checkboxElement.appendChild(label);
                    nodeElement.appendChild(checkboxElement);
                }
                // Render free text input
                else if (node.nodeType === 'freeText') {
                    const inputElement = document.createElement('textarea');
                    inputElement.className = 'text-input';
                    inputElement.id = node.id;
                    inputElement.placeholder = node.displayName;
                    nodeElement.appendChild(inputElement);
                }
                parentElement.appendChild(nodeElement);
            });
        }
        handleSelection(optionElement, selectedNode) {
            // إزالة أي اختيار سابق
            document.querySelectorAll('.selected').forEach(el => {
                el.classList.remove('selected');
            });
            optionElement.classList.add('selected');
            // حذف أي أسئلة فرعية قديمة
            const existingChildNodes = optionElement.parentElement.querySelectorAll('.child-node');
            existingChildNodes.forEach(node => node.remove());
            // إذا الإجابة Branch ارسم الأسئلة الفرعية
            if (selectedNode.nodeType === 'branch' && selectedNode.childNodes.length > 0) {
                const childContainer = document.createElement('div');
                childContainer.className = 'child-node';
                this.renderTree(selectedNode.childNodes, childContainer);
                optionElement.parentElement.appendChild(childContainer);
            }
            
        }

        handleBooleanSelection(checkbox, node) {
            // Handle boolean selection with enhanced visual feedback
            if (checkbox.checked) {
                checkbox.parentElement.classList.add('selected');
                checkbox.parentElement.style.backgroundColor = ' var(--container-bg)';
                checkbox.parentElement.style.borderColor = '#2196f3';
            } else {
                checkbox.parentElement.classList.remove('selected');
                checkbox.parentElement.style.backgroundColor = '';
                checkbox.parentElement.style.borderColor = '';
            }
        }
    }

    // Add this to your existing JavaScript
    function toggleTheme() {
        const body = document.body;
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        body.setAttribute('data-theme', newTheme);
        
        // Update icon
        const icon = document.querySelector('.theme-toggle i');
        icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        
        // Save preference
        localStorage.setItem('theme', newTheme);
    }

    // Check for saved theme preference
    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        const icon = document.querySelector('.theme-toggle i');
        icon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
    });

    // Add this at the end of your existing JavaScript
    // Create particle effect
    const particlesContainer = document.getElementById('particles-container');
    const particleCount = 80;
    
    // Create particles
    for (let i = 0; i < particleCount; i++) {
        createParticle();
    }
    
    function createParticle() {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 3 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        resetParticle(particle);
        particlesContainer.appendChild(particle);
        animateParticle(particle);
    }
    
    function resetParticle(particle) {
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        
        particle.style.left = `${posX}%`;
        particle.style.top = `${posY}%`;
        particle.style.opacity = '0';
        
        return { x: posX, y: posY };
    }
    
    function animateParticle(particle) {
        const pos = resetParticle(particle);
        const duration = Math.random() * 10 + 10;
        const delay = Math.random() * 5;
        
        setTimeout(() => {
            particle.style.transition = `all ${duration}s linear`;
            particle.style.opacity = Math.random() * 0.3 + 0.1;
            
            const moveX = pos.x + (Math.random() * 20 - 10);
            const moveY = pos.y - Math.random() * 30;
            
            particle.style.left = `${moveX}%`;
            particle.style.top = `${moveY}%`;
            
            setTimeout(() => {
                animateParticle(particle);
            }, duration * 1000);
        }, delay * 1000);
    }
    
    // Mouse interaction
    document.addEventListener('mousemove', (e) => {
        const mouseX = (e.clientX / window.innerWidth) * 100;
        const mouseY = (e.clientY / window.innerHeight) * 100;
        
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 4 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        particle.style.left = `${mouseX}%`;
        particle.style.top = `${mouseY}%`;
        particle.style.opacity = '0.6';
        
        particlesContainer.appendChild(particle);
        
        setTimeout(() => {
            particle.style.transition = 'all 2s ease-out';
            particle.style.left = `${mouseX + (Math.random() * 10 - 5)}%`;
            particle.style.top = `${mouseY + (Math.random() * 10 - 5)}%`;
            particle.style.opacity = '0';
            
            setTimeout(() => {
                particle.remove();
            }, 2000);
        }, 10);
        
        const spheres = document.querySelectorAll('.gradient-sphere');
        const moveX = (e.clientX / window.innerWidth - 0.5) * 5;
        const moveY = (e.clientY / window.innerHeight - 0.5) * 5;
        
        spheres.forEach(sphere => {
            sphere.style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
    });

    // Add this at the beginning of your JavaScript
    // Create particles for explosion
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            // Set random position for each particle
            const x = Math.random() * 400 - 200;
            const y = Math.random() * 400 - 200;
            particle.style.setProperty('--x', `calc(-50% + ${x}px)`);
            particle.style.setProperty('--y', `calc(-50% + ${y}px)`);
            // Random delay for more natural effect
            particle.style.animationDelay = `${Math.random() * 0.5}s`;
            particlesContainer.appendChild(particle);
        }
    }

    // Handle loading screen
    window.addEventListener('load', () => {
        createParticles();
        setTimeout(() => {
            const loadingScreen = document.querySelector('.loading-screen');
            loadingScreen.classList.add('fade-out');
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);
        }, 2000);
    });

   
// Safely update the UI and keep existing classes
function updateClassification() {
  const answers = {};
  document.querySelectorAll('.question').forEach(q => {
    const labelEl = q.querySelector('label');
    const key = labelEl ? labelEl.textContent.trim() : '';
    const selected = q.querySelector('input[type="radio"]:checked');
    if (key && selected) answers[key] = selected.value;
  });

  const classification = determineClassification(answers);

  const el = document.getElementById('classification-result');
  if (el) {
    el.textContent = classification;

    // Preserve existing classes; only replace the classification-* token
    const keep = el.className.split(' ').filter(c => !c.startsWith('classification-'));
    const cls = 'classification-' + classification.toLowerCase()
      .replace(/\s+/g, '-')   // spaces -> dashes
      .replace(/\+/g, 'plus'); // "+" -> "plus" for valid CSS class
    el.className = [...keep, cls].join(' ').trim();
  }

  return classification;
}

// Read from #classification-result; fallback to last .terminal-message
function getFinalClassification() {
  const el = document.getElementById('classification-result');
  if (el && el.textContent.trim()) return el.textContent.trim();

  const terminalNodes = document.querySelectorAll('.terminal-message');
  if (terminalNodes.length) {
    return terminalNodes[terminalNodes.length - 1]
      .textContent.replace(/^✓\s*/, '').trim();
  }
  return 'No final classification determined';
}

// Wire events so it actually runs
document.addEventListener('DOMContentLoaded', () => {
  // Recompute if any radios are pre-checked
  updateClassification();

  // Recompute whenever a radio changes
  document.addEventListener('change', (e) => {
    if (e.target.matches('input[type="radio"]')) updateClassification();
  });
});


    // Add event listeners to the relevant questions
    document.querySelectorAll('.question').forEach(question => {
        const questionText = question.querySelector('label').textContent;
        if (questionText === 'What is the final severity level?' || 
            questionText === 'What is the final Non-Physical Collision Severity?' ||
            questionText === 'Is this a physical collision or exit code 141(Psim/Matrix only)?') {
            question.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', updateClassification);
            });
        }
    });

    // Add some CSS for classification styling
    const style = document.createElement('style');
    style.textContent = `
        .classification-rqe { color: #4CAF50; }
        .classification-nmc { color: #FFA500; }
        .classification-scel0plus { color: #FF0000; }
        .classification-scel1 { color: #FF0000; }
        .classification-scel2 { color: #FF0000; }
        .classification-scel3 { color: #FF0000; }
        .classification-scel4 { color: #FF0000; }
    `;
    document.head.appendChild(style);
    
    </script>
</body>
</html>


