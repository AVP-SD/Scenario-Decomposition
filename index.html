



<!DOCTYPE html> 
<html>
<head>
    <title>Scenario Decomposition Practice</title>
   <!-- Basic favicon -->
<link rel="icon" href="favicon_io/favicon.ico" sizes="any">
<!-- PNG icons -->
<link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
<!-- Apple devices (iPhone, iPad) -->
<link rel="apple-touch-icon" href="favicon_io/apple-touch-icon.png">
<!-- Optional: manifest (if generated) -->
<link rel="manifest" href="favicon_io/site.webmanifest">
    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // Override default alert
  window.alert = function(message) {
    Swal.fire({
      icon: 'info',
      title: 'Notice',
      text: message
    });
  };
</script>

    <style>
     
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            overflow-x: hidden;
            background-color: #050505;
            color: var(--text-color);
            min-height: 100vh;
            position: relative;
        }

        .gradient-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-sphere {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
        }

        .sphere-1 {
            width: 40vw;
            height: 40vw;
            background: linear-gradient(40deg, rgba(255, 0, 128, 0.8), rgba(255, 102, 0, 0.4));
            top: -10%;
            left: -10%;
            animation: float-1 15s ease-in-out infinite alternate;
        }

        .sphere-2 {
            width: 45vw;
            height: 45vw;
            background: linear-gradient(240deg, rgba(72, 0, 255, 0.8), rgba(0, 183, 255, 0.4));
            bottom: -20%;
            right: -10%;
            animation: float-2 18s ease-in-out infinite alternate;
        }

        .sphere-3 {
            width: 30vw;
            height: 30vw;
            background: linear-gradient(120deg, rgba(133, 89, 255, 0.5), rgba(98, 216, 249, 0.3));
            top: 60%;
            left: 20%;
            animation: float-3 20s ease-in-out infinite alternate;
        }

        .noise-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.05;
            z-index: 5;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: 40px 40px;
            background-image: 
                linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            z-index: 2;
        }

        .glow {
            position: absolute;
            width: 40vw;
            height: 40vh;
            background: radial-gradient(circle, rgba(72, 0, 255, 0.15), transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            animation: pulse 8s infinite alternate;
            filter: blur(30px);
        }

        .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        @keyframes float-1 {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(10%, 10%) scale(1.1); }
        }

        @keyframes float-2 {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(-10%, -5%) scale(1.15); }
        }

        @keyframes float-3 {
            0% { transform: translate(0, 0) scale(1); opacity: 0.3; }
            100% { transform: translate(-5%, 10%) scale(1.05); opacity: 0.6; }
        }

        @keyframes pulse {
            0% { opacity: 0.3; transform: translate(-50%, -50%) scale(0.9); }
            100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.1); }
        }

        /* Update existing container styles to work with the background */
        .panel, #login-panel, .admin-view, .submission-details-view, .admin-filters {
            background:var(--container-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .panel,
        [data-theme="dark"] #login-panel,
        [data-theme="dark"] .admin-view,
        [data-theme="dark"] .submission-details-view,
        [data-theme="dark"] .admin-filters {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        :root {
            --background-color: #ffffff;
            --text-color: #333333;
            --panel-bg: #f5f5f5;
            --node-bg: #ffffff;
            --border-color: #ddd;
            --hover-bg: #f8f9fa;
            --selected-bg: #e3f2fd;
            --terminal-bg: #e8f5e9;
            --terminal-color: #2e7d32;
            --table-header-bg: #f2f2f2;
            --table-border: #ddd;
            --input-bg: #ffffff;
            --input-text: #333333;
            --input-border: #ddd;
            --button-bg: #4CAF50;
            --button-hover: #45a049;
            --button-secondary-bg: #2196F3;
            --button-danger-bg: #f44336;
            --dropdown-bg: #ffffff;
            --dropdown-text: #333333;
            --dropdown-hover: #f5f5f5;
            --container-bg: #ffffff;
            --card-bg: #ffffff;
            --header-bg: #ffffff;
            --footer-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --select-bg: #ffffff;
            --select-text: #333333;
            --select-border: #ddd;
            --select-hover: #f5f5f5;
            --shift-button-bg: #e0e0e0;
            --shift-button-hover: #d0d0d0;
            --shift-button-active: #4CAF50;
        }

        .quality-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .popup-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: popupFadeIn 0.5s ease-out;
        }

        [data-theme="dark"] .popup-content {
            background: rgba(30, 30, 30, 0.95);
            color: #fff;
        }

        .cat-gif {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            margin-bottom: 1rem;
            object-fit: cover;
        }

        .close-popup {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 1rem;
            transition: background 0.3s ease;
        }

        .close-popup:hover {
            background: #45a049;
        }

        @keyframes popupFadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        [data-theme="dark"] {
            --background-color: #1f0531;
            --text-color: #ffffff;
            --panel-bg: #2d2d2d;
            --node-bg: #333333;
            --border-color: #444444;
            --hover-bg: #3d3d3d;
            --selected-bg: #1a3a4a;
            --terminal-bg: #1b3a1b;
            --terminal-color: #4caf50;
            --table-header-bg: #2d2d2d;
            --table-border: #444444;
            --input-bg: #2d2d2d;
            --input-text: #ffffff;
            --input-border: #444444;
            --button-bg: #4CAF50;
            --button-hover: #45a049;
            --button-secondary-bg: #2196F3;
            --button-danger-bg: #f44336;
            --dropdown-bg: #2d2d2d;
            --dropdown-text: #ffffff;
            --dropdown-hover: #3d3d3d;
            --container-bg: #2d2d2d;
            --card-bg: #333333;
            --header-bg: #2d2d2d;
            --footer-bg: #2d2d2d;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --select-bg: #2d2d2d;
            --select-text: #ffffff;
            --select-border: #444444;
            --select-hover: #3d3d3d;
            --shift-button-bg: #1a1a1a;
            --shift-button-hover: #2d2d2d;
            --shift-button-active: #4CAF50;
        }

        [data-theme="dark"] .boolean-option {
            border-color: var(--border-color);
        }

        [data-theme="dark"] .boolean-option:hover {
            background: var(--hover-bg);
            border-color: #666;
            box-shadow: 0 2px 8px rgba(255,255,255,0.1);
        }

        [data-theme="dark"] .boolean-option.selected {
            background: var(--selected-bg);
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3);
        }

        

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .panel {
            background: var(--panel-bg);
            transition: background-color 0.3s ease;
        }

        .node {
            background: var(--node-bg);
            transition: background-color 0.3s ease;
        }

        .question {
            color: var(--text-color);
            border-bottom-color: var(--border-color);
        }

        .option {
            border-color: var(--border-color);
        }

        .option:hover {
            background: var(--hover-bg);
        }

        .option.selected-option {
            background: var(--selected-bg);
        }

        .terminal-message {
            background: var(--terminal-bg);
            color: var(--terminal-color);
        }

        th {
            background-color: var(--table-header-bg);
        }

        th, td {
            border-color: var(--table-border);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--panel-bg);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .theme-toggle i {
            font-size: 24px;
            color: var(--text-color);
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover i {
            transform: rotate(180deg);
        }

        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .panel {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"], input[type="password"], input[type="date"], textarea, select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* أنماط فلتر التاريخ */
        .date-filter-container {
            background: var(--container-bg);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #eee;
        }
        
        .date-filter {
            width: auto;
            min-width: 150px;
            margin-right: 10px;
        }
        
        .custom-date {
            width: auto;
            min-width: 150px;
            display: inline-block;
        }
        
        #back-to-ussers-btn {
  background: #2196F3;       /* blue instead of green */
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 30px;
  cursor: pointer;
  margin: 10px 0;
  font-size: 14px;
  font-weight: bold;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0,0,0,0.15);
}

#back-to-ussers-btn:hover {
  background: #1976D2;       /* darker blue on hover */
  transform: translateY(-2px);
  box-shadow: 0 6px 10px rgba(0,0,0,0.25);
}

#back-to-ussers-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

        
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #45a049;
        }
        button.secondary {
            background: #2196F3;
        }
        button.danger {
            background: #f44336;
        }
        .tree {
            margin-left: 20px;
        }
        .node {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .question {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option:hover {
            background: #f8f9fa;
            border-color: #007bff;
        }
        .option.selected-option {
            background: var(--selected-bg);
        }
        .option input[type="radio"] {
            margin-right: 10px;
        }
        .option label {
            flex: 1;
            cursor: pointer;
            margin: 0;
        }
        .text-input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        .selected {
            background-color: #f0f7ff;
            padding: 5px;
            border-radius: 3px;
        }
        .terminal-message {
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 6px;
            color: #2e7d32;
            font-weight: 500;
        }
        .submission {
            background: #f9f9f9;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .hidden {
            display: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .admin-view {
            margin-top: 30px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }
        .shift-selection {
            margin-bottom: 20px;
        }
        .shift-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .shift-btn {
            background: var(--shift-button-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 9x 24px;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .shift-btn:hover {
            background: var(--shift-button-hover);
            transform: translateY(-1px);
        }
        .shift-btn.active {
            background: var(--shift-button-active);
            color: white;
            border-color: var(--shift-button-active);
        }
        #user-dropdown {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .admin-filters {
            background: #fff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .filter-group {
            display: inline-block;
            margin-right: 15px;
        }
        .submission-details-view {
            background: white;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .submission-details-view h4 {
            margin-top: 0;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .submission-answers {
            margin-top: 15px;
        }
        .answer-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #eee;
        }
        .answer-question {
            font-weight: bold;
            color: #2c3e50;
        }
        .error-message {
            color: #e74c3c;
            margin-top: 5px;
            font-size: 0.9em;
        }
        .required:after {
            content: " *";
            color: #e74c3c;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        #tree-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

.pagination-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin: 15px 0;
  font-weight: bold;
}

.pagination-controls button {
  background-color: var(--btn-bg, #4CAF50);
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 50px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s ease;
}

.pagination-controls button:disabled {
  background-color: #888;
  cursor: not-allowed;
}


        /* Update container styles */
        .tree-container,
        #login-panel,
        #admin-dashboard,
        .admin-view,
        .submission-details-view,
        .admin-filters,
        .panel,
        .node,
        .option,
        .terminal-message,
        .submission,
        .shift-selection,
        .shift-buttons,
        .admin-filters,
        .filter-group,
        .submission-details-view,
        .tree,
        .question,
        .options,
        .text-input,
        .selected,
        .admin-view,
        .shift-selection,
        .shift-buttons,
        .admin-filters,
        .filter-group,
        .submission-details-view {
            background-color: var(--container-bg);
            color: var(--text-color);
            border-color: var(--border-color);
            box-shadow: 0 2px 4px var(--shadow-color);
            transition: all 0.3s ease;
        }

        /* Update specific container styles */
        .tree-container {
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        #login-panel {
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        #admin-dashboard {
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .admin-view {
            background-color: var(--container-bg);
            border-top: 2px solid var(--border-color);
        }

        .submission-details-view {
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
        }

        .admin-filters {
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
        }

        /* Update card-like elements */
        .node,
        .option,
        .submission {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
        }

        /* Update header and footer if they exist */
        header,
        footer {
            background-color: var(--header-bg);
            color: var(--text-color);
            border-color: var(--border-color);
        }

        /* Update any remaining containers */
        .container,
        .section,
        .card,
        .box {
            background-color: var(--container-bg);
            color: var(--text-color);
            border-color: var(--border-color);
            transition: all 0.3s ease;
        }

        /* Update hover states */
        .node:hover,
        .option:hover,
        .submission:hover {
            background-color: var(--hover-bg);
        }

        /* Update selected states */
        .option.selected-option,
        .node.selected {
            background-color: var(--selected-bg);
        }

        /* Update table styles */
        table {
            background-color: var(--container-bg);
            border-color: var(--border-color);
        }

        th {
            background-color: var(--table-header-bg);
            color: var(--text-color);
        }

        td {
            color: var(--text-color);
        }

        /* Update form elements */
        .form-group {
            background-color: var(--bg-color);
        }

        label {
            color: var(--text-color);
        }

        /* Update any modals or popups */
        .modal,
        .popup {
            background-color: var(--container-bg);
            border-color: var(--border-color);
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .modal-header,
        .popup-header {
            background-color: var(--header-bg);
            border-bottom-color: var(--border-color);
        }

        .modal-body,
        .popup-body {
            background-color: var(--container-bg);
        }

        .modal-footer,
        .popup-footer {
            background-color: var(--header-bg);
            border-top-color: var(--border-color);
        }

        /* Update all input and select styles */
        input[type="text"],
        input[type="password"],
        input[type="number"],
        input[type="email"],
        input[type="tel"],
        input[type="search"],
        textarea,
        select,
        #flash-number,
        #admin-name,
        #admin-password,
        #shift-select,
        #user-dropdown {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border: 1px solid var(--input-border) !important;
            transition: all 0.3s ease;
        }

        /* Style for select elements */
        select {
            background-color: var(--select-bg) !important;
            color: var(--select-text) !important;
            border-color: var(--select-border) !important;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding-right: 30px;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
        }

        select:hover {
            background-color: var(--select-hover) !important;
        }

        select:focus {
            border-color: var(--button-bg) !important;
            outline: none;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        /* Style for select options */
        select option {
            background-color: var(--select-bg) !important;
            color: var(--select-text) !important;
            padding: 10px;
        }

        select option:hover {
            background-color: var(--select-hover) !important;
        }

        /* Style for input focus states */
        input:focus,
        textarea:focus,
        select:focus {
            border-color: var(--button-bg) !important;
            outline: none;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        /* Style for input placeholders */
        ::placeholder {
            color: var(--text-color);
            opacity: 0.7;
        }

        /* Style for disabled inputs */
        input:disabled,
        textarea:disabled,
        select:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            background-color: var(--input-bg) !important;
        }

        /* Style for the shift selection container */
        .shift-selection {
            background-color: var(--container-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .shift-selection label {
            color: var(--text-color);
            margin-bottom: 10px;
            display: block;
        }

        /* Style for the admin login form */
        #login-panel input[type="text"],
        #login-panel input[type="password"] {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border-color: var(--input-border) !important;
        }

        /* Style for the flash number input */
        #flash-number {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border-color: var(--input-border) !important;
        }
        
        #pr-dashboard-btn {
            background:#c14020 ;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
        
        #responder-dashboard-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 40px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
        #responder-dashboard-btn:hover {
            background: #0b7dda;
        }

        /* Admin Panel Styles */
        #admin-panel {
            position: relative;
            padding-top: 60px; /* Add space for the logout button */
        }

        #admin-logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--button-danger-bg);
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 100;
        }

        #admin-logout-btn:hover {
            background: #d32f2f;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Update the admin panel header */
        #admin-panel h2 {
            margin-bottom: 30px;
        }

        /* Loading Screen Styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }

        .loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .car-explosion {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .car {
            position: absolute;
            font-size: 120px;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            animation: explode 2s ease-out forwards;
            z-index: 2;
            transform-origin: center;
            font-family: 'Arial', sans-serif;
            letter-spacing: 5px;
        }

        .car::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.1) 100%
            );
            border-radius: 20px;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2) rotate(10deg);
                opacity: 0.8;
                text-shadow: 0 0 40px rgba(255, 255, 255, 1);
            }
            100% {
                transform: translate(-50%, -50%) scale(0) rotate(20deg);
                opacity: 0;
                text-shadow: 0 0 60px rgba(255, 255, 255, 1);
            }
        }

        .explosion {
            position: absolute;
            width: 0;
            height: 0;
            background: radial-gradient(circle, 
                rgba(255, 255, 0, 0.8) 0%,
                rgba(255, 165, 0, 0.8) 20%,
                rgba(255, 69, 0, 0.8) 40%,
                rgba(255, 0, 0, 0.8) 60%,
                rgba(139, 0, 0, 0.8) 80%
            );
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: expand 2s ease-out forwards;
            z-index: 1;
            filter: blur(5px);
        }

        .explosion::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.8) 0%,
                rgba(255, 255, 0, 0.8) 20%,
                rgba(255, 165, 0, 0.8) 40%,
                rgba(255, 69, 0, 0.8) 60%,
                rgba(255, 0, 0, 0.8) 80%
            );
            border-radius: 50%;
            animation: pulse 0.5s ease-out infinite alternate;
        }

        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 3;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.8) 0%,
                rgba(255, 165, 0, 0.8) 50%,
                rgba(255, 69, 0, 0.8) 100%
            );
            border-radius: 50%;
            top: 50%;
            left: 50%;
            animation: particle 2s ease-out forwards;
            filter: blur(1px);
        }

        @keyframes expand {
            0% {
                width: 0;
                height: 0;
                opacity: 0;
                filter: blur(0px);
            }
            50% {
                width: 200px;
                height: 200px;
                opacity: 0.9;
                filter: blur(5px);
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
                filter: blur(10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(0.95);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.05);
                opacity: 1;
            }
        }

        @keyframes particle {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
                filter: brightness(1);
            }
            100% {
                transform: translate(var(--x), var(--y)) scale(0);
                opacity: 0;
                filter: brightness(2);
            }
        }

        .loading-text {
            position: absolute;
            bottom: 20%;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            width: 100%;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 1s forwards;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        
        .boolean-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
            user-select: none;
            position: relative;
        }
        .boolean-option:hover {
            background: var(--hover-bg);
            border-color: #bbb;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .boolean-option.selected {
            background: var(--selected-bg);
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }
        .boolean-option input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
            cursor: pointer;
        }
        .boolean-option label {
            cursor: pointer;
            flex: 1;
            font-weight: 500;
        }
        
        /* Fullscreen dark overlay */
  #overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    font-family: Arial, sans-serif;
    animation: fadeIn 0.3s ease forwards;
  }

  /* Centered box */
  .overlay-box {
    background: #1e1e1e;
    padding: 2rem 3rem;
    border-radius: 16px;
    text-align: center;
    max-width: 500px;
    width: 90%;
    transform: translateY(40px);
    opacity: 0;
    animation: slideUp 0.4s ease forwards;
  }

  .overlay-box h2 {
    margin-bottom: 1rem;
    color: #25d366;
    font-size: 1.5rem;
  }
  .overlay-box p {
    margin-bottom: 1.5rem;
    color: #ccc;
    font-size: 1rem;
    line-height: 1.4;
  }

  .btns {
    display: flex;
    justify-content: center;
    gap: 1rem;
  }
  .btns button {
    padding: 0.7rem 1.5rem;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    font-size: 1rem;
    transition: transform 0.2s ease, opacity 0.2s ease;
  }
  #continueHere {
    background: #25d366;
    color: #fff;
  }
  #stayThere {
    background: #444;
    color: #fff;
  }
  

   .caution-banner {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: repeating-linear-gradient(
      45deg,
      #ffcc00,
      #ffcc00 20px,
      #000 20px,
      #000 40px
    );
    color: black;
    font-weight: bold;
    font-size: 20px;
    text-align: center;
    padding: 12px 0;
    overflow: hidden;
    z-index: 9999;
  }

  .caution-text {
    display: inline-block;
    white-space: nowrap;
    animation: scrollText 12s linear infinite, pulse 1.5s ease-in-out infinite;
    background-color: #ffcc00;
    padding: 5px 20px;
    border-radius: 5px;
  }

  @keyframes scrollText {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }

  @keyframes pulse {
    0%, 100% { color: black; text-shadow: 0 0 5px #ff0; }
    50% { color: red; text-shadow: 0 0 15px red; }
  }
  
  .btns button:hover {
    transform: scale(1.05);
    opacity: 0.9;
  }

  /* Animations */
  @keyframes fadeIn {
    from { background: rgba(0,0,0,0); }
    to   { background: rgba(0,0,0,0.85); }
  }
  @keyframes slideUp {
    from { transform: translateY(40px); opacity: 0; }
    to   { transform: translateY(0); opacity: 1; }
  }
      /* Overlay for Dino Game */
    #dino-overlay {
      position: fixed;
      top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.8);
      display:flex;
      justify-content:center;
      align-items:center;
      z-index: 9999;
    }
    .dino-container {
      position: relative;
      width: 800px;
      height: 300px;
      background:#fff;
      border-radius:8px;
      overflow:hidden;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    .dino-container iframe {
      width:100%;
      height:100%;
      border:none;
    }
    #close-dino {
      position:absolute;
      top:5px;
      right:5px;
      background:red;
      color:white;
      border:none;
      padding:5px 10px;
      cursor:pointer;
      border-radius:4px;
      font-weight:bold;
    }    
        
        
    </style>
</head>
<body>
    <!-- Add loading screen -->
    <div class="loading-screen">
        <div class="car-explosion">
            <div class="car">SD</div>
            <div class="explosion"></div>
            <div class="particles" id="particles"></div>
        </div>
        <div class="loading-text">Loading Scenario Decomposition...</div>
    </div>

    <div class="gradient-background">
        <div class="gradient-sphere sphere-1"></div>
        <div class="gradient-sphere sphere-2"></div>
        <div class="gradient-sphere sphere-3"></div>
        <div class="glow"></div>
        <div class="grid-overlay"></div>
        <div class="noise-overlay"></div>
        <div class="particles-container" id="particles-container"></div>
    </div>

    <div class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </div>
    <!-- Login Panel -->
    <div id="login-panel" class="panel">
        <h2>User Login🧠</h2>
        
        <!-- Shift Selection -->
        <div class="shift-selection">
            <label>Select Your Shift:</label>
            <div class="shift-buttons">
                <button class="shift-btn" data-shift="Morning">Morning</button>
                <button class="shift-btn" data-shift="Night">Night</button>
                <button class="shift-btn" data-shift="Overnight">Overnight</button>
            </div>
        </div>
        
        <!-- User Selection -->
<!-- User Selection -->
<div class="form-group">
  <label for="user-dropdown">Select Your Name:</label>
  <select id="user-dropdown" disabled>
    <option value="">Please select shift first</option>
  </select>
</div>

<!-- Manual Name Input -->
<div class="form-group" id="manual-name-container" style="display:none;">
  <label for="manual-name">Enter Your Name:</label>
  <input type="text" id="manual-name" placeholder="Type your name" autocomplete="name">
</div>
        <div class="form-group">
  <label for="flash-number">Yubikey Number:</label>
  <input type="text" id="flash-number" placeholder="Enter your Yubikey number">
</div>
<button id="login-btn" type="button">Start</button>
<button id="responder-dashboard-btn" onclick="window.open('https://script.google.com/macros/s/AKfycbzxYnMXHMiXZY2pyXL8AwNISlgQJQPmOVj3Gs7PTyW3pM8OfaV5gIzGybeAdLrtNSGayw/exec', '_blank')">Practice Dashboard</button>
       
        
        <!-- Admin Login -->
<form id="admin-login-form" style="margin-top:30px; border-top:1px solid #ddd; padding-top:15px;">
  <h3>Admin Login🥷🏽</h3>
  <div class="form-group">
    <label for="admin-username">Username:</label>
    <input type="text" id="admin-username" placeholder="Enter admin username">
  </div>
  <div class="form-group">
    <label for="admin-password">Password:</label>
    <input type="password" id="admin-password" placeholder="Enter password">
  </div>
  <button id="admin-login-btn" class="secondary" type="submit">Admin Login</button>
</form>

    </div>

    <!-- Task Panel -->
    <div id="task-panel" class="panel hidden">
        <h2>Task Information</h2>
        <div class="form-group">
            <label for="task-id">Task Link:</label>
            <input type="text" id="task-id" placeholder="Enter Task LINK‼️">
        </div>
        <button id="start-task-btn">Start Task</button>
        <button id="my-submissions-btn" class="secondary">My Submissions</button>
        <button id="logout-btn" class="danger">Logout</button>
    </div>

    <!-- Classification Panel -->
    <div id="classification-panel" class="hidden">
        <h1>Scenario Decomposition</h1>
        <div id="current-user" style="margin-bottom: 20px;"></div>
        <div id="current-task" style="margin-bottom: 20px;"></div>
        <div id="tree-container" class="tree"></div>
        <button id="submit-btn" class="hidden" style="margin-top: 20px;">Submit</button>
        <button id="cancel-task-btn" class="danger">Cancel Task</button>
    </div>

   <!-- User Submissions Panel -->
<div id="submissions-panel" class="panel hidden">
    <h2>Your Submissions</h2>
    
    <div id="submissions-list"></div>
    
    <!-- Add this section for submission details (same as admin panel) -->
    <div id="submission-details-view" class="submission-details-view hidden">
        <button id="back-to-submissions-btn" class="secondary" style="margin-bottom: 15px;">← Back to Submissions</button>
        <div id="submission-full-details"></div>
    </div>
    
    <button id="new-task-btn">Start New Task</button>
    <button id="user-logout-btn" class="danger">Logout</button>
</div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="panel hidden">
        <h2>Admin Dashboard</h2>
        <button id="admin-logout-btn" class="danger" style="float: right;">Logout</button>
        <button id="reload-all-data" class="btn">Reload All Shift Data</button>
        
        <!-- Admin Filters -->
        <div class="admin-filters">
            <div class="filter-group">
                <label>Filter by Shift:</label>
                <select id="shift-filter">
                    <option value="all">All Shifts</option>
                    <option value="Morning">Morning</option>
                    <option value="Night">Night</option>
                    <option value="Overnight">Overnight</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Filter by Date:</label>
                <input type="date" id="date-filter">
            </div>
            <button id="apply-filters" class="secondary">Apply Filters</button>
<button id="reset-filters" class="reset-filters back-to-users-btn">Reset</button>
        </div>
        
        <h3>All Users</h3>        <button id="back-to-ussers-btn">Back to Users</button>

    <div id="users-list"></div>
    
    <div id="user-submissions-view" class="hidden">
        <h3>User Submissions</h3>
        <div id="selected-user-info"></div>
        <div id="admin-submissions-list"></div>
        <button id="back-to-users-btn">Back to Users</button>
    </div>
    
    <!-- ✅ ADD THIS MISSING SECTION -->
    <div id="submission-details-view" class="submission-details-view hidden">
        <button id="back-to-submissions-btn" class="secondary" style="margin-bottom: 15px;">← Back to Submissions</button>
        <div id="submission-full-details"></div>
        </div>
    </div>

<!-- Overlay -->
<div id="overlay">
  <div class="overlay-box">
    <h2>This site is already open</h2>
    <p>You already have this site open in another tab.<br>
       Would you like to continue here instead?</p>
    <div class="btns">
      <button id="continueHere">Continue Here</button>
      <button id="stayThere">Stay on Other Tab</button>
    </div>
  </div>
  <!-- New full-width banner -->
<div class="caution-banner">
  <div class="caution-text">
    ⚠ Unsaved progress in the other tab may be lost ⚠ Unsaved progress in the other tab may be lost ⚠ Unsaved progress in the other tab may be lost
  </div>
</div>

    <script>
         // Konami Code sequence
    const konamiCode = [
      "ArrowUp","ArrowUp","ArrowDown","ArrowDown",
      "ArrowLeft","ArrowRight","ArrowLeft","ArrowRight",
     
    ];
    let userInput = [];

    document.addEventListener("keydown", (e) => {
      userInput.push(e.key);
      if (userInput.length > konamiCode.length) userInput.shift();

      if (JSON.stringify(userInput) === JSON.stringify(konamiCode)) {
        launchDinoGame();
        userInput = [];
      }
    });

    function launchDinoGame() {
      let overlay = document.createElement("div");
      overlay.id = "dino-overlay";
      overlay.innerHTML = `
        <div class="dino-container">
          <iframe src="https://chromedino.com/" frameborder="0"></iframe>
          <button id="close-dino">❌ Close</button>
        </div>
      `;
      document.body.appendChild(overlay);

      document.getElementById("close-dino").onclick = () => {
        overlay.remove();
      };
    }
        
        
        // ==============================================
        // === Firebase Configurations ==================
        // ==============================================
        const firebaseConfigs = {
    Morning: {
        apiKey: "AIzaSyCdR6ELRp1e1JSyOZUU1pf4cP0_vulPyD8",
        authDomain: "sd-morning.firebaseapp.com",
        projectId: "sd-morning",
        storageBucket: "sd-morning.firebasestorage.app",
        messagingSenderId: "472020622201",
        appId: "1:472020622201:web:db61ac2a7e78c1ee532da8",
        measurementId: "G-2QZC70HY0T"
    }, 
    Night: {
        apiKey: "AIzaSyCia0sBLFXmmDM-wyb0mHyPpBdXbVlg6mA",
        authDomain: "sd-night.firebaseapp.com",
        projectId: "sd-night",
        storageBucket: "sd-night.firebasestorage.app",
        messagingSenderId: "629882715239",
        appId: "1:629882715239:web:ca46e1618332971290a8c2",
        measurementId: "G-LEBZ4HYW0Q"
    },
    Overnight: {
        apiKey: "AIzaSyAEE9iLqOeqviZFi_nRoN9qdnGtzqWoBWQ",
        authDomain: "sd-overnight.firebaseapp.com",
        projectId: "sd-overnight",
        storageBucket: "sd-overnight.firebasestorage.app",
        messagingSenderId: "209105765223",
        appId: "1:209105765223:web:0881b45fc6ce981ed825c2",
        measurementId: "G-2EYRJP485L"
    }
};

        let currentShift = null;
        let db, auth, analytics;

        // Function to initialize Firebase for a specific shift
        async function initializeFirebaseForShift(shift) {
            return new Promise(async (resolve, reject) => {
                const config = firebaseConfigs[shift];
                if (!config) {
                    console.error(`Firebase config for shift '${shift}' not found.`);
                    reject(new Error(`Firebase config for shift '${shift}' not found.`));
                    return;
                }

                try {
                    // Delete existing app instance if it exists
                    if (firebase.apps.length > 0) {
                        console.log("Deleting previous Firebase app instance...");
                        await firebase.app().delete();
                        console.log("Previous Firebase app deleted.");
                    }
                } catch (error) {
                    console.error("Error deleting previous Firebase app:", error);
                    // Continue, as initialization might still work or fix a bad state
                }

                try {
                    console.log(`Initializing Firebase for ${shift} shift with project ID: ${config.projectId}...`);
                    const app = firebase.initializeApp(config);
                    db = firebase.firestore(); // Uses the most recently initialized app
                    auth = firebase.auth();
                    analytics = firebase.analytics();
                    
                    // Make Firebase available globally
                    window.db = db;
                    window.auth = auth;
                    window.firebase = firebase; // window.firebase will point to the firebase namespace
                    
                    currentShift = shift;
                    console.log(`Firebase initialized successfully for ${shift} shift.`);
                    resolve();
                } catch (error) {
                    console.error(`Error initializing Firebase for ${shift} shift:`, error);
                    db = null; // Ensure db is null if initialization fails
                    auth = null;
                    analytics = null;
                    currentShift = null;
                    reject(error);
                }
            });
        }

        // ==============================================
        // === Decision Tree JSON =======================
        // ==============================================
        const decisionTree = {
    "version": "sdecomp_02_01",
    "treeType": "ADHOC_LABELING",
    "childNodes": [
        {
            "name": "da_is_data_availability",
            "id": "626faa15-54c4-4ace-a1f0-145929227767",
            "displayName": "Are there any essential data missing from the segment preventing your ability to fully diagnose the event?",
            "nodeType": "choice",
            "childNodes": [
                {
                    "name": "da_is_data_availability_a",
                    "id": "86f4756a-2729-4e25-bff1-6d627166e7cc",
                    "displayName": "Yes",
                    "nodeType": "branch",
                    "childNodes": [
                        {
                            "name": "da_missing_data_reason",
                            "id": "d06e9d7c-a1ec-40ce-9c70-df63fe4cf918",
                            "displayName": "Please list the type of missing data observed. If there is more than one missing data type, list all separated by commas.",
                            "nodeType": "freeText",
                            "childNodes": [],
                            "status": ""
                        }
                    ],
                    "status": ""
                },
                {
                    "name": "da_is_data_availability_b",
                    "id": "6847d86c-0beb-4f9b-a5ce-ad87537ed2fb",
                    "displayName": "No",
                    "nodeType": "branch",
                    "childNodes": [
                        {
                            "name": "hb_is_hazardous_behaviors",
                            "id": "f01ab9e3-71a3-4bcf-85d4-056b0082df25",
                            "displayName": "Do you observe a hazardous behavior?",
                            "nodeType": "choice",
                            "childNodes": [
                                {
                                    "name": "hb_is_hazardous_behaviors_a",
                                    "id": "2e172a0e-e8e4-48ce-ad7b-d37efad36a38",
                                    "displayName": "Yes",
                                    "nodeType": "branch",
                                    "childNodes": [
                                        {
                                            "name": "hb_multi_hazardous_behaviors",
                                            "id": "44a4986d-37a3-41d7-85a0-36d1a8e66b2e",
                                            "displayName": "Select all hazardous behaviors you observed.",
                                            "nodeType": "branch",
                                            "childNodes": [
                                                {
                                                    "name": "hb_departing_roadway",
                                                    "id": "6fe8b430-3284-46d2-ade2-2647765e903a",
                                                    "displayName": "Departing Roadway",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_asserting_too_closely_in_front",
                                                    "id": "a711e705-a126-4348-8c5b-e58062fe2446",
                                                    "displayName": "Asserting Too Closely in Front",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_asserting_too_closely_behind",
                                                    "id": "60d22ba4-0e40-45db-b86d-73d523a08e7d",
                                                    "displayName": "Asserting Too Closely Behind",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_encroaching_towards",
                                                    "id": "05e3aab0-029f-4e19-93c2-c4d765ad7120",
                                                    "displayName": "Encroaching Towards",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_failing_to_assert",
                                                    "id": "3a3bb2f3-3506-4f04-abec-7790ea1847b5",
                                                    "displayName": "Failing To Assert",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_passing_too_closely_next_to",
                                                    "id": "a62ec84c-c014-44b1-b282-6bfa9e1d5ef3",
                                                    "displayName": "Passing Too Closely Next To",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_following_too_close",
                                                    "id": "07f4ae4f-d0aa-4491-a394-0ac23417c2d7",
                                                    "displayName": "Following Too Close",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_leaving_an_accident_scene",
                                                    "id": "740ae538-2438-45fe-a276-38c8d959944b",
                                                    "displayName": "Leaving An Accident Scene",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_inappropriately_overtaking",
                                                    "id": "265869e9-0468-4759-8bc5-137f5bd71aa4",
                                                    "displayName": "Inappropriately Overtaking",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_driving_wrong_way",
                                                    "id": "98c4e1ec-6d32-4fb1-a3d2-9eb5eedf5dcf",
                                                    "displayName": "Driving Wrong Way",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_violating_traffic_directive",
                                                    "id": "cab4d70d-44a8-4096-818a-16aa4ce78d37",
                                                    "displayName": "Violating Traffic Directive",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_swerving",
                                                    "id": "337f2f51-0aa2-423d-9479-9ff490499565",
                                                    "displayName": "Swerving",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_braking_too_little",
                                                    "id": "d77e16ec-d46a-409e-9f9e-92506ea733ac",
                                                    "displayName": "Braking Too Little",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_braking_too_much",
                                                    "id": "5c5bd004-82ee-4db8-bcb3-f37369bcc4bf",
                                                    "displayName": "Braking Too Much",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_violating_lane_boundary",
                                                    "id": "ae413100-5a51-4528-af3a-4aa0e30c2e4d",
                                                    "displayName": "Violating Lane Boundary",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_failing_to_overtake",
                                                    "id": "3d2d4d21-2ea3-4c7f-befb-ed54fd5f5859",
                                                    "displayName": "Failing To Overtake",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_lane_wandering",
                                                    "id": "bb581f1a-8dd1-488a-a7d7-1accac45eef4",
                                                    "displayName": "Lane Wandering",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_driving_over_obstacle",
                                                    "id": "e7f45f99-2a58-4e2c-95e8-70cfd571a664",
                                                    "displayName": "Driving Over Obstacle",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_blocking_roadway",
                                                    "id": "8f4e7b93-177d-4b6e-99ea-1e14a99418f4",
                                                    "displayName": "Blocking Roadway",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_unnecessarily_rerouting",
                                                    "id": "7f1b5e9d-534b-4ecb-8845-f7093dc22b0e",
                                                    "displayName": "Unnecessarily Rerouting",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_too_fast",
                                                    "id": "32b15164-a494-4b8a-b4fb-e3bb51ce06f5",
                                                    "displayName": "Too Fast",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_too_slow",
                                                    "id": "30fba784-7381-42d8-82a0-ada264238a35",
                                                    "displayName": "Too Slow",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_accelerating_too_little",
                                                    "id": "8d62674c-8fe0-4375-a44b-23b975cf50b1",
                                                    "displayName": "Accelerating Too Little",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_accelerating_too_much",
                                                    "id": "8e24d568-549e-41a8-a669-d590f5515b38",
                                                    "displayName": "Accelerating Too Much",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_moving_when_door_is_open",
                                                    "id": "3b548738-b9ab-4f2a-be3e-9698e4b59bcb",
                                                    "displayName": "Moving when Door is Open",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_failing_to_pullover",
                                                    "id": "2e68e06f-b27e-44fb-9f8c-09d4f07a5597",
                                                    "displayName": "Failing To Pullover",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_performing_pullover_in_hazardous_location",
                                                    "id": "627de15f-83e4-48d2-ab34-68d388649ba6",
                                                    "displayName": "Performing Pullover in Hazardous Location",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_failing_to_use_turn_signal",
                                                    "id": "d7b2fd80-4b92-4dfb-9113-6cd2d50af32e",
                                                    "displayName": "Driving Without Lights On",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_driving_without_lights_on",
                                                    "id": "55be69bf-4e87-4233-8c09-96eeab3a3897",
                                                    "displayName": "Failing To Use Turn Signal",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "hb_other",
                                                    "id": "20730960-0267-4785-9a57-238f8c943278",
                                                    "displayName": "Other",
                                                    "nodeType": "boolean",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "highest_severity_hazardous_behavior",
                                            "id": "9e42ad2b-12f5-47a6-8275-f1864d5d63ce",
                                            "displayName": "Which hazardous behavior is used for loss factor and ego action analysis?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "highest_severity_hazardous_behavior_a",
                                                    "id": "4fe9039d-06e4-46ea-a943-deccdfcc8bb8",
                                                    "displayName": "Departing Roadway",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_b",
                                                    "id": "e69665d6-f5ec-44dd-840f-7fdc61bbda16",
                                                    "displayName": "Asserting Too Closely in Front",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_c",
                                                    "id": "fa4818c2-ea3a-48b7-99bf-7ef70aba92d9",
                                                    "displayName": "Asserting Too Closely Behind",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_d",
                                                    "id": "905132a6-604a-4c0b-a848-588e6db46980",
                                                    "displayName": "Encroaching Towards",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_e",
                                                    "id": "026e70be-3968-4fd1-b52d-2fb92f56e6a5",
                                                    "displayName": "Failing To Assert",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_f",
                                                    "id": "06c7bbc8-a3f1-4a1c-83fd-5f82c849f3a9",
                                                    "displayName": "Passing Too Closely Next To",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_g",
                                                    "id": "cbf9a7f6-de95-4782-8d4f-20d9d2d8bd08",
                                                    "displayName": "Following Too Close",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_h",
                                                    "id": "f3979ef0-aaa3-4eb6-9bcd-6bf1afe495dc",
                                                    "displayName": "Leaving An Accident Scene",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_i",
                                                    "id": "65c9a1ed-26b1-4a7e-9832-0ac9db34f01b",
                                                    "displayName": "Inappropriately Overtaking",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_j",
                                                    "id": "8ffd4c54-41e1-41b1-84c8-3e50661a3792",
                                                    "displayName": "Driving Wrong Way",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_k",
                                                    "id": "790873fe-23e9-45e7-a853-1bf30ae1d434",
                                                    "displayName": "Violating Traffic Directive",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_l",
                                                    "id": "d099322f-4b95-472b-b2fd-bcfc2a6894ae",
                                                    "displayName": "Swerving",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_m",
                                                    "id": "b7cdd98b-12cc-49b2-a9be-cc36f938d92b",
                                                    "displayName": "Braking Too Little",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_n",
                                                    "id": "ec669bd8-8fba-41a3-a953-4fb7b5388340",
                                                    "displayName": "Braking Too Much",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_o",
                                                    "id": "457bdc85-9d87-441f-bf45-9692e5e70d13",
                                                    "displayName": "Violating Lane Boundary",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_p",
                                                    "id": "10cb4b71-2368-463f-8e89-7641d85086d0",
                                                    "displayName": "Failing To Overtake",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_q",
                                                    "id": "ec211647-f098-4e69-88a4-29ac4d683715",
                                                    "displayName": "Lane Wandering",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_r",
                                                    "id": "4ffe1d89-6b1b-4750-850e-2f404098dfdb",
                                                    "displayName": "Driving Over Obstacle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_s",
                                                    "id": "b56a18d5-9813-41ec-acf8-fd2b6e1e43a1",
                                                    "displayName": "Blocking Roadway",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_t",
                                                    "id": "5e7eb987-ed28-4d5d-b7cd-df09617a4fff",
                                                    "displayName": "Unnecessarily Rerouting",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_u",
                                                    "id": "77e5ebc4-2da5-45d4-b0ed-ee4cf2b84c8a",
                                                    "displayName": "Too Fast",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_v",
                                                    "id": "3f96e4ba-cacd-45e2-989a-28ebe7374314",
                                                    "displayName": "Too Slow",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_w",
                                                    "id": "653a2cc4-9914-4362-9607-b7d2df17dd47",
                                                    "displayName": "Accelerating Too Little",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_x",
                                                    "id": "4a778555-5a85-445f-a580-b8f703aa3431",
                                                    "displayName": "Accelerating Too Much",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_y",
                                                    "id": "ac4c2797-b729-454a-824f-00e62b7168f1",
                                                    "displayName": "Moving when Door is Open",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_z",
                                                    "id": "251debdd-11dd-45d8-9d9e-f49aac99a1fa",
                                                    "displayName": "Failing To Pullover",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_aa",
                                                    "id": "9f20ef60-9dcd-4686-8f09-2c5e5e62e9de",
                                                    "displayName": "Performing Pullover in Hazardous Location",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_ab",
                                                    "id": "d83aa731-4bf9-4e13-a3ce-97afbafd6963",
                                                    "displayName": "Driving Without Lights On",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_ac",
                                                    "id": "d6dd6529-e4a4-4cc8-bc8f-9ef578f259b1",
                                                    "displayName": "Failing To Use Turn Signal",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "highest_severity_hazardous_behavior_ad",
                                                    "id": "a6f6abf6-c380-4a57-8f41-e16f55d19496",
                                                    "displayName": "Other",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "ec_is_Environmental_Conditions",
                                            "id": "cd95b6b2-ae7b-4461-b974-5309f8c865e7",
                                            "displayName": "Did the Environment Condition directly cause the hazardous behavior?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "ec_is_Environmental_Conditions_a",
                                                    "id": "a416fb1e-9e7c-4e57-b293-586079550451",
                                                    "displayName": "Yes",
                                                    "nodeType": "branch",
                                                    "childNodes": [
                                                        {
                                                            "name": "ec_Environmental_Conditions_behaviors",
                                                            "id": "960ce6bc-4e85-434c-9ff2-82d6e80ef53b",
                                                            "displayName": "Which Environment Condition directly cause the hazardous behavior?",
                                                            "nodeType": "choice",
                                                            "childNodes": [
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_a",
                                                                    "id": "073f8c90-44ca-4f9d-9900-c6f3a8c1065f",
                                                                    "displayName": "[Environment Condition] Handling roadways with limited lane marking visibility",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Roadways_With_Limited_Lane_Marking_Visibility_sub_behavior",
                                                                            "id": "75ea110e-0a59-46c7-ae66-c538b9bac926",
                                                                            "displayName": "Which sub-behavior of Handling roadways with limited lane marking visibility directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Roadways_With_Limited_Lane_Marking_Visibility_sub_behavior_a",
                                                                                    "id": "168d5f1c-310e-445c-a24f-a7f21a5e3997",
                                                                                    "displayName": "Handling roadways with visible lane boundaries covering \u003c X % of lane longitudinal edge",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Roadways_With_Limited_Lane_Marking_Visibility_sub_behavior_b",
                                                                                    "id": "7b04fb57-9a9a-4d46-9b3e-587686826a41",
                                                                                    "displayName": "Handling roadways with visible lane boundaries covering \u003e= X % of lane longitudinal edge",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_b",
                                                                    "id": "b7ec4d8e-2261-4196-b4e2-b6882b07096b",
                                                                    "displayName": "[Environment Condition] Handling Illumination - Natural Illumination",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior",
                                                                            "id": "3dcdd61c-a941-45fd-b7a5-e7b7a0a8f872",
                                                                            "displayName": "Which sub-behavior of Handling Illumination - Natural Illumination directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_a",
                                                                                    "id": "7231fe6a-9e33-4f29-9eab-392b05327238",
                                                                                    "displayName": "Handling day-time driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_b",
                                                                                    "id": "02871fe6-77b1-4934-bc91-a36a21e64fa6",
                                                                                    "displayName": "Handling night-time driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_c",
                                                                                    "id": "83bd0225-e927-48a1-86cd-4b057fe864f0",
                                                                                    "displayName": "Handling low-ambient lighting condition",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Illumination_Natural_Illumination_sub_behavior_d",
                                                                                    "id": "765c5110-335d-4bfb-90df-0ccac4ad94db",
                                                                                    "displayName": "Handling glare due to natural lighting conditions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_c",
                                                                    "id": "032ccaa7-6033-4f88-820d-8f6b23b43b52",
                                                                    "displayName": "[Environment Condition] Handling Weather - Temperature",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Temperature_sub_behavior",
                                                                            "id": "f1cd8331-8d94-41e0-a106-1b34308d3e55",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Temperature directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_a",
                                                                                    "id": "855e0218-888b-4fb5-968e-87798b68806e",
                                                                                    "displayName": "Handling ambient temperatures between [3.3, 31] deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_b",
                                                                                    "id": "e3cb00b8-7f41-4600-8194-eec1f7264e72",
                                                                                    "displayName": "Handling ambient temperatures \u003c 0 deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_c",
                                                                                    "id": "6aebdb7e-c132-4fda-81c0-9b906576e408",
                                                                                    "displayName": "Handling ambient temperatures between [0, 3.3) deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_d",
                                                                                    "id": "d0e9cf97-0881-44e3-ac3c-d92fa9124ae8",
                                                                                    "displayName": "Handling ambient temperatures between (31, 38] deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_e",
                                                                                    "id": "e1487e63-79aa-45a9-8a57-d10fd5c983d8",
                                                                                    "displayName": "Handling ambient temperatures between (38, 43] deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Temperature_sub_behavior_f",
                                                                                    "id": "376cacd9-9829-4609-98a0-7c93c6a7069a",
                                                                                    "displayName": "Handling ambient temperatures \u003e 43 deg Celsius",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_d",
                                                                    "id": "e66e8bdb-fc16-4dbd-8740-a410cc9e045b",
                                                                    "displayName": "[Environment Condition] Handling Weather - Wind",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Wind_sub_behavior",
                                                                            "id": "19f1b113-40b6-4dac-94ff-b9d29e76f570",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Wind directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Wind_sub_behavior_a",
                                                                                    "id": "58d9dddd-e6a2-43a2-8bd4-5219518aa551",
                                                                                    "displayName": "Handling sustained winds \u003c= 30 mph and / or gusts \u003c= 46 mph (Wind Advisory)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Wind_sub_behavior_b",
                                                                                    "id": "b9004ad1-bf57-45f3-b0a9-36840ebc8e37",
                                                                                    "displayName": "Handling sustained wind \u003e 40 mph and / or gusts \u003e 58 mph",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Wind_sub_behavior_c",
                                                                                    "id": "4c953a5e-99b9-49f0-a238-9fcd8290f530",
                                                                                    "displayName": "Handling sustained winds (30 - 40] mph and / or gusts (46 - 58] mph (High Wind Warning)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_e",
                                                                    "id": "8090571d-6298-4f7b-b817-dbf80efac33d",
                                                                    "displayName": "[Environment Condition] Handling Weather - Rain",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Rain_sub_behavior",
                                                                            "id": "0dd4652e-3b43-4985-a16a-b1df2ea184fc",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Rain directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Rain_sub_behavior_a",
                                                                                    "id": "6331546d-a129-4d4e-9941-1609990de900",
                                                                                    "displayName": "Handling rainfall between (0, 23.7) mm/hr",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Rain_sub_behavior_b",
                                                                                    "id": "f10b8b71-a359-4ff3-9ff2-97b114d76f31",
                                                                                    "displayName": "Handling rainfall \u003e= 23.7 mm/hr",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_f",
                                                                    "id": "6591afe9-1cfb-4746-914b-52c0029641a1",
                                                                    "displayName": "[Environment Condition] Handling Weather - Fog",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Fog_sub_behavior",
                                                                            "id": "f5fe823c-5c1f-4ec0-9480-8fb63e19080d",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Fog directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Fog_sub_behavior_a",
                                                                                    "id": "9793018d-4346-4033-9b68-dde3addafdef",
                                                                                    "displayName": "Handling fog - between (0, 1.7) FOP (visibility \u003e 1/4 mile)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Fog_sub_behavior_b",
                                                                                    "id": "9d28ed88-9dc4-4592-b9b3-3b0994d6a7e5",
                                                                                    "displayName": "Handling fog - between [1.7, 9] FOP (visibility \u003c= 1/4 mile)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Fog_sub_behavior_c",
                                                                                    "id": "39114a5d-69e5-4535-b6b6-27138964ec07",
                                                                                    "displayName": "Handling fog \u003e 9 FOP",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_g",
                                                                    "id": "16bd4fce-833a-4b16-affc-8099779ad854",
                                                                    "displayName": "[Environment Condition] Handling Weather - Snow",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Snow_sub_behavior",
                                                                            "id": "e6d4b213-2d99-4a5a-aa21-1838d3be715a",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Snow directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Snow_sub_behavior_a",
                                                                                    "id": "ebd2d2eb-88c5-4ac2-88f7-226b13197191",
                                                                                    "displayName": "Handling snow",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_h",
                                                                    "id": "f5c2cc0d-7de2-48ca-93bf-683b3c2cf005",
                                                                    "displayName": "[Environment Condition] Handling Weather - Hail",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Hail_sub_behavior",
                                                                            "id": "9e35501e-bc02-4b49-974e-6ffac8c944db",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Hail directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Hail_sub_behavior_a",
                                                                                    "id": "817f6f82-ca80-4b92-93b0-efc262ced249",
                                                                                    "displayName": "Handling hail",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_i",
                                                                    "id": "c59709b6-bf3c-43b9-9944-349c311d47fc",
                                                                    "displayName": "[Environment Condition] Handling Weather - Heat Haze",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Weather_Heat_Haze_sub_behavior",
                                                                            "id": "f923a0c0-0a2f-4a00-b4e0-c79b3f34e4b4",
                                                                            "displayName": "Which sub-behavior of Handling Weather - Heat Haze directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Weather_Heat_Haze_sub_behavior_a",
                                                                                    "id": "4027334e-1b57-4d7a-99c0-26711d83b86e",
                                                                                    "displayName": "Handling heat haze",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_j",
                                                                    "id": "5bb77186-6e1e-49e0-bd7e-019c4b9c20cf",
                                                                    "displayName": "[Environment Condition] Handling Airborne Particulates (sand, smoke, etc)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Airborne_Particulates_sub_behavior",
                                                                            "id": "a92a92ab-2c6b-4c31-a91c-8ffd75de50d4",
                                                                            "displayName": "Which sub-behavior of Handling Airborne Particulates (sand, smoke, etc) directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_a",
                                                                                    "id": "86df2303-c11d-42b2-9dfd-605c2896c5cc",
                                                                                    "displayName": "Handling other particulates",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_b",
                                                                                    "id": "ae7cb087-2ac8-4be7-a4cf-77bf7b0af4a1",
                                                                                    "displayName": "Handling dust with visibility \u003c= 1/4 mile",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_c",
                                                                                    "id": "a235fbc9-08f8-481e-b259-26ad1048869a",
                                                                                    "displayName": "Handling dust with visibility \u003e 1/4 mile",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_d",
                                                                                    "id": "8f516d93-b967-45e7-9622-af5fb1c578c3",
                                                                                    "displayName": "Handling non-precipitating water droplets (water sprays, etc.)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_e",
                                                                                    "id": "0e1854f1-1a7e-4ef6-8b3e-5ca5382cac4e",
                                                                                    "displayName": "Handling smoke or pollution with AQI \u003c 200",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_f",
                                                                                    "id": "69e0247b-2398-48cc-83c9-902a595160a6",
                                                                                    "displayName": "Handling smoke or pollution with AQI \u003e= 200",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Airborne_Particulates_sub_behavior_g",
                                                                                    "id": "2e03a6e2-a069-4bbd-8ced-b162965d7030",
                                                                                    "displayName": "Handling volcanic ash",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_k",
                                                                    "id": "bbe75fdd-45fa-4b44-97f9-f00df4333dbb",
                                                                    "displayName": "[Environment Condition] Handling Standing / Flowing Water",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior",
                                                                            "id": "d624ab5a-d867-43b7-832c-f9c545967502",
                                                                            "displayName": "Which sub-behavior of Handling Standing / Flowing Water directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_a",
                                                                                    "id": "4854aaf5-53a8-42cb-890a-ae693468c8ec",
                                                                                    "displayName": "Handling standing / flowing water on road \u003c1cm (very shallow puddle)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_b",
                                                                                    "id": "c32a7315-94ad-45ab-883e-b51bf01df9e7",
                                                                                    "displayName": "Handling standing / flowing water on road [1, 2) cm (shallow puddle)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_c",
                                                                                    "id": "547b2aea-6b47-4cd0-84b1-bcf5e56914f6",
                                                                                    "displayName": "Handling standing / flowing water on road [2, 4) cm (significant splash at high speed)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_d",
                                                                                    "id": "9ca4b986-4d41-4ecc-a3c6-d6b7de41dbbf",
                                                                                    "displayName": "Handling standing / flowing water on road [4, 8) cm (significant splash at low speed)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_e",
                                                                                    "id": "97a1dbcb-e52e-4e9b-b67b-1319dbbe4ce6",
                                                                                    "displayName": "Handling standing / flowing water on road [8, 14) cm (deep puddle)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Standing_and_Flowing_Water_sub_behavior_f",
                                                                                    "id": "89ff8872-432f-4e0e-8a6c-7e3e82121558",
                                                                                    "displayName": "Handling standing / flowing water on road \u003e= 14cm (flooded roadway)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_l",
                                                                    "id": "a50bd3ce-cffa-4d20-a254-e261477b551d",
                                                                    "displayName": "[Environment Condition] Handling Temporary Roadway Conditions - Reduced Traction",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior",
                                                                            "id": "9ed2df4d-f79c-43af-9451-f3f09679fe74",
                                                                            "displayName": "Which sub-behavior of Handling Temporary Roadway Conditions - Reduced Traction directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_a",
                                                                                    "id": "81697932-f775-40e9-a99c-b4a259ba0e40",
                                                                                    "displayName": "Handling wet roads - no standing water",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_b",
                                                                                    "id": "9c5903fa-2af5-4211-9b75-816f65fb5420",
                                                                                    "displayName": "Handling road surface covered with sand",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_c",
                                                                                    "id": "8b3a37e6-f71f-4e47-a359-520361968328",
                                                                                    "displayName": "Handling road surface covered with ice",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Temporary_Roadway_Conditions_Reduced_Traction_sub_behavior_d",
                                                                                    "id": "fe52e999-99c4-4b43-ba55-09b4126cdb83",
                                                                                    "displayName": "Handling road surface covered with snow",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ec_Environmental_Conditions_behaviors_m",
                                                                    "id": "11b48efc-0cb2-4fa5-b51d-256593b7687c",
                                                                    "displayName": "[Environment Condition] Handling Artificial Conditions - Sensor Interference/degradation",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior",
                                                                            "id": "4316c3b4-d84d-4e67-a043-3a3a0f4a9a9c",
                                                                            "displayName": "Which sub-behavior of Handling Artificial Conditions - Sensor Interference/degradation directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_a",
                                                                                    "id": "4b093c68-0c1f-4fbe-9375-f9f7904c554b",
                                                                                    "displayName": "Handling artificial illumination (eg oncoming car lights)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_b",
                                                                                    "id": "41038458-8168-4a49-a070-cd188a467885",
                                                                                    "displayName": "Handling non-malicious sensor occlusion (bug spatter, bird droppings, mud splatter, etc)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_c",
                                                                                    "id": "889dfe4b-f91c-4f17-9796-7a699d190958",
                                                                                    "displayName": "Handling malicious sensor occlusion",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ec_Handling_Artificial_Conditions_Sensor_Interference_Degradation_sub_behavior_d",
                                                                                    "id": "c669f7f8-3d69-47ae-901a-ac80c04dccba",
                                                                                    "displayName": "Handling radio waves, other external signal interferences",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                }
                                                            ],
                                                            "status": ""
                                                        }
                                                    ],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "ec_is_Environmental_Conditions_b",
                                                    "id": "6f744844-c7f7-4474-8dc0-0e021b404f0a",
                                                    "displayName": "No",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "ri_is_Roadway_Infrastructure",
                                            "id": "c6e1791e-b99d-4af5-8d16-473f9af4f8c4",
                                            "displayName": "Did the Roadway Infrastructure directly cause the hazardous behavior?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "ri_is_Roadway_Infrastructure_a",
                                                    "id": "d55d8ae1-1b56-40b0-bc0f-183c5ed4e3bc",
                                                    "displayName": "Yes",
                                                    "nodeType": "branch",
                                                    "childNodes": [
                                                        {
                                                            "name": "ri_Roadway_Infrastructure_behaviors",
                                                            "id": "7bfea942-76cf-4214-8d5a-641bf445b3bf",
                                                            "displayName": "Which Roadway Infrastructure directly cause the hazardous behavior?",
                                                            "nodeType": "choice",
                                                            "childNodes": [
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_a",
                                                                    "id": "8601cd7e-d29b-4b6d-bcff-35f3b38ab4b5",
                                                                    "displayName": "[End to End Nav] Performing reversing",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Performing_reversing_sub_behavior",
                                                                            "id": "97b10358-0a17-42bc-9e2d-0f3b9b854c43",
                                                                            "displayName": "Which sub-behavior of Performing reversing directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Performing_reversing_sub_behavior_a",
                                                                                    "id": "d7b8bbde-dd20-4553-a3af-26fa5499994b",
                                                                                    "displayName": "Performing Reverse on public right-of-way",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Performing_reversing_sub_behavior_b",
                                                                                    "id": "155c9dc7-b9ea-4e5c-b733-2e4cdb23f61c",
                                                                                    "displayName": "Performing multi-point turns / k-turns on public right of way",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_b",
                                                                    "id": "1f335d34-7de5-4ca9-b7de-ff48d4fcd387",
                                                                    "displayName": "[End to End Nav] Navigation",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Navigation_sub_behavior",
                                                                            "id": "cb963c82-ce1a-4c63-8e83-209894283fa7",
                                                                            "displayName": "Which sub-behavior of Navigation directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Navigation_sub_behavior_a",
                                                                                    "id": "90885d6e-85f1-4ed4-af22-da93d0e3f977",
                                                                                    "displayName": "Navigation - Infinite route",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Navigation_sub_behavior_b",
                                                                                    "id": "d245e0ae-853e-46d7-a4dc-68f340aff161",
                                                                                    "displayName": "Navigation - Route following",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_c",
                                                                    "id": "61b5d15c-1aa9-4a63-a8fb-fccf878f1b04",
                                                                    "displayName": "[Intersection - Protected] Handling intersection controlled by persistent traffic light",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior",
                                                                            "id": "44c40c87-65d8-421b-ad64-783b128ad0e6",
                                                                            "displayName": "Which sub-behavior of Handling intersection controlled by persistent traffic light directly caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior_a",
                                                                                    "id": "95e074c7-8432-43f0-92e8-83b8fb3f0a9d",
                                                                                    "displayName": "Handling Hazard / Early Warning Indicator Light (Flashing Yellow Warning Lights)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior_b",
                                                                                    "id": "82f4c8b5-efb0-464b-954b-75362c33a51b",
                                                                                    "displayName": "Navigating Highway On-Ramp Traffic Lights (out-of-phase traffic light intersections - solid circles)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_intersection_controlled_by_persistent_traffic_light_sub_behavior_c",
                                                                                    "id": "6101f038-70a4-45bc-b1d4-4169d01aa432",
                                                                                    "displayName": "Navigate Standard Traffic Light Configurations",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_d",
                                                                    "id": "4efc9ac0-df73-4597-a92d-c7f1c8a8592b",
                                                                    "displayName": "[Lane Changes] Handling lane change",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_lane_change_sub_behavior",
                                                                            "id": "5240cf64-a160-40b7-93c8-da0729866474",
                                                                            "displayName": "Which sub-behavior of Handling lane change caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_a",
                                                                                    "id": "6467868d-eca6-49fe-a3a7-7e52c38084c5",
                                                                                    "displayName": "Handling lane change for route",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_b",
                                                                                    "id": "a03c8019-30a0-4c51-a7f2-2cda304d84c9",
                                                                                    "displayName": "Handling lane change for time (PASS maneuver - Pass At Speed Safely)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_c",
                                                                                    "id": "8e574421-5455-4330-9d1c-26351a849f7e",
                                                                                    "displayName": "Handling lane change for preference (out of left-most lane)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_lane_change_sub_behavior_d",
                                                                                    "id": "42cd07c6-686a-459a-b9e2-37d25e291a80",
                                                                                    "displayName": "Handling lane change on driver demand",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_e",
                                                                    "id": "d4d828fb-6c3e-4c37-8679-0190de40a858",
                                                                    "displayName": "[Lane Changes] Handling merges",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_merges_sub_behavior",
                                                                            "id": "559fccfd-5210-4258-98e4-4e4bf4d494ef",
                                                                            "displayName": "Which sub-behavior of Handling merges caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_merges_sub_behavior_a",
                                                                                    "id": "230ef409-d8b2-4554-a840-c38a5ca7a327",
                                                                                    "displayName": "Handling zipper merges (includes highway on/off ramp)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_f",
                                                                    "id": "dda45fc5-81bd-4876-8f61-58baab9f290f",
                                                                    "displayName": "[Lane Keeping] Handling various ego vehicle speeds",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior",
                                                                            "id": "0cc59141-9c06-41ad-b9e3-cbbae2bd7bab",
                                                                            "displayName": "Which sub-behavior of Handling various ego vehicle speeds caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_a",
                                                                                    "id": "3f44b4e5-f138-4ca8-a0c9-067449e2facd",
                                                                                    "displayName": "Driving at speeds \u003c= 40 mph (PSL up to 40 mph)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_b",
                                                                                    "id": "70212eed-727f-4d20-9093-0d01567dc949",
                                                                                    "displayName": "Driving at speeds (40, 75] mph (PSL up to 75 mph)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_c",
                                                                                    "id": "e1f25c1d-8525-4bf7-9494-b3c37a21c0fb",
                                                                                    "displayName": "Driving at speeds (75, 85] mph (PSL up to 85 mph)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_ego_vehicle_speeds_sub_behavior_d",
                                                                                    "id": "9adb5ce3-d4e2-46c7-8c10-312002950b21",
                                                                                    "displayName": "Driving at speeds \u003e 85 mph",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_g",
                                                                    "id": "8ce57c23-417d-47b0-ac4e-ad1d268a0160",
                                                                    "displayName": "[Lane Keeping] Nominal driving (drive straight)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Nominal_driving_sub_behavior",
                                                                            "id": "5ffa5184-317d-4cc4-8484-3da6ad21c88c",
                                                                            "displayName": "Which sub-behavior of Nominal driving (drive straight) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_a",
                                                                                    "id": "e9e2e739-7b33-40a7-899d-09be17be0b8e",
                                                                                    "displayName": "Performing nominal driving - lane centering",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_b",
                                                                                    "id": "15109476-9c0d-442e-9613-7f67ce1d3479",
                                                                                    "displayName": "Performing nominal driving - maintain distance to lead car",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_c",
                                                                                    "id": "67bfc8d5-6472-43c7-93c1-b70cdf7ad5d7",
                                                                                    "displayName": "Performing nominal driving - maintain speed",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_d",
                                                                                    "id": "131bf937-87fc-44fd-8201-95ae7e9ffdd3",
                                                                                    "displayName": "Handling curved roads",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_e",
                                                                                    "id": "b4f4df6c-f4e3-4d97-a235-64195f33a7bb",
                                                                                    "displayName": "Performing lane bias [in-lane nudge]",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Nominal_driving_sub_behavior_f",
                                                                                    "id": "06affbe6-0653-4411-bba5-263f9beb9172",
                                                                                    "displayName": "Performing lane bias [out-of-lane nudge]",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_h",
                                                                    "id": "8659acc2-1d2d-49e9-afad-0410aaa7a947",
                                                                    "displayName": "[Lane Keeping] Special Rule Modified Travel - Other",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior",
                                                                            "id": "81038eff-0ada-42b9-a365-b1ff5b3eb124",
                                                                            "displayName": "Which sub-behavior of Special Rule Modified Travel - Other caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_a",
                                                                                    "id": "4adc92ac-925f-461a-b13b-ed3d3a741ef1",
                                                                                    "displayName": "Driving in restricted lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_b",
                                                                                    "id": "d06ab0a3-e99f-4753-894a-3cc66e46157a",
                                                                                    "displayName": "Driving in HOV lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_c",
                                                                                    "id": "f2e0b86a-2e91-4b8f-ac46-0da871f560bf",
                                                                                    "displayName": "Driving in reversible lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_d",
                                                                                    "id": "4d454514-212f-4ad5-8e75-d7a170c25a9e",
                                                                                    "displayName": "Driving in time-dependent lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_e",
                                                                                    "id": "8f7af328-7e34-48c9-8ef5-c5f337a4ce2b",
                                                                                    "displayName": "Driving in variable speed lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Special_Rule_Modified_Travel_Other_sub_behavior_f",
                                                                                    "id": "752a4128-e145-4085-b9bb-37d29a63fce9",
                                                                                    "displayName": "Enter restricted or special purpose lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_i",
                                                                    "id": "a96370df-55ce-4607-bdec-886373a6b9dd",
                                                                    "displayName": "[Lane Keeping] Handling special structures",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_special_structures_sub_behavior",
                                                                            "id": "63c08ad0-0e0d-4328-a299-f7fa45e0103c",
                                                                            "displayName": "Which sub-behavior of Handling special structures caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_special_structures_sub_behavior_a",
                                                                                    "id": "211ff7f6-a98e-4306-b447-ed328afd017e",
                                                                                    "displayName": "Handling highway on / off ramps - Highway-to-highway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_special_structures_sub_behavior_b",
                                                                                    "id": "ef220b4a-a9ba-4746-a324-d402d54dd392",
                                                                                    "displayName": "Handling freeway on / off ramps",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_special_structures_sub_behavior_c",
                                                                                    "id": "c82550d4-e845-4fb9-a675-3d22a8466105",
                                                                                    "displayName": "Handling toll booths",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_j",
                                                                    "id": "cca3dfcd-ec89-4102-94cc-437986f7c23a",
                                                                    "displayName": "[Lane Keeping] Driving in specific areas - bridges",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Driving_in_specific_areas_bridges_sub_behavior",
                                                                            "id": "3a603911-1757-4549-8fc0-3f9b2093a975",
                                                                            "displayName": "Which sub-behavior of Driving in specific areas - bridges caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_bridges_sub_behavior_a",
                                                                                    "id": "b6c69500-13a2-4f07-88e9-ae2bfdd5db47",
                                                                                    "displayName": "Handling overpasses or bridges \u003c=100m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_bridges_sub_behavior_b",
                                                                                    "id": "091c261f-d421-4572-842d-69b12bac401f",
                                                                                    "displayName": "Handling bridges 100m-400m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_bridges_sub_behavior_c",
                                                                                    "id": "7942a914-bffa-4477-8538-516adb852ff9",
                                                                                    "displayName": "Handling bridges \u003e 400m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_k",
                                                                    "id": "a577d34c-8654-4525-acd8-9f94d4d93b78",
                                                                    "displayName": "[Lane Keeping] Driving in specific areas - tunnels",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Driving_in_specific_areas_tunnels_sub_behavior",
                                                                            "id": "63261bc3-9dab-40e4-b98d-a926af324533",
                                                                            "displayName": "Which sub-behavior of Driving in specific areas - tunnels caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_tunnels_sub_behavior_a",
                                                                                    "id": "a2275e2d-d940-4c78-95c7-08a0eb1c5abe",
                                                                                    "displayName": "Handling underpasses or tunnels \u003c=200m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Driving_in_specific_areas_tunnels_sub_behavior_b",
                                                                                    "id": "2130c1a2-9a7a-48bd-aec9-8926d7fcbdb4",
                                                                                    "displayName": "Handling tunnels \u003e200m long",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_l",
                                                                    "id": "69925d8e-f9fb-4952-88d5-4497434ded52",
                                                                    "displayName": "[ODD Scenery] Direction of Traffic",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Direction_of_Traffic_sub_behavior",
                                                                            "id": "b3d9a30a-4319-4ed0-a57d-e41454c6df24",
                                                                            "displayName": "Which sub-behavior of Direction of Traffic caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Direction_of_Traffic_sub_behavior_a",
                                                                                    "id": "df85b4c4-65e1-412a-9207-1564e35550d0",
                                                                                    "displayName": "Performing left-hand side driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Direction_of_Traffic_sub_behavior_b",
                                                                                    "id": "d4159f40-83d8-422e-83d4-18c1ac129c58",
                                                                                    "displayName": "Performing right-hand side driving",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_m",
                                                                    "id": "ccbaeb47-65f6-4219-82c8-57c09941af33",
                                                                    "displayName": "[ODD Scenery] Handling various road surface types",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_road_surface_types_sub_behavior",
                                                                            "id": "c3764d15-2263-4e38-ad66-7d8bc599db2e",
                                                                            "displayName": "Which sub-behavior of Handling various road surface types caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_road_surface_types_sub_behavior_a",
                                                                                    "id": "eb9e6e50-a1a0-4a67-9f0a-7a3cf9997091",
                                                                                    "displayName": "Handling asphalt / paved roads",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_road_surface_types_sub_behavior_b",
                                                                                    "id": "d3da772a-695f-4dcd-9f5f-fd2a6b2896eb",
                                                                                    "displayName": "Handling road surfaces with metal plates",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_n",
                                                                    "id": "aa40f347-bbbe-422e-a840-da87129caee7",
                                                                    "displayName": "[ODD Scenery] Handling various lane widths",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_lane_widths_sub_behavior",
                                                                            "id": "67147c55-199e-4106-a63d-65f0533759a4",
                                                                            "displayName": "Which sub-behavior of Handling various lane widths caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_widths_sub_behavior_a",
                                                                                    "id": "d205a042-3ad6-4fc2-a9e0-d1c0982c7c7d",
                                                                                    "displayName": "Handling lane widths \u003c 2.7 m (narrow lanes)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_widths_sub_behavior_b",
                                                                                    "id": "2cfa6a18-44af-49fa-b152-5dd467263654",
                                                                                    "displayName": "Handling lane widths 2.7 - 3.5 m (semi-narrow lanes)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_widths_sub_behavior_c",
                                                                                    "id": "e211ba59-5299-4b83-a78d-26e7de7d6542",
                                                                                    "displayName": "Handling lane widths \u003e= 3.5 m (wide lanes)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_o",
                                                                    "id": "44af246a-2435-4c71-bd8a-f5588610a9ae",
                                                                    "displayName": "[ODD Scenery] Handling various lane grades",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_various_lane_grades_sub_behavior",
                                                                            "id": "cd9e9a5a-6da0-4ac6-998f-4ec7cb8adfb0",
                                                                            "displayName": "Which sub-behavior of Handling various lane grades caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_grades_sub_behavior_a",
                                                                                    "id": "ce5a61e7-1ba8-4ca8-83a0-33def21b032b",
                                                                                    "displayName": "Handling lane grades 0 - 20%",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_grades_sub_behavior_b",
                                                                                    "id": "2db0e65e-b259-451d-bc42-180e1e765138",
                                                                                    "displayName": "Handling lane grades 20 - 27%",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_various_lane_grades_sub_behavior_c",
                                                                                    "id": "0bf72879-9c5d-4566-afa9-a410795414bd",
                                                                                    "displayName": "Handling lane grades \u003e 27%",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_p",
                                                                    "id": "addfb3ef-f893-4a4a-bcb8-9a41010e6e03",
                                                                    "displayName": "[ODD Scenery] Handling turn curvature",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_turn_curvature_sub_behavior",
                                                                            "id": "e722dcc8-8076-49e0-acb9-bb2f4a9c013f",
                                                                            "displayName": "Which sub-behavior of Handling turn curvature caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_turn_curvature_sub_behavior_a",
                                                                                    "id": "01c76275-21aa-4d5e-b96f-a5822e1e9176",
                                                                                    "displayName": "Handling turns or curvature with radius 15 - 150 m",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "ri_Handling_turn_curvature_sub_behavior_b",
                                                                                    "id": "30d0b4e7-f992-4ca6-8593-18edca0405c5",
                                                                                    "displayName": "Handling turns or curvature with radius \u003e= 150 m",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_q",
                                                                    "id": "79c7d135-e003-4a37-a210-bba0b803618a",
                                                                    "displayName": "[ODD Scenery] Handling high roll / pitch turns",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Handling_high_roll_pitch_turns_sub_behavior",
                                                                            "id": "f40133c4-dc56-47d6-9537-d9901b99050c",
                                                                            "displayName": "Which sub-behavior of Handling high roll / pitch turns caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Handling_high_roll_pitch_turns_sub_behavior_a",
                                                                                    "id": "6bafe53a-b028-4a29-9c0d-86392c13b851",
                                                                                    "displayName": "Handling high roll / pitch turns (eg - cloverleaf)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "ri_Roadway_Infrastructure_behaviors_r",
                                                                    "id": "70783b24-460a-40b6-9954-d9fe16860669",
                                                                    "displayName": "[ODD Scenery] Driving on various roadway types",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "ri_Driving_on_various_roadway_types_sub_behavior",
                                                                            "id": "8a146348-fad4-4d33-8f00-a61dcd4922a3",
                                                                            "displayName": "Which sub-behavior of Driving on various roadway types caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "ri_Driving_on_various_roadway_types_sub_behavior_a",
                                                                                    "id": "6f5ed2e5-045d-4055-91a5-55c151a88dab",
                                                                                    "displayName": "Driving on limited access freeways",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                }
                                                            ],
                                                            "status": ""
                                                        }
                                                    ],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "ri_is_Roadway_Infrastructure_b",
                                                    "id": "c6d2b0ca-5f24-4d9e-8214-598b356551b2",
                                                    "displayName": "No",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "dc_is_Dynamic_Conditions",
                                            "id": "afae5f25-cbce-43c2-829a-3fb0c4ebc8ac",
                                            "displayName": "Did the Dynamic Conditions directly cause the hazardous behavior?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "dc_is_Dynamic_Conditions_a",
                                                    "id": "c37119ea-a75c-4670-bde3-5f1b9c8deb82",
                                                    "displayName": "Yes",
                                                    "nodeType": "branch",
                                                    "childNodes": [
                                                        {
                                                            "name": "dc_Dynamic_Conditions_behaviors",
                                                            "id": "28dde0a8-e5e0-46a4-9616-769b8a4d37ed",
                                                            "displayName": "Which Dynamic Conditions directly cause the hazardous behavior?",
                                                            "nodeType": "choice",
                                                            "childNodes": [
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_a",
                                                                    "id": "dcb8f74d-b214-46ef-a4dc-acb3432fc44f",
                                                                    "displayName": "[Lane Keeping] Specific Actor Interactions - Respond to Other Road Agent (ORA) actions",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior",
                                                                            "id": "c959e753-7d1e-4063-92c0-351bc1c38e4c",
                                                                            "displayName": "Which sub-behavior of Specific Actor Interactions - Respond to Other Road Agent (ORA) actions caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_a",
                                                                                    "id": "2fe4c31d-d129-4d2f-beb2-65a80c264c4e",
                                                                                    "displayName": "Responding to Other Road Agent (ORA) cut-ins",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_b",
                                                                                    "id": "54b2620d-904c-451a-89a2-4397cf288d10",
                                                                                    "displayName": "Responding to ORA reversing in drivable area",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_c",
                                                                                    "id": "5745f6cd-4529-4d22-a6a6-b76a8a8cdd8c",
                                                                                    "displayName": "Handling ORA-ORA Collisions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_d",
                                                                                    "id": "0fd25df7-dc3a-43ac-be62-d945aff6235d",
                                                                                    "displayName": "Handling Non-Ped VRU Lane-splitting",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_ORA_sub_behavior_e",
                                                                                    "id": "9a402741-8621-4c11-ad1c-cf81d24a94f7",
                                                                                    "displayName": "Responding to tailgating ORAs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_b",
                                                                    "id": "0241d640-0172-4ad3-a839-9fab75e4c148",
                                                                    "displayName": "[Lane Keeping] Specific Actor Interactions - Handle Large or Unusual Vehicles",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior",
                                                                            "id": "e6eb4b85-7f3b-423f-a2ec-82f4b7441007",
                                                                            "displayName": "Which sub-behavior of Specific Actor Interactions - Handle Large or Unusual Vehicles caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_a",
                                                                                    "id": "6cc3ab6e-968f-4d31-9f15-23de6478f6c4",
                                                                                    "displayName": "Handling large vehicles",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_b",
                                                                                    "id": "c1e6a2e6-c703-4269-9652-988e2676a19a",
                                                                                    "displayName": "Handling articulated vehicles",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_c",
                                                                                    "id": "82643241-6e92-492e-b402-c8be4e427a69",
                                                                                    "displayName": "Handling vehicles with objects extending beyond the vehicle frame",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Actor_Interactions_Handle_Large_or_Unusual_Vehicles_sub_behavior_d",
                                                                                    "id": "97861f89-9732-4f00-8391-6799614b760d",
                                                                                    "displayName": "Handling other unusual vehicles (non-VRU)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_c",
                                                                    "id": "00a337f2-5f9d-4a6b-b4bc-531235d764c6",
                                                                    "displayName": "[Lane Obstructions] Handling double-parked vehicles (DPV)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_double_parked_vehicles_sub_behavior",
                                                                            "id": "9f85e11a-be3a-40de-8452-177aabb2021b",
                                                                            "displayName": "Which sub-behavior of Handling double-parked vehicles (DPV) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_double_parked_vehicles_sub_behavior_a",
                                                                                    "id": "d0b9d13e-2c10-4774-9765-3b620ab872cb",
                                                                                    "displayName": "Handling double-parked or stalled vehicles (DPV) - same direction traffc lanes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_d",
                                                                    "id": "64742355-2651-4e8c-bf1f-2b3bfe6309fc",
                                                                    "displayName": "[Lane Obstructions] Handling Animals",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Animals_sub_behavior",
                                                                            "id": "f0b861bd-aac1-427a-8e1b-8cc6150ddfbb",
                                                                            "displayName": "Which sub-behavior of Handling Animals caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_a",
                                                                                    "id": "4b25bd53-3d40-40a5-ac9f-9d84ec853a45",
                                                                                    "displayName": "Handling flying animals",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_b",
                                                                                    "id": "71d25d67-6d77-4b5a-83fb-865df7743400",
                                                                                    "displayName": "Handling large non-pet animals (deer, etc.)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_c",
                                                                                    "id": "4ebd31dc-ec0b-4de5-aaed-63528395f9a6",
                                                                                    "displayName": "Handling other critical objects (pets, protected species, etc)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Animals_sub_behavior_d",
                                                                                    "id": "f48c08b5-4abb-4423-aed3-f5c2d784f60d",
                                                                                    "displayName": "Handling small non-pet animals (squirrels, etc.)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_e",
                                                                    "id": "f17dd345-ecde-4fcd-abe1-bf37f0478690",
                                                                    "displayName": "[Lane Obstructions] Handling Debris and Vegetation",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Debris_and_Vegetation_sub_behavior",
                                                                            "id": "15799d18-8f17-4e73-a9b3-18af4bd561b3",
                                                                            "displayName": "Which sub-behavior of Handling Debris and Vegetation caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Debris_and_Vegetation_sub_behavior_a",
                                                                                    "id": "fa40a5b4-606d-4de5-9bef-44342b4a66a0",
                                                                                    "displayName": "Handling debris on roadway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Debris_and_Vegetation_sub_behavior_b",
                                                                                    "id": "0a5cd67f-7b2f-4996-981c-084c62339354",
                                                                                    "displayName": "Handling vegetation",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Debris_and_Vegetation_sub_behavior_c",
                                                                                    "id": "a91a1aa8-0ee5-4255-a463-4aa81456004e",
                                                                                    "displayName": "Handling blowing debris",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_f",
                                                                    "id": "0b4d28d7-b1ae-4d05-9b38-5ae2e55a58d4",
                                                                    "displayName": "[Lane Obstructions] Handling Critical Damaged Roads",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior",
                                                                            "id": "0c21c261-2102-4550-bae2-1dd1a8f02428",
                                                                            "displayName": "Which sub-behavior of Handling Critical Damaged Roads caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_a",
                                                                                    "id": "a3ed1bae-65f5-4000-a284-23a43d32afd2",
                                                                                    "displayName": "Handling pits / open holes not restricted by traffic signage",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_b",
                                                                                    "id": "e5ea7c5b-abd8-49fc-80db-350f916157d0",
                                                                                    "displayName": "Handling sinkholes in roadway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_c",
                                                                                    "id": "64dcd43e-ad1f-4ba2-bdb8-59607dd88fb6",
                                                                                    "displayName": "Handling landslide-removed roadway",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Critical_Damaged_Roads_sub_behavior_d",
                                                                                    "id": "33a86c51-6471-423e-b3da-34b2c2efdeb6",
                                                                                    "displayName": "Handling collapsed bridge",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_g",
                                                                    "id": "098d7d23-4901-4596-984f-3bfe16721de0",
                                                                    "displayName": "[Lane Obstructions] Handling Non-Critical Damaged Roads",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior",
                                                                            "id": "72b42e75-1f11-4688-8780-ab955dca8b21",
                                                                            "displayName": "Which sub-behavior of Handling Non-Critical Damaged Roads caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_a",
                                                                                    "id": "33705ac1-612a-4133-8bdf-7da7d676853f",
                                                                                    "displayName": "Handling road surface with cracks",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_b",
                                                                                    "id": "25ac04ac-66c3-46cd-8c69-837db1be9eed",
                                                                                    "displayName": "Handling road surface with potholes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_c",
                                                                                    "id": "8b914c7f-cf20-4ae5-af7b-18ed930337e6",
                                                                                    "displayName": "Handling road surface with ruts",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Critical_Damaged_Roads_sub_behavior_d",
                                                                                    "id": "f8506b2b-4dfa-4caf-a232-9a6cc749fccf",
                                                                                    "displayName": "Handling road surface with swells (upward bulges on the road surface)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_h",
                                                                    "id": "e8644169-a7e7-47c8-b275-07984e29718d",
                                                                    "displayName": "[Scenes] Responding to static EMV scenes",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Responding_to_static_EMV_scenes_sub_behavior",
                                                                            "id": "4a78f0d4-eaa2-4274-9c54-e9fe09e973fc",
                                                                            "displayName": "Which sub-behavior of Responding to static EMV scenes caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Responding_to_static_EMV_scenes_sub_behavior_a",
                                                                                    "id": "42046c40-77b7-46b8-9ca2-ffdd074a7532",
                                                                                    "displayName": "Responding to EMV scenes (static EMV)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_static_EMV_scenes_sub_behavior_b",
                                                                                    "id": "17ef7070-1479-4384-878c-f6d8c7181510",
                                                                                    "displayName": "Handling fire hoses",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_static_EMV_scenes_sub_behavior_c",
                                                                                    "id": "561640f6-367b-4739-939c-d5c6f1440b17",
                                                                                    "displayName": "Handling flares",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_i",
                                                                    "id": "cd004f0c-3234-4444-bef9-38914bd0bbc9",
                                                                    "displayName": "[Scenes] Handling temporary traffic restrictions (TTR) - Channelization",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_TTR_Channelization_sub_behavior",
                                                                            "id": "45969bd6-2e78-43de-ab15-01eeadf5d8c3",
                                                                            "displayName": "Which sub-behavior of Handling temporary traffic restrictions (TTR) - Channelization caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_TTR_Channelization_sub_behavior_a",
                                                                                    "id": "c3d5e3ea-81ca-47b0-b8d8-119572215643",
                                                                                    "displayName": "Handling channelization - lane boundary divergence \u003c= defined threshold from baseline conditions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_TTR_Channelization_sub_behavior_b",
                                                                                    "id": "f370226b-67d2-4424-b5b4-a5b76bf33dda",
                                                                                    "displayName": "Handling channelization - lane boundary divergence \u003e than defined threshold from baseline conditions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_j",
                                                                    "id": "0ceaeb3e-07d1-474d-b02b-0160d6cbe5ee",
                                                                    "displayName": "[Scenes] Handling temporary traffic restrictions (TTR) - Road Closure",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_TTR_Road_Closure_sub_behavior",
                                                                            "id": "5f5f27da-8e4c-4f77-9748-7bfcd5c61058",
                                                                            "displayName": "Which sub-behavior of Handling temporary traffic restrictions (TTR) - Road Closure caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_TTR_Road_Closure_sub_behavior_a",
                                                                                    "id": "018a1437-e753-45f5-846b-7b7e628752ac",
                                                                                    "displayName": "Responding to traffic signs causing road closure",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_TTR_Road_Closure_sub_behavior_b",
                                                                                    "id": "4392aa3b-9ccb-4630-907b-c401157b0588",
                                                                                    "displayName": "Responding to objects causing road closure",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_k",
                                                                    "id": "bafdc1ea-96c2-4dec-969b-22f9b37d48e7",
                                                                    "displayName": "[Scenes] Handling temporary traffic restrictions (TTR) - Pits / Open Holes",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_TTR_Pits_Open_Holes_sub_behavior",
                                                                            "id": "43bbba28-ba0e-45f0-a05c-19a5d4ed1fbc",
                                                                            "displayName": "Which sub-behavior of Handling temporary traffic restrictions (TTR) - Pits / Open Holes caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_TTR_Pits_Open_Holes_sub_behavior_a",
                                                                                    "id": "bbeb5a6c-9e95-49b0-b315-5a3de0b71081",
                                                                                    "displayName": "Handling pits / open holes",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_l",
                                                                    "id": "b2ba6e0a-8a30-4013-a9d0-363224dfac2b",
                                                                    "displayName": "[SPA] Specific Scenes - Handling active rear/oncoming EMVs",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior",
                                                                            "id": "8dbadc43-4769-4ee3-a0cb-2973c35b4f9f",
                                                                            "displayName": "Which sub-behavior of Specific Scenes - Handling active rear/oncoming EMVs caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior_a",
                                                                                    "id": "6b300b11-4819-4a0c-88cf-479ef2248bd2",
                                                                                    "displayName": "Handling active rear EMVs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior_b",
                                                                                    "id": "41d6788e-42e9-40e1-885e-05f86eff6869",
                                                                                    "displayName": "Handling active oncoming EMVs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_Handling_active_rear_and_oncoming_EMVs_sub_behavior_c",
                                                                                    "id": "f55aebde-81fb-41e9-82f5-94af06d24d1f",
                                                                                    "displayName": "Handling active EMVs - law enforcement officer (LEO) traffic stop",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_m",
                                                                    "id": "e11a4883-b0dd-4960-9889-2f6686236413",
                                                                    "displayName": "[SPA] Specific Scenes - Handling human controlling traffic situations (HCT)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Specific_Scenes_HCT_sub_behavior",
                                                                            "id": "366c95b4-d63c-46dd-a737-ecb0012a45d8",
                                                                            "displayName": "Which sub-behavior of Specific Scenes - Handling human controlling traffic situations (HCT) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Specific_Scenes_HCT_sub_behavior_a",
                                                                                    "id": "46f76599-dd58-4b17-b5ee-1bb39410115a",
                                                                                    "displayName": "Handling human controlling traffic situations (HCT)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_n",
                                                                    "id": "520124dc-cb95-4e3c-93cd-499af3ff13a8",
                                                                    "displayName": "[VRU] Handling pedestrians outside of crosswalks",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_pedestrians_outside_of_crosswalks_sub_behavior",
                                                                            "id": "592f0cb4-3dde-4167-b2a4-637961961ace",
                                                                            "displayName": "Which sub-behavior of Handling pedestrians outside of crosswalks caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_pedestrians_outside_of_crosswalks_sub_behavior_a",
                                                                                    "id": "bf736f56-d0c6-4bdf-83ef-36183a57a164",
                                                                                    "displayName": "Handling pedestrian interactions (excluding crosswalks)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_o",
                                                                    "id": "3c9e3beb-d7d7-4da9-9f00-d4cd1f9241ac",
                                                                    "displayName": "[VRU] Handling Non-Ped VRUs",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Non_Ped_VRUs_sub_behavior",
                                                                            "id": "1e24be62-4535-45dc-851e-ec048ba10caf",
                                                                            "displayName": "Which sub-behavior of Handling Non-Ped VRUs caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_a",
                                                                                    "id": "edc7f82d-5419-4726-8daa-a1dde17451f3",
                                                                                    "displayName": "Handling motorized cyclists",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_b",
                                                                                    "id": "956e1af0-af7c-4da3-8d05-ef6080428a8e",
                                                                                    "displayName": "Handling non-motorized cyclists",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_c",
                                                                                    "id": "049a7340-7cd6-4419-8f68-225fbb4278c1",
                                                                                    "displayName": "Handling VRUs in exposed vehicles",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Non_Ped_VRUs_sub_behavior_d",
                                                                                    "id": "a44ae55d-c849-4f98-aac2-fda8fdd77077",
                                                                                    "displayName": "Handling other non-pedestrian VRUs",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_p",
                                                                    "id": "f15d042a-1795-4390-a298-ff9016e68f86",
                                                                    "displayName": "[VRU] Handling Small VRUs and Strollers",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Small_VRUs_and_Strollers_sub_behavior",
                                                                            "id": "8d75dbea-f44e-4319-9e73-32a074560be3",
                                                                            "displayName": "Which sub-behavior of Handling Small VRUs and Strollers caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Small_VRUs_and_Strollers_sub_behavior_a",
                                                                                    "id": "a1d0dd8a-573a-467e-a44c-2f42b8c99330",
                                                                                    "displayName": "Handling small pedestrians",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Handling_Small_VRUs_and_Strollers_sub_behavior_b",
                                                                                    "id": "098f6552-3c66-4678-9f6d-5ea570cceff0",
                                                                                    "displayName": "Handling strollers",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_q",
                                                                    "id": "5e18a588-bcb8-4619-8c90-1d3431262508",
                                                                    "displayName": "[VRU] Handling nearfield interactions (all VRU)",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Nearfield_Interactions_VRU_sub_behavior",
                                                                            "id": "7af6576d-5a83-4054-8686-6b3135eb2d35",
                                                                            "displayName": "Which sub-behavior of Handling nearfield interactions (all VRU) caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Nearfield_Interactions_VRU_sub_behavior_a",
                                                                                    "id": "d058aefc-dfdf-49ac-a978-a0c096f6bf2b",
                                                                                    "displayName": "Handling nearfield interactions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_r",
                                                                    "id": "499ca69f-fd50-445a-8a0e-5b5b53abe4bf",
                                                                    "displayName": "[Collision and Stopping Maneuver] Stopping Maneuver Handling",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Stopping_Maneuver_Handling_sub_behavior",
                                                                            "id": "94ee113e-fe30-452a-8122-ec4f834141a8",
                                                                            "displayName": "Which sub-behavior of Stopping Maneuver Handling caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Stopping_Maneuver_Handling_sub_behavior_a",
                                                                                    "id": "8ef3ddf9-19dc-415f-8da5-38d030665a62",
                                                                                    "displayName": "Performing Stopping Maneuvers (according to stopping taxonomy)",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_s",
                                                                    "id": "13e7b013-bce0-41a6-b5c0-4239092174c7",
                                                                    "displayName": "[Collision and Stopping Maneuver] Responding to degraded states",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Responding_to_degraded_states_sub_behavior",
                                                                            "id": "fcd2e6c1-28e7-44ce-a25a-4550eb6cabe6",
                                                                            "displayName": "Which sub-behavior of Responding to degraded states caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Responding_to_degraded_states_sub_behavior_a",
                                                                                    "id": "d344b75e-ab57-450f-8e84-4e786f293cf0",
                                                                                    "displayName": "Responding to performance-relevant failure with out of lane pullover",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_degraded_states_sub_behavior_b",
                                                                                    "id": "12f62887-37ee-4a61-b99c-7ae3b6deace1",
                                                                                    "displayName": "Responding to performance-relevant failure with in-lane pullover",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Responding_to_degraded_states_sub_behavior_c",
                                                                                    "id": "2f1c21e9-02e1-486c-91ef-f84e1242886f",
                                                                                    "displayName": "Responding to performance-relevant failure with immediate stop",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_t",
                                                                    "id": "b0fe90f3-860c-45a4-ad71-aa5d9d43007d",
                                                                    "displayName": "[Collision and Stopping Maneuver] Collision Detection and Response",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Collision_Detection_and_Response_sub_behavior",
                                                                            "id": "4448f70d-fddd-41d1-9990-9317dba9bd92",
                                                                            "displayName": "Which sub-behavior of Collision Detection and Response caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Collision_Detection_and_Response_sub_behavior_a",
                                                                                    "id": "bb168bf2-a8ec-407d-ae01-cec103a68437",
                                                                                    "displayName": "Detect collisions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                },
                                                                                {
                                                                                    "name": "dc_Collision_Detection_and_Response_sub_behavior_b",
                                                                                    "id": "2d59283d-ca0f-4bbc-9cb2-4c2183abb393",
                                                                                    "displayName": "Responding to collisions",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                },
                                                                {
                                                                    "name": "dc_Dynamic_Conditions_behaviors_u",
                                                                    "id": "9ae1b376-c3cc-4b82-9733-ae98146ddb85",
                                                                    "displayName": "[Collision and Stopping Maneuver] Handling cloud outage",
                                                                    "nodeType": "branch",
                                                                    "childNodes": [
                                                                        {
                                                                            "name": "dc_Handling_Cloud_Outage_sub_behavior",
                                                                            "id": "f05c745f-102b-42f0-8579-45e78fe1d37e",
                                                                            "displayName": "Which sub-behavior of Handling cloud outage caused the hazardous behavior?",
                                                                            "nodeType": "choice",
                                                                            "childNodes": [
                                                                                {
                                                                                    "name": "dc_Handling_Cloud_Outage_sub_behavior_a",
                                                                                    "id": "950e19e7-7bb1-4154-ae40-981f7174a9c5",
                                                                                    "displayName": "Handling cloud outage",
                                                                                    "nodeType": "terminal",
                                                                                    "childNodes": [],
                                                                                    "status": ""
                                                                                }
                                                                            ],
                                                                            "status": ""
                                                                        }
                                                                    ],
                                                                    "status": ""
                                                                }
                                                            ],
                                                            "status": ""
                                                        }
                                                    ],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "dc_is_Dynamic_Conditions_b",
                                                    "id": "61dde184-e7fe-47c6-82de-f93570554bee",
                                                    "displayName": "No",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_type",
                                            "id": "19c7bb5e-062f-416f-a4b2-530061e80aff",
                                            "displayName": "What is the loss factor type you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_type_a",
                                                    "id": "387a1a8d-4a28-4c55-a2db-325c3c05b471",
                                                    "displayName": "Car",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_b",
                                                    "id": "79699d9c-c830-4c31-9450-3e30c9fddd74",
                                                    "displayName": "Bus",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_c",
                                                    "id": "d5b8cea5-f6c1-4642-a656-21ecc579a587",
                                                    "displayName": "Rail",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_d",
                                                    "id": "c38cd52a-59ca-4129-9e6c-d50101d8fc7a",
                                                    "displayName": "Light Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_e",
                                                    "id": "b6453f2d-060b-418b-ba89-b21e367adad0",
                                                    "displayName": "Medium Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_f",
                                                    "id": "09fcf617-1474-4d9b-b8c3-7144268558eb",
                                                    "displayName": "Heavy Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_g",
                                                    "id": "b54c4ff0-34cf-4c8d-bfc8-4e62a197dcd6",
                                                    "displayName": "Super Heavy Weight Truck Construction Semi",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_h",
                                                    "id": "acd21126-2faa-4649-9b06-1a4d8a3f6316",
                                                    "displayName": "Special Emergency Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_i",
                                                    "id": "b6bcae01-dfe2-48e1-b43a-165bc7a359a8",
                                                    "displayName": "Motorcycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_j",
                                                    "id": "a44b8632-9164-4b74-97a2-121566232f09",
                                                    "displayName": "Cyclist",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_k",
                                                    "id": "45fae9f5-b7ae-4172-8dc4-57a7ac924a44",
                                                    "displayName": "Adult",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_l",
                                                    "id": "be54b132-9022-4ca0-bf7c-eb3cbf0fa46b",
                                                    "displayName": "Small Pedestrian",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_m",
                                                    "id": "485564f7-82d9-4a93-a3c8-d0227b2d7581",
                                                    "displayName": "Animal",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_n",
                                                    "id": "202656f4-22de-4c46-a5ff-5873a9e4e6d7",
                                                    "displayName": "Tall Fod",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_o",
                                                    "id": "0e984176-8f5b-4f43-b419-6d637b52d7b2",
                                                    "displayName": "Short Fod",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_p",
                                                    "id": "ba3dc930-75d3-49da-90a8-74d9ea122375",
                                                    "displayName": "Traffic Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_q",
                                                    "id": "bb11bcab-75c9-4667-8129-c3b9502078f9",
                                                    "displayName": "Bicycle Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_r",
                                                    "id": "6f39c9b2-4971-45eb-a8d5-26c8c70a6149",
                                                    "displayName": "Bus Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_s",
                                                    "id": "a50240de-7137-487a-83d8-b7b62bb5a573",
                                                    "displayName": "HOV Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_t",
                                                    "id": "3929c5d4-1f13-4c72-b1c6-0299b6c44192",
                                                    "displayName": "HOV Toll Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_u",
                                                    "id": "56577d03-ec36-40b9-9988-26ec346045cf",
                                                    "displayName": "Motorcycle Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_v",
                                                    "id": "f7408166-105d-469d-9c4d-0849ff472eff",
                                                    "displayName": "Shared Used Bicycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_w",
                                                    "id": "4e8d62aa-fed6-458c-8ba0-f645f6ef2b74",
                                                    "displayName": "Shared Used Tram",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_x",
                                                    "id": "db3c2c77-5468-412c-945b-25d9a201f954",
                                                    "displayName": "Tramways",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_y",
                                                    "id": "b29f8375-a6de-462d-9df8-162602ade5c7",
                                                    "displayName": "Truckway",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_z",
                                                    "id": "99283c05-38ab-46dd-8385-9a0d1b5e4f77",
                                                    "displayName": "Emergency Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aa",
                                                    "id": "a9dbdf4b-0ede-48b0-96d0-3d817f134359",
                                                    "displayName": "No Turn On Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ab",
                                                    "id": "87800bf0-66c3-4aa2-8ecf-267b14d35b22",
                                                    "displayName": "Ped Crossing",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ac",
                                                    "id": "5e985d66-f200-44b6-8683-6948493bbbdf",
                                                    "displayName": "School Zone Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ad",
                                                    "id": "c9097724-b89b-41b7-9cc7-2743b688b5cf",
                                                    "displayName": "Regulatory All Way Stop",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ae",
                                                    "id": "cddf814a-41c0-47b6-adb1-dbbb5b236331",
                                                    "displayName": "Regulatory Stop",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_af",
                                                    "id": "228a679a-f924-401b-835f-922fb047bfce",
                                                    "displayName": "Regulatory Yield",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ag",
                                                    "id": "978ef239-f39c-4529-9b9d-5cb21534806b",
                                                    "displayName": "End Road Work",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ah",
                                                    "id": "c4d9a074-61e5-422e-aadc-ad1eb5c7b1fd",
                                                    "displayName": "Flagger Ahead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ai",
                                                    "id": "400fac3b-720f-4965-8982-219c3b4bdb00",
                                                    "displayName": "Road Closed",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aj",
                                                    "id": "c014d698-3c4e-481d-b7fc-7657c150fa20",
                                                    "displayName": "Lane Closure",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ak",
                                                    "id": "e70d52c8-b2dc-4349-83b9-561416cd1f49",
                                                    "displayName": "Road Work Ahead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_al",
                                                    "id": "657e4323-77cd-43a2-abb2-779d3a173484",
                                                    "displayName": "Shoulder Work Ahead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_am",
                                                    "id": "0980fb48-8823-4cad-9ab8-5e24408fa6b2",
                                                    "displayName": "Changeable Message",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_an",
                                                    "id": "bbef54ab-cf01-4292-a027-7c7f82cd0b5d",
                                                    "displayName": "Guide",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ao",
                                                    "id": "0bf528f0-2bb2-4c97-859e-645d9c863e10",
                                                    "displayName": "Hospital",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ap",
                                                    "id": "3e3ee78f-5048-48ef-8edc-fefcd03f8a18",
                                                    "displayName": "Toll Road",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aq",
                                                    "id": "6a15cf03-0e74-42c1-a320-f3433815b5b7",
                                                    "displayName": "Warning",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ar",
                                                    "id": "cfa28324-71a1-4bcc-873b-fd7653e230b4",
                                                    "displayName": "Lane Shift",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_as",
                                                    "id": "ddff3f54-bb18-4e84-9f99-867631a55e49",
                                                    "displayName": "Speed Limit Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_at",
                                                    "id": "c9133275-3000-44ae-8372-ee120d3f87c5",
                                                    "displayName": "Work Zone Begin",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_au",
                                                    "id": "58aff0ca-c1aa-4892-aeb6-651eed0df0e9",
                                                    "displayName": "Warning Traffic Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_av",
                                                    "id": "e0d68bfa-1cb6-44d7-b518-04a7845ce66b",
                                                    "displayName": "Green",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_aw",
                                                    "id": "1b2cf36b-4ef4-46df-bddf-518f380019b2",
                                                    "displayName": "Yellow",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ax",
                                                    "id": "5ed3a982-8168-49ee-9a78-9c17a37debef",
                                                    "displayName": "Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ay",
                                                    "id": "45529a54-7ffe-4ae0-8e31-4a3ea961898a",
                                                    "displayName": "Green Trasitioning To Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_az",
                                                    "id": "03808eb6-0fdd-402c-ab0a-d0c0072990de",
                                                    "displayName": "Red Trasitioning To Green",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_ba",
                                                    "id": "6bac7738-a448-46bd-98ad-6a465b103435",
                                                    "displayName": "Flashing Green",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bb",
                                                    "id": "f6ce7712-2de4-4273-abc3-8a6e77338d8a",
                                                    "displayName": "Fashing Yellow",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bc",
                                                    "id": "17bbb809-d266-465d-aa69-087d38c6157a",
                                                    "displayName": "Flashing Red",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bd",
                                                    "id": "d98cdcaf-bcf3-45e5-a17e-8f3308df6373",
                                                    "displayName": "Normal Steady Cycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_be",
                                                    "id": "c68ef41d-c96e-4f0c-8ea5-d8bf80ac9040",
                                                    "displayName": "Walk Dontwalk Cycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bf",
                                                    "id": "86e9d8de-2109-4bd4-bf87-a7a279ee1201",
                                                    "displayName": "Malfunctioning",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bg",
                                                    "id": "95f2bd8f-f69d-4710-9a9a-8ef40cf0913c",
                                                    "displayName": "Other Equipment",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bh",
                                                    "id": "2759ff98-0735-4f9b-9f0a-0ec9d5b1ce11",
                                                    "displayName": "Traffic Sign",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bi",
                                                    "id": "7d9a5eeb-40d1-4ac6-93a3-707f77622cd0",
                                                    "displayName": "Short Basic Road Structure",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bj",
                                                    "id": "c0e9855e-296b-47a0-810c-acc485effb9d",
                                                    "displayName": "Tall Basic Road Structure",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_type_bk",
                                                    "id": "b91f1d66-4efd-41ce-818f-1edb22bb07c8",
                                                    "displayName": "Passenger",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_action",
                                            "id": "9d9930b7-0f0b-43c1-8cc8-73d9b3886a01",
                                            "displayName": "What is the loss factor action you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_action_a",
                                                    "id": "c1f75980-bf6a-4dfd-a6bb-47fc985ed8c6",
                                                    "displayName": "Drive Straight",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_b",
                                                    "id": "57df5988-e2f7-4676-b58f-dd1821c80742",
                                                    "displayName": "Navigate Intersection",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_c",
                                                    "id": "27763d0d-82bc-4986-9a8d-e3da17b958ff",
                                                    "displayName": "Lateral Maneuver",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_d",
                                                    "id": "4289da5d-413b-4078-94b5-cfa73eca883e",
                                                    "displayName": "Parking Low Speed Maneuver",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_e",
                                                    "id": "c706c583-9fec-42c3-af61-72bf1eb4f922",
                                                    "displayName": "VRU Lane Splitting Through Dense Traffic",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_f",
                                                    "id": "9e262723-19df-4f42-92c5-2199ed7328d7",
                                                    "displayName": "Walking",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_g",
                                                    "id": "e71dea3e-d6d9-483e-be9f-8938b4cee28e",
                                                    "displayName": "Running",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_h",
                                                    "id": "18a9c76e-39e4-4671-9e85-d9122ad757e9",
                                                    "displayName": "Traversing Crosswalk",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_i",
                                                    "id": "c52a7f6a-5d98-4825-9cf2-67057206bafb",
                                                    "displayName": "Entering Exiting Parked Or Stopped Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_j",
                                                    "id": "c6f5fbda-c174-4be2-9e65-c464777421b5",
                                                    "displayName": "Getting Onto Bicycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_k",
                                                    "id": "7553c050-b445-432c-a26d-78b111a0d236",
                                                    "displayName": "Getting Off Bicycle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_l",
                                                    "id": "d093d679-0771-454c-bcfa-5f2d8d585196",
                                                    "displayName": "Standing",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_m",
                                                    "id": "712c321e-f2d6-470f-becb-e0c1bcc98993",
                                                    "displayName": "Sitting",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_n",
                                                    "id": "a4d4625a-dd8d-4d65-91d7-2481ea8c1d0e",
                                                    "displayName": "Lying Down",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_o",
                                                    "id": "ef394110-87b6-4888-8fbf-266145e59b75",
                                                    "displayName": "Crouching",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_p",
                                                    "id": "d6a64d55-a1a3-48a2-a723-1832f21a762a",
                                                    "displayName": "Kneeling",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_q",
                                                    "id": "0f765115-8d18-47d4-b25e-1beaedafb594",
                                                    "displayName": "Upside Down",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_r",
                                                    "id": "87a95da9-f434-4e22-b941-164387aaf3f9",
                                                    "displayName": "All Fours",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_s",
                                                    "id": "c3ccf4db-f4c2-4d13-9137-be757e880be9",
                                                    "displayName": "Collision Or Stopping Maneuver",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_t",
                                                    "id": "d63e580d-7b16-44af-99b8-804a643c72ba",
                                                    "displayName": "Stationary",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_u",
                                                    "id": "1c4522fe-4c46-4d86-9aab-b00ff742ffaa",
                                                    "displayName": "Moving",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_action_v",
                                                    "id": "0dd4535b-6f63-4c89-bf16-1436c5d9b348",
                                                    "displayName": "N/A - Passenger",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_relative_location",
                                            "id": "1fd54fee-3c9f-4884-8cdb-8373f6f3e0e4",
                                            "displayName": "What is the loss factor relative location you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_relative_location_a",
                                                    "id": "cd69aff3-2a56-4407-aa62-4c18158fc432",
                                                    "displayName": "Lead",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_b",
                                                    "id": "b32a774f-a7f9-4a71-8df2-1c29a9d31c52",
                                                    "displayName": "Front",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_c",
                                                    "id": "bfdbc989-7e54-406e-b41b-c70c60cc199c",
                                                    "displayName": "Adjacent",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_d",
                                                    "id": "fbf8564b-1cfc-4de5-910d-0cfa5c85f459",
                                                    "displayName": "Rear",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_e",
                                                    "id": "265fd94d-a267-47e2-860b-a66b54ba600b",
                                                    "displayName": "Above",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_f",
                                                    "id": "18c9df6d-4943-407c-b6c0-312e12ab5691",
                                                    "displayName": "Under",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_location_g",
                                                    "id": "9c94581c-ed66-4707-80a8-4d22b1d1b9e3",
                                                    "displayName": "N/A - Passenger",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        },
                                        {
                                            "name": "loss_factor_relative_motion",
                                            "id": "ae415966-db34-423c-82c1-be7ed28f5b09",
                                            "displayName": "What is the loss factor relative motion you observe?",
                                            "nodeType": "choice",
                                            "childNodes": [
                                                {
                                                    "name": "loss_factor_relative_motion_a",
                                                    "id": "f45e711a-3c0e-4966-ada4-bfa13759900b",
                                                    "displayName": "Along Lane Codirected",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_b",
                                                    "id": "25961fec-77c2-4245-9376-0ded6d313737",
                                                    "displayName": "Along Lane Oncoming",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_c",
                                                    "id": "f6e949ee-861b-408d-809e-229b095b0a93",
                                                    "displayName": "Towards Ego Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_d",
                                                    "id": "8f7a524f-d4b1-4171-b756-58fe5b7015b8",
                                                    "displayName": "Away From Ego Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_e",
                                                    "id": "dac10cda-d0d0-4528-bb32-e26b45d83401",
                                                    "displayName": "Crossing Path",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_f",
                                                    "id": "128ca741-3d69-45bb-bf29-7c2f042e8dc6",
                                                    "displayName": "Encroaching Upon Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_g",
                                                    "id": "6cfbe95c-d1e2-41cf-859e-0889f972ebe9",
                                                    "displayName": "Merging Into Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_h",
                                                    "id": "c9aca3c7-98bf-463a-b73d-076a281f8b5e",
                                                    "displayName": "Diverging From Lane",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_i",
                                                    "id": "a75a8ac5-2c4f-4fab-a8f5-76f4aab43d01",
                                                    "displayName": "Moving Above Or Below Ego Vehicle",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                },
                                                {
                                                    "name": "loss_factor_relative_motion_j",
                                                    "id": "971b7b36-9777-4047-a42c-2b88a0ec231f",
                                                    "displayName": "None",
                                                    "nodeType": "terminal",
                                                    "childNodes": [],
                                                    "status": ""
                                                }
                                            ],
                                            "status": ""
                                        }
                                    ],
                                    "status": ""
                                },
                                {
                                    "name": "hb_is_hazardous_behaviors_b",
                                    "id": "219af48b-1f05-49a1-b1a8-46b3ea921340",
                                    "displayName": "No",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        }
                    ],
                    "status": ""
                }
            ],
            "status": ""
        },
        {
            "name": "sd_rationale_comments",
            "id": "2207d1ad-8309-470c-b4eb-1bad9bc07e86",
            "displayName": "Rationale Comments: Please note any observations or details you think are worth highlighting.",
            "nodeType": "freeText",
            "childNodes": [],
            "status": ""
        },
        {
            "name": "sd_sme",
            "id": "968e1c80-9d33-4d85-96a2-028a2e813fbf",
            "displayName": "What type of task are you completing?",
            "nodeType": "choice",
            "childNodes": [
                {
                    "name": "sd_sme_a",
                    "id": "db5b4889-1477-4666-b983-6bc483997e3d",
                    "displayName": "Production First Pass or QA",
                    "nodeType": "terminal",
                    "childNodes": [],
                    "status": ""
                },
                {
                    "name": "sd_sme_b",
                    "id": "d3ba94c2-1810-456d-9fdb-4531a34dabc1",
                    "displayName": "Cruise/GM employee or vendor doing Audit or Overwrite per Cruise/GMs request",
                    "nodeType": "branch",
                    "childNodes": [
                        {
                            "name": "sd_sme_made_changes",
                            "id": "00c816c4-cd8f-4f83-8411-d4141b110aaa",
                            "displayName": "Did you make any changes to the hazardous behavior, ego action, or loss factor?",
                            "nodeType": "choice",
                            "childNodes": [
                                {
                                    "name": "sd_sme_made_changes_a",
                                    "id": "dce72a02-7931-4d07-a971-e93d05765257",
                                    "displayName": "Yes",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_made_changes_b",
                                    "id": "5c120f8e-21d5-43f8-9fcb-6dda62b55a71",
                                    "displayName": "No",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_feedback",
                            "id": "c0b91302-18b1-4773-ba60-e425c8f4fd35",
                            "displayName": "Was there a reason for disagreement or potential gaps?",
                            "nodeType": "choice",
                            "childNodes": [
                                {
                                    "name": "sd_sme_feedback_a",
                                    "id": "be6665c4-8f09-46fc-b227-417649bcd574",
                                    "displayName": "Labeler Adherence",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_b",
                                    "id": "d73a94df-1de8-4de7-bf94-f80b88414d67",
                                    "displayName": "Guidance Ambiguity",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_c",
                                    "id": "eb810ef5-d668-4c0a-ab69-59c8b94aba20",
                                    "displayName": "Guidance Gap",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_d",
                                    "id": "4d5cd598-3acb-461a-a8cc-45b04e88c20a",
                                    "displayName": "Other Error",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_feedback_e",
                                    "id": "86b5ac57-3fc7-4d14-bfad-530e36d4d086",
                                    "displayName": "No Change or Gaps",
                                    "nodeType": "terminal",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_feedback_categories",
                            "id": "fef5185a-a175-4e86-a33d-d92f14a0cc50",
                            "displayName": "If there is guidance ambiguity or gap, what is the category?",
                            "nodeType": "branch",
                            "childNodes": [
                                {
                                    "name": "sd_sme_hazardous_behavior_gap",
                                    "id": "3f91da1a-d522-40b8-b89c-40996219da1a",
                                    "displayName": "Hazardous Behavior",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_environment_condition_gap",
                                    "id": "328dd6b0-039f-44fe-826a-123c8fbda10b",
                                    "displayName": "Environment Condition",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_roadway_infrastructure_gap",
                                    "id": "77b8b9d7-b536-41b0-947c-e8852deee24b",
                                    "displayName": "Roadway Infrastructure",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_dynamic_conditions_gap",
                                    "id": "24e82c94-dbcc-4b5b-869f-a2e4b8144037",
                                    "displayName": "Dynamic Conditions",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_type_gap",
                                    "id": "7f7c30cd-35c6-4f1b-911b-6bb7f60c385c",
                                    "displayName": "Loss Factor Type",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_action_gap",
                                    "id": "855e77d6-7868-45ef-9903-60cd52962b16",
                                    "displayName": "Loss Factor Action",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_relative_location_gap",
                                    "id": "8a2e58b8-eb87-4106-a514-7b4c176900c6",
                                    "displayName": "Loss Factor Relative Location",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                },
                                {
                                    "name": "sd_sme_loss_factor_relative_motion_gap",
                                    "id": "5f415af9-e6fb-47c4-9f83-048328dc99e3",
                                    "displayName": "Loss Factor Relative Motion",
                                    "nodeType": "boolean",
                                    "childNodes": [],
                                    "status": ""
                                }
                            ],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_feedback_text",
                            "id": "8efacfd7-e389-4dcd-8217-d6ee530d2d88",
                            "displayName": "Please elaborate on any modifications / changes you made.",
                            "nodeType": "freeText",
                            "childNodes": [],
                            "status": ""
                        },
                        {
                            "name": "sd_sme_escalation",
                            "id": "5156fdfc-fa3e-4b6c-bf68-5eae0ad4e181",
                            "displayName": "Please select if you have received input from a SME to adjust any labels.",
                            "nodeType": "boolean",
                            "childNodes": [],
                            "status": ""
                        }
                    ],
                    "status": ""
                }
            ],
            "status": ""
        }
    ]
}
        // ==============================================
        // === نهاية منطقة شجرة القرارات ==================
        // ==============================================
        // User data with shifts
        const usersByShift = {
            "Morning": [
                  { name: "Fatma Elzahraa Atef Mohamed", flashNumber: "" },
  { name: "Mayar gamal abdelfatah tantawy", flashNumber: "" },
  { name: "Rawan Essam Abdel Khaleq", flashNumber: "" },
  { name: "Eman Gamal Ahmed", flashNumber: "" },
  { name: "Rawan Saeed Mohamed Hekal", flashNumber: "" },
  { name: "Bsmalh Muhammad Yehya Muhammad", flashNumber: "" },
  { name: "Ibtissam mustafa abdelsadiek elsaied", flashNumber: "" }
            ],
            "Night": [
                { name: "Kareem Ahmed Mohamed Farrag", flashNumber: "" },
  { name: "Mohamed Khaled Elsayed Sakr", flashNumber: "" },
  { name: "Motassem mahmoud ali abdellah", flashNumber: "" },
  { name: "Muhannad Emadaldin Mohammed Jamal", flashNumber: "" },
  { name: "Ahmed Mohamed shabaan Saber", flashNumber: "" },
  { name: "Peter Awad Labib Isaaq", flashNumber: "" },
  { name: "Mustafa salah hassan", flashNumber: "" },
  { name: "Michele Gerges Shokry Attia", flashNumber: "" },
  { name: "youssouf hatem abdelhamid", flashNumber: "" },
  { name: "Abdelrhman Mahmoud Mohamed", flashNumber: "" },
  { name: "Samir Gamal ElMohammadi Mohamed", flashNumber: "" },
  { name: "Yousef Ahmed Fouad Abdullatif", flashNumber: "" },
  { name: "Ahmed Wasfi Ali Metwally", flashNumber: "" },
  { name: "Mostafa Ibrahim Mostafa Ibrahim", flashNumber: "" },
  { name: "MOHAMED KHALED MOHAMED ALI", flashNumber: "" }
            ],
            "Overnight": [
                { name: "Saleh Saad Aldin Moghazy Ahmed", flashNumber: "" },
  { name: "Ziad Shaban ibrahim", flashNumber: "" },
  { name: "Aly Ekramy Hasan Elzaiaty", flashNumber: "" },
  { name: "Mahmoud Mohamed Saad Mohamed", flashNumber: "" },
  { name: "Mahmoud Mohamed Nagep Mahmoud", flashNumber: "" },
  { name: "Ammar Mohamed Farouk Gamil", flashNumber: "" },
  { name: "mostafa tarek mohamed shehata", flashNumber: "" },
  { name: "Ali Abdelwahed Hasan Eid", flashNumber: "" },
  { name: "kareem mohamed badr eldin elwan", flashNumber: "" },
  { name: "MOHAMED IBRAHIM MOHAMED", flashNumber: "" },
  { name: "John Adel Fathy Habil", flashNumber: "" },
  { name: "Kareem Mohamed Ali Hassan", flashNumber: "" },
  { name: "Abdelmalek Mansour Mohammed Gad", flashNumber: "" },
  { name: "Yousef Hisham Abd Alghany Mahdy", flashNumber: "" },
  { name: "Youssef shaaban abdelzaher ahmed", flashNumber: "" },
  { name: "Abd El Rahman Hesham Mohamed Mahrous", flashNumber: "" },
  { name: "Ali Mohamed Elsaid Mohamed ", flashNumber: "" },
  { name: "ahmed emad abdelaziz", flashNumber: "" },
  { name: "nour khaled mohammed abd el-fattah", flashNumber: "" },
  { name: "Mahmoud Mohamed Gaber Mohamed", flashNumber: "" }
            ]
        };

        // App State
        const state = {
            currentUser: null,
            currentTask: null,
            isAdmin: false,
            users: [],
            submissions: [],
            currentAnswers: {}
        };

        // Admin credentials
        const ADMIN_CREDENTIALS = {
            username: "admin",
            password: "admin123"
        };

        // DOM Elements
        const loginPanel = document.getElementById('login-panel');
        const taskPanel = document.getElementById('task-panel');
        const classificationPanel = document.getElementById('classification-panel');
        const submissionsPanel = document.getElementById('submissions-panel');
        const adminPanel = document.getElementById('admin-panel');
        const usersList = document.getElementById('users-list');
        const adminSubmissionsList = document.getElementById('admin-submissions-list');
        const userSubmissionsView = document.getElementById('user-submissions-view');
        const selectedUserInfo = document.getElementById('selected-user-info');
        const submissionsList = document.getElementById('submissions-list');
        const usernameInput = document.getElementById('username');
        const flashNumberInput = document.getElementById('flash-number');
        const flashValue = (flashNumberInput ? flashNumberInput.value.trim() : '') || 'Not provided';
        const adminUsernameInput = document.getElementById('admin-username');
        const adminPasswordInput = document.getElementById('admin-password');
        const taskIdInput = document.getElementById('task-id');
        const currentUserDisplay = document.getElementById('current-user');
        const currentTaskDisplay = document.getElementById('current-task');
        const submitBtn = document.getElementById('submit-btn');
        const userDropdown = document.getElementById('user-dropdown');

       // Initialize shift buttons
document.addEventListener('DOMContentLoaded', () => {
  const userDropdown = document.getElementById('user-dropdown');
  const manualContainer = document.getElementById('manual-name-container');
  const manualInput = document.getElementById('manual-name');

  function ensureManualOption() {
    // Add only if missing
    if (![...userDropdown.options].some(o => o.value === '__manual__')) {
      const manualOption = document.createElement('option');
      manualOption.value = '__manual__';
      manualOption.textContent = 'Other (Enter Manually)';
      userDropdown.appendChild(manualOption);
    }
  }

  function populateUsersForShift(selectedShift) {
    userDropdown.disabled = false;
    userDropdown.innerHTML = '<option value="">Select your name</option>';

    // Guard against undefined data
    const list = (window.usersByShift && window.usersByShift[selectedShift]) || [];
    list.forEach(u => {
      const opt = document.createElement('option');
      opt.value = u.name;
      opt.textContent = u.name;
      userDropdown.appendChild(opt);
    });

    // Always append the manual option
    ensureManualOption();

    // Reset manual input UI every time shift changes
    manualContainer.style.display = 'none';
    manualInput.value = '';
  }

  // Shift buttons
  document.querySelectorAll('.shift-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      const selectedShift = btn.dataset.shift;

      // Don’t let init errors block dropdown population
      try { initializeFirebaseForShift(selectedShift); } catch (e) {
        console.warn('initializeFirebaseForShift error:', e);
      }

      populateUsersForShift(selectedShift);

      // If some other code repopulates later, re-ensure the manual option
      setTimeout(ensureManualOption, 0);
    });
  });

  // Toggle manual input
  userDropdown.addEventListener('change', () => {
    manualContainer.style.display = (userDropdown.value === '__manual__') ? 'block' : 'none';
  });
});


document.getElementById('reload-all-data').addEventListener('click', async function() {
    this.disabled = true;
    this.innerHTML = 'Loading... <span class="loading"></span>';
    
    // Delegate to applyFilters which performs on-demand load
    applyFilters();
    
    this.disabled = false;
    this.innerHTML = 'Reload All Shift Data';
});
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Firebase with Overnight shift by default
            initializeFirebaseForShift('Overnight');
            
            // Check authentication state
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    if (user.uid === "admin") {
                        state.isAdmin = true;
                        showAdminPanel();
                    } else {
                        // Load user data from Firestore
                        db.collection("users").doc(user.uid).get().then(doc => {
                            if (doc.exists) {
                                state.currentUser = doc.data();
                                showTaskPanel();
                            }
                        });
                    }
                } else {
                    // No user is signed in
            showLoginPanel();
                }
            });

            // Load initial data (no bulk submissions load)
            loadUsers();

            // Event listeners
            document.getElementById('login-btn').addEventListener('click', handleLogin);
            document.getElementById('admin-login-btn').addEventListener('click', handleAdminLogin);
            document.getElementById('start-task-btn').addEventListener('click', startTask);
            document.getElementById('my-submissions-btn').addEventListener('click', showSubmissionsPanel);
            document.getElementById('submit-btn').addEventListener('click', submitClassification);
            document.getElementById('new-task-btn').addEventListener('click', startNewTask);
            document.getElementById('logout-btn').addEventListener('click', logout);
            document.getElementById('user-logout-btn').addEventListener('click', logout);
            document.getElementById('admin-logout-btn').addEventListener('click', logout);
            document.getElementById('cancel-task-btn').addEventListener('click', cancelTask);
document.getElementById('back-to-users-btn').addEventListener('click', () => {
    // Hide submissions, show users list again
    document.getElementById('user-submissions-view').classList.add('hidden');
    document.getElementById('users-list').classList.remove('hidden');
});
document.getElementById('back-to-ussers-btn').addEventListener('click', () => {
    // Hide submissions, show users list again
    document.getElementById('user-submissions-view').classList.add('hidden');
    document.getElementById('users-list').classList.remove('hidden');
});

// Update the back button listener to handle both user and admin contexts
document.getElementById('back-to-submissions-btn').addEventListener('click', function() {

    document.getElementById('submission-details-view').classList.add('hidden');
    
    if (state.isAdmin) {
        // Admin context - show admin submissions list
        document.getElementById('admin-submissions-list').classList.remove('hidden');
    } else {
        // User context - show user submissions list
        document.getElementById('submissions-list').style.display = 'block';
    }
});
           

            // Shift selection buttons
            document.querySelectorAll('.shift-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    userDropdown.disabled = false;
                    const shift = this.dataset.shift;
                    userDropdown.innerHTML = '<option value="">Select your name</option>';
                    
                    usersByShift[shift].forEach(user => {
                        const option = document.createElement('option');
                        option.value = user.name;
                        option.textContent = user.name;
                        userDropdown.appendChild(option);
                    });
                });
            });

            // Filter event listeners
            document.getElementById('apply-filters').addEventListener('click', () => applyFilters());
            document.getElementById('reset-filters').addEventListener('click', function() {
                document.getElementById('shift-filter').value = 'all';
                document.getElementById('date-filter').value = '';
                applyFilters();
            });
        });

        // Firebase Functions
        async function loadUsers() {
            try {
                const snapshot = await db.collection("users").get();
                state.users = snapshot.docs.map(doc => doc.data());
            } catch (error) {
                console.error("Error loading users:", error);
                alert("Error loading users. Please try again.");
            }
        }

// Deprecated heavy loader. Avoid calling.
async function loadSubmissions() {
    console.warn('loadSubmissions() is deprecated. Use loadAdminSubmissionsByShiftAndDate() or the user paginated loader.');
}

// Admin on-demand loader for a single shift (optional by date)
async function loadAdminSubmissionsByShiftAndDate(shift, date = null) {
    try {
        state.submissions = [];
        if (!shift) { return; }
        const config = firebaseConfigs[shift];
        if (!config) {
            console.error(`Firebase config for shift '${shift}' not found.`);
            return;
        }
        const appName = `admin_${shift}_${Date.now()}`;
        const tempApp = firebase.initializeApp(config, appName);
        const tempDb = tempApp.firestore();
        let query = tempDb.collection('submissions');
        if (date) {
            const start = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0, 0);
            const end = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1, 0, 0, 0, 0);
            query = query.where('date', '>=', start).where('date', '<', end).orderBy('date', 'desc');
        } else {
            // Limit when no date filter to avoid excessive reads
            query = query.orderBy('date', 'desc').limit(200);
        }
        const snapshot = await query.get();
        const items = snapshot.docs.map(doc => {
            const data = doc.data();
            const d = data.date?.toDate?.() || new Date();
            return {
                id: doc.id,
                shift,
                ...data,
                date: d,
                dateString: d.toLocaleDateString('en-US'),
                dateFormatted: formatDate(d)
            };
        });
        await tempApp.delete();
        state.submissions = items;
    } catch (error) {
        console.error('Error loading admin submissions:', error);
    }
}


// دالة مساعدة لتنسيق التاريخ بتنسيق "YYYY-MM-DD"
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // دالة مساعدة للتحقق مما إذا كان التاريخ هو اليوم
        function isToday(date) {
            const today = new Date();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }



        // Initialize Google Sheets API (simplified)
        async function initGoogleSheetsAPI() { return false; }

        // Load gapi on page load
        // Google Sheets dynamic loader removed

        // Accuracy features removed
        async function loadAccuracyData() { return; }

        // Get accuracy for a specific task
        function getAccuracyForTask(taskId) { return 'N/A'; }

        // Update accuracy data every 5 minutes
        function startAccuracyUpdateInterval() { /* removed */ }

        // دالة لحساب متوسط Accuracy للمستخدم
        function calculateAverageAccuracy() { return 'N/A'; }

        async function saveUser(user) {
            try {
                // Create a simplified ID from the user's name
                const userId = user.name.replace(/\s+/g, '_').toLowerCase();
                await db.collection("users").doc(userId).set({
                    ...user,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                return userId;
            } catch (error) {
                console.error("Error saving user:", error);
                throw error;
            }
        }

        async function saveSubmission(submission) {
            try {
                const flashInput = document.getElementById('flash-number');
const flashNumber = flashInput ? flashInput.value.trim() : '';

submission.user.flashNumber = flashNumber;

const docRef = await db.collection("submissions").add({
  ...submission,
  user: {
    name: submission.user.name,
    shift: submission.user.shift,
    flashNumber: submission.user.flashNumber // 
  },
  date: firebase.firestore.FieldValue.serverTimestamp(),
  answers: submission.answers,
  taskId: submission.taskId
});

                return docRef.id;
            } catch (error) {
                console.error("Error saving submission:", error);
                throw error;
            }
        }

        // App Functions
       async function handleLogin(e) {
    e.preventDefault();

    const selectedShift = document.querySelector('.shift-btn.active')?.dataset.shift;
    const selectedName = document.getElementById('user-dropdown').value;
    const manualName = document.getElementById('manual-name').value.trim();
    const flashNumber = document.getElementById('flash-number').value.trim();

    // Use manual name if "Other" was chosen
    const finalName = selectedName === "__manual__" ? manualName : selectedName;

    // Check for shift & name
    if (!selectedShift || !finalName) {
        alert('Please select your shift and name');
        return;
    }

    //  Check for yubikey (flash number)
    if (!flashNumber) {
        alert('Please enter your Yubikey number');
        return;
    }

    // ---- If everything is OK, continue login ----
    console.log("Logging in with:", {
        shift: selectedShift,
        name: finalName,
        yubikey: flashNumber
    });

    
    // Find or create user
    let user = state.users.find(u => u.name === finalName && u.shift === selectedShift);
    if (!user) {
        user = { 
            id: Date.now().toString(),
            name: finalName, 
            flashNumber,
            shift: selectedShift,
            username: finalName.replace(/\s+/g, '_').toLowerCase()
        };
        try {
            const userRef = window.db.collection('users').doc(user.id);
            await userRef.set({
                ...user,
                createdAt: window.firebase.firestore.FieldValue.serverTimestamp()
            });
            state.users.push(user);
        } catch (error) {
            console.error("Error creating user:", error);
            alert("Error creating user account. Please try again.");
            return;
        }
    }


            
            // Set user in state
            state.currentUser = user;
            showTaskPanel();
        }

        async function handleAdminLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }
            
            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                state.isAdmin = true;
                showAdminPanel();
            } else {
                alert('Invalid admin credentials');
            }
        }

        function showTaskPanel() {
            hideAllPanels();
            taskPanel.style.display = 'block';
            if (flashNumberInput) flashNumberInput.value = '';
        }

        function showAdminPanel() {
    hideAllPanels();
    adminPanel.style.display = 'block';
    adminUsernameInput.value = '';
    adminPasswordInput.value = '';
    // Do not auto-load all submissions. Choose filters then click Apply to load on demand.
}

function applyFilters() {
    const shift = document.getElementById('shift-filter').value;
    const dateVal = document.getElementById('date-filter').value;
    const date = dateVal ? new Date(dateVal) : null;

    if (shift === 'all') {
        usersList.innerHTML = '<p>Please select a shift, then Apply Filters.</p>';
        return;
    }

    loadAdminSubmissionsByShiftAndDate(shift, date).then(() => {
        const allUsers = getAllUsersFromSubmissions();
        renderFilteredUsersList(allUsers, dateVal);
    });
}

function getAllUsersFromSubmissions() {
    const userMap = new Map();
    
    state.submissions.forEach(submission => {
        const userKey = `${submission.user.name}_${submission.user.shift}`;
        if (!userMap.has(userKey)) {
            userMap.set(userKey, {
                name: submission.user.name,
                shift: submission.user.shift,
                flashNumber: submission.user.flashNumber || 'Not provided',
                username: submission.user.name.replace(/\s+/g, '_').toLowerCase()
            });
        }
    });
    
    return Array.from(userMap.values());
}

function renderFilteredUsersList(users, dateFilter = '') {
    usersList.innerHTML = '<table><tr><th>Username</th><th>Name</th><th>Shift</th><th>Submissions</th><th>Actions</th></tr>';
    
    users.forEach(user => {
        let userSubmissions = state.submissions.filter(s => 
            s.user.name === user.name && s.shift === user.shift
        );
        
        if (dateFilter) {
            const filterDate = new Date(dateFilter);
            userSubmissions = userSubmissions.filter(sub => {
                const subDate = new Date(sub.date);
                return subDate.toDateString() === filterDate.toDateString();
            });
        }
        
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${user.username || ''}</td>
            <td>${user.name}</td>
            <td>${user.shift}</td>
            <td>${userSubmissions.length}</td>
            <td><button onclick="viewUserSubmissions('${user.name}', '${user.shift}', '${dateFilter || ''}')">View Submissions</button></td>
        `;
        usersList.querySelector('table').appendChild(row);
    });
    
    usersList.innerHTML += '</table>';
}
function viewUserSubmissions(username, userShift, dateFilter = '') {
    let userSubmissions = state.submissions.filter(s => 
        s.user.name === username && s.shift === userShift
    );
    console.log('Admin: Rendering submissions for', username, 'count:', userSubmissions.length);

    if (dateFilter) {
        const filterDate = new Date(dateFilter);
        userSubmissions = userSubmissions.filter(sub => {
            const subDate = new Date(sub.date);
            return subDate.toDateString() === filterDate.toDateString();
        });
    }

    userSubmissions.sort((a, b) => new Date(a.date) - new Date(b.date));

    selectedUserInfo.innerHTML = `
        <h4>User: ${username}</h4>
        <p>Shift: ${userShift}</p>
        <p>Yubikey Number: ${userSubmissions[0]?.user.flashNumber || 'Not provided'}</p>
        <p>Total Submissions: ${userSubmissions.length}</p>
    `;

    adminSubmissionsList.innerHTML = '';

    if (userSubmissions.length === 0) {
        adminSubmissionsList.innerHTML = `<p>No submissions found for this date.</p>`;
    } else // In the viewUserSubmissions function, change the button creation:
userSubmissions.forEach(sub => {
    const subElement = document.createElement('div');
    subElement.className = 'submission';
    subElement.innerHTML = `
        <p><strong>Shift:</strong> ${sub.shift}</p>
        <p><strong>Task Link:</strong> ${sub.taskId}</p>
        <p><strong>Date:</strong> ${new Date(sub.date).toLocaleString()}</p>
        <button onclick="testSubmissionDetails('${sub.id}')">View Details</button>
    `;
    adminSubmissionsList.appendChild(subElement);
});

// Add this test function
window.testSubmissionDetails = function(submissionId) {
    console.log('Test function called with:', submissionId);
    console.log('All submissions:', state.submissions);
    
    const submission = state.submissions.find(sub => sub.id === submissionId);
    if (submission) {
        console.log('Submission found:', submission);
        viewSubmissionDetails(submissionId);
    } else {
        console.log('Submission not found, available IDs:', state.submissions.map(s => s.id));
    }
};
    document.getElementById('users-list').classList.add('hidden');
    userSubmissionsView.classList.remove('hidden');
    document.getElementById('submission-details-view').classList.add('hidden');
}

        function viewSubmissionDetails(submissionId) {
    const submission = state.submissions.find(sub => sub.id === submissionId);
    if (!submission) return;
    
    // Get the currently active panel
    const activePanel = state.isAdmin ? 
        document.getElementById('admin-panel') : 
        document.getElementById('submissions-panel');
    
    if (!activePanel) {
        console.error('Active panel not found!');
        return;
    }
    
    // Find elements within the active panel
    const submissionsList = activePanel.querySelector('#admin-submissions-list') || activePanel.querySelector('#submissions-list');
    const submissionDetailsView = activePanel.querySelector('#submission-details-view');
    const detailsContainer = activePanel.querySelector('#submission-full-details');
    
    if (!submissionsList || !submissionDetailsView || !detailsContainer) {
        console.error('Required elements not found in active panel!');
        return;
    }
    
    // Hide list and show details
    if (state.isAdmin) {
        submissionsList.classList.add('hidden');
    } else {
        submissionsList.style.display = 'none';
    }
    submissionDetailsView.classList.remove('hidden');
    
    // Populate details
    detailsContainer.innerHTML = '';
    
    const classificationReconstruction = document.createElement('div');
    classificationReconstruction.className = 'classification-reconstruction';
    
    const header = document.createElement('div');
    header.innerHTML = `
        <h4>Submission Details - GULP Link: ${submission.taskId}</h4>
        ${state.isAdmin ? `<p><strong>Shift:</strong> ${submission.shift || 'N/A'}</p>` : ''}
        ${state.isAdmin ? `<p><strong>User:</strong> ${submission.user.name} (${submission.user.shift})</p>` : ''}
        <p><strong>Date:</strong> ${submission.date.toLocaleString()}</p>
        <hr>
    `;
    classificationReconstruction.appendChild(header);
    
    const answersList = document.createElement('div');
    answersList.className = 'submission-answers';
    
    for (const [question, answer] of Object.entries(submission.answers)) {
        const answerItem = document.createElement('div');
        answerItem.className = 'answer-item';
        answerItem.innerHTML = `
            <div class="answer-question">${question}</div>
            <div class="answer-value">${answer}</div>
        `;
        answersList.appendChild(answerItem);
    }
    
    classificationReconstruction.appendChild(answersList);
    detailsContainer.appendChild(classificationReconstruction);
}

// Update back button handler to work with both panels
document.addEventListener('click', function(e) {
    if (e.target && e.target.id === 'back-to-submissions-btn') {
        const activePanel = state.isAdmin ? 
            document.getElementById('admin-panel') : 
            document.getElementById('submissions-panel');
        
        if (activePanel) {
            const submissionDetailsView = activePanel.querySelector('#submission-details-view');
            const submissionsList = activePanel.querySelector('#admin-submissions-list') || activePanel.querySelector('#submissions-list');
            
            if (submissionDetailsView) submissionDetailsView.classList.add('hidden');
            if (submissionsList) {
                if (state.isAdmin) {
                    submissionsList.classList.remove('hidden');
                } else {
                    submissionsList.style.display = 'block';
                }
            }
        }
    }
});

function startTask(e) {
            e.preventDefault();
            
            const taskId = taskIdInput.value.trim();

            if (!taskId) {
                alert('Please enter a task ID');
                    return;
                }
            state.currentTask = taskId;
            showClassificationPanel();
        }

        function showClassificationPanel() {
    hideAllPanels();
    classificationPanel.style.display = 'block';

    const flashValue = document.getElementById('flash-number').value.trim() || 'Not provided';
    currentUserDisplay.textContent = `User: ${state.currentUser.name} (${state.currentUser.shift}) - Flash: ${flashValue}`;

    currentTaskDisplay.textContent = `GULP Link: ${state.currentTask}`;
    submitBtn.style.display = 'block';

    document.getElementById('tree-container').innerHTML = '';
    new DecisionTreeNavigator(decisionTree);
}


        function collectAnswers() {
            state.currentAnswers = {};
            let isValid = true;
            
            document.querySelectorAll('.error-message').forEach(el => el.remove());
            
            const radioGroups = {};
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                const questionId = radio.name;
                radioGroups[questionId] = radioGroups[questionId] || [];
                radioGroups[questionId].push(radio);
            });
            
            for (const [questionId, radios] of Object.entries(radioGroups)) {
                const checkedRadio = radios.find(r => r.checked);
                const questionText = document.querySelector(`.question[data-id="${questionId}"]`)?.textContent || questionId;
                
                if (!checkedRadio) {
                    const questionElement = document.querySelector(`.question[data-id="${questionId}"]`);
                    if (questionElement) {
                        const errorElement = document.createElement('div');
                        errorElement.className = 'error-message';
                        errorElement.textContent = 'Please select an option for this question';
                        questionElement.parentNode.insertBefore(errorElement, questionElement.nextSibling);
                    }
                    isValid = false;
                } else {
                    const optionId = checkedRadio.parentElement.textContent.trim();
                    state.currentAnswers[questionText] = optionId;
                }
            }
            
            // معالجة الأسئلة من نوع boolean (checkboxes)
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                const questionText = checkbox.parentElement.textContent.trim();
                if (checkbox.checked) {
                    state.currentAnswers[questionText] = 'Yes';
                }
            });
            
            document.querySelectorAll('.text-input').forEach(input => {
                const questionId = input.id || input.parentElement.querySelector('.question')?.textContent.trim();
                if (input.value.trim()) {
                    state.currentAnswers[questionId] = input.value.trim();
                }
            });
            
            return isValid;
        }

       async function submitClassification(e) {
    e.preventDefault();

    const submitButton = e.target; // Define earlier to use in case of early return
    const originalText = submitButton.textContent;
    
    if (!collectAnswers()) {
        alert('Please complete all required questions before submitting');
        return;
    }

    if (!db || !currentShift) {
        alert("Firebase is not properly initialized for the current shift. Please select your shift again and wait for confirmation.");
        console.error("SubmitClassification: Firebase not ready. Current DB state:", db, "Current shift:", currentShift);
        return;
    }

    submitButton.disabled = true;
    submitButton.innerHTML = `Submitting <span class="loading"></span>`;

    try {
        const submission = {
            user: state.currentUser,
            taskId: state.currentTask,
            date: new Date(), // Client time; serverTimestamp can be used in save
            answers: state.currentAnswers
        };

        const submissionId = await saveSubmission(submission);
        submission.id = submissionId;
        state.submissions.push(submission);
        
        // Show custom popup with a fun cat GIF (kept as requested)
        const popupContent = document.createElement('div');
        popupContent.className = 'quality-popup';
        
        // Pick a fun GIF
        const gifs = [
          'https://media.giphy.com/media/BzyTuYCmvSORqs1ABM/giphy.gif',
          'https://media.giphy.com/media/PQ0VI3S5vqL5pwQQJX/giphy.gif',
          'https://media.giphy.com/media/3o6MbbwX2g2GA4MUus/giphy.gif',
          'https://media.giphy.com/media/x6bMh4jZvucEWSOGDW/giphy.gif',
          'https://media.giphy.com/media/fjxbfQKLcKzAJIqSuD/giphy.gif',
          'https://media.giphy.com/media/YDt36FAQGthS1j25kV/giphy.gif',
          'https://media.giphy.com/media/9nNlbStLjRviaEsmdS/giphy.gif',
          'https://media.giphy.com/media/dUQL2bKltOU7cO9Maw/giphy.gif',
          'https://media.giphy.com/media/7V0IPzQflK5lC24r29/giphy.gif',
          'https://media.giphy.com/media/fXDqamyZLsDqNAcJEf/giphy.gif',
          'https://media.giphy.com/media/H4DjXQXamtTiIuCcRU/giphy.gif'
        ];
        const catGifUrl = gifs[Math.floor(Math.random() * gifs.length)];
        
        popupContent.innerHTML = `
            <div class="popup-content">
                <img src="${catGifUrl}" alt="Cat reaction" class="cat-gif">
                <h3>Submission Successful! 🎉</h3>
                <p><strong>Task ID:</strong> ${state.currentTask}</p>
                <button id="responder-dashboard-btn" onclick="window.open('https://script.google.com/macros/s/AKfycbzxYnMXHMiXZY2pyXL8AwNISlgQJQPmOVj3Gs7PTyW3pM8OfaV5gIzGybeAdLrtNSGayw/exec', '_blank')">Practice Dashboard</button>
                <button onclick="closeSubmissionPopup(this)" class="close-popup">Close</button>
            </div>
        `;
        
        document.body.appendChild(popupContent);

        // 🚀 Instead of auto-closing with a long timer,
        // the user closes manually OR we can start a new task immediately:
        // startNewTask(); // uncomment if you want immediate task switching

    } catch (error) {
        console.error("Error submitting:", error);
        alert("Error during submission. Please try again.");
    } finally {
        submitButton.disabled = false;
        submitButton.textContent = originalText;
    }
}

   


       let currentSubmissionPage = 1;
const submissionsPerPage = 5;
let filteredSubmissions = [];
let userSubsSortField = 'date';
let userSubsSortDir = 'desc'; // 'desc' or 'asc'

// Cache and pagination state for the current user's submissions
let userSubsCache = [];
let userSubsCursor = null;
let userSubsHasMore = true;

async function loadUserSubmissionsPaginated(pageSize = submissionsPerPage, reset = false) {
    if (!state.currentUser) return;
    if (reset) {
        userSubsCache = [];
        userSubsCursor = null;
        userSubsHasMore = true;
    }
    if (!userSubsHasMore) return;
    try {
        let query = db.collection('submissions')
            .where('user.name', '==', state.currentUser.name)
            .where('user.shift', '==', state.currentUser.shift)
            .orderBy('date', 'desc')
            .limit(pageSize);
        if (userSubsCursor) query = query.startAfter(userSubsCursor);
        const snap = await query.get();
        if (!snap.empty) {
            const newItems = snap.docs.map(d => {
                const data = d.data();
                const dte = data.date?.toDate?.() || new Date();
                return {
                    id: d.id,
                    ...data,
                    date: dte,
                    dateFormatted: formatDate(dte)
                };
            });
            userSubsCache.push(...newItems);
            userSubsCursor = snap.docs[snap.docs.length - 1];
            userSubsHasMore = snap.size === pageSize;
            // Keep global in sync for details/download
            state.submissions = [...userSubsCache];
        } else {
            userSubsHasMore = false;
        }
    } catch (err) {        // Fallback: load by name only (no composite index needed), then filter by shift in-memory
        let fallbackLoaded = false;
        try {
            const snap = await db.collection('submissions')
                .where('user.name', '==', state.currentUser.name)
                .limit(pageSize * 5) // fetch more to compensate for client-side filtering
                .get();
            const newItems = snap.docs.map(d => {
                const data = d.data();
                const dte = data.date?.toDate?.() || new Date();
                return {
                    id: d.id,
                    ...data,
                    date: dte,
                    dateFormatted: formatDate(dte)
                };
            }).filter(it => it.user && it.user.shift === state.currentUser.shift);
            // Merge avoiding duplicates
            const existingIds = new Set(userSubsCache.map(it => it.id));
            newItems.forEach(it => { if (!existingIds.has(it.id)) userSubsCache.push(it); });
            // Sort client-side
            userSubsCache.sort((a,b) => b.date - a.date);
            userSubsHasMore = false; // disable further pagination in fallback mode
            state.submissions = [...userSubsCache];
            fallbackLoaded = userSubsCache.length > 0;
        } catch (fallbackErr) {
            console.error('Fallback user submissions load failed:', fallbackErr);
        }
        if (!fallbackLoaded) {
            handleFirestoreIndexError(err);
        }
    }
}

function handleFirestoreIndexError(err) {
    try {
        const msg = String(err && (err.message || err));
        if (msg.includes('requires an index')) {
            const match = msg.match(/https?:\/\/console\.firebase\.google\.com[^\s)]+/);
            const url = match ? match[0] : null;
            const help = 'This query needs a composite Firestore index on fields: user.name (ASC), user.shift (ASC), date (DESC).';
            if (url) {
                alert(help + '\n\nA tab will open to create it now.');
                window.open(url, '_blank');
            } else {
                alert(help + '\n\nOpen Firebase Console > Firestore > Indexes > Add composite index (collection: submissions).');
            }
        }
    } catch (e) { /* ignore */ }
}

async function showSubmissionsPanel() {
    hideAllPanels();
    submissionsPanel.style.display = 'block';

    // Make header clickable to toggle sort by date
    const headerEl = submissionsPanel.querySelector('h2');
    if (headerEl) {
        headerEl.style.cursor = 'pointer';
        headerEl.title = 'Click to toggle sort by Date';
        headerEl.innerText = `Your Submissions (Date ${userSubsSortDir === 'desc' ? '↓' : '↑'})`;
        if (!headerEl.dataset.sortAttached) {
            headerEl.addEventListener('click', toggleUserSubsSort);
            headerEl.dataset.sortAttached = '1';
        }
    }

    // Load only current user's submissions (paginated)
    await loadUserSubmissionsPaginated(submissionsPerPage, true);

    // فلتر التاريخ إذا مش موجود
    if (!document.getElementById('date-filter-container')) {
        const filterContainer = document.createElement('div');
        filterContainer.id = 'date-filter-container';
        filterContainer.className = 'date-filter-container';
        filterContainer.innerHTML = `
            <div class="form-group">
                <label for="date-filter">Filter by date:</label>
                <select id="date-filter" class="date-filter">
                    <option value="today" selected>Today only</option>
                    <option value="all">All dates</option>
                    <option value="custom">Select date...</option>
                </select>
                <input type="date" id="custom-date" class="custom-date" style="display: none;">
            </div>
        `;

        submissionsPanel.insertBefore(filterContainer, submissionsList);

        const dateFilter = document.getElementById('date-filter');
        const customDate = document.getElementById('custom-date');

        dateFilter.addEventListener('change', function () {
            if (this.value === 'custom') {
                customDate.style.display = 'inline-block';
                const today = new Date();
                customDate.value = formatDate(today);
            } else {
                customDate.style.display = 'none';
            }
            filterSubmissions();
        });

        customDate.addEventListener('change', filterSubmissions);
    }

    // Apply initial filter and render
    filterSubmissions();
}

function filterSubmissions() {
    const dateFilter = document.getElementById('date-filter');
    const customDate = document.getElementById('custom-date');
    const filterValue = dateFilter.value;

    submissionsList.innerHTML = '';

    let userSubmissions = [...userSubsCache];

    if (filterValue === 'today') {
        userSubmissions = userSubmissions.filter(sub => isToday(sub.date));
    } else if (filterValue === 'custom' && customDate.value) {
        const selectedDate = customDate.value;
        userSubmissions = userSubmissions.filter(sub => sub.dateFormatted === selectedDate);
    }

    // Apply in-memory sorting
    if (userSubsSortField === 'date') {
        userSubmissions.sort((a, b) => userSubsSortDir === 'desc' ? (b.date - a.date) : (a.date - b.date));
    }
    filteredSubmissions = userSubmissions;
    currentSubmissionPage = 1;

    renderSubmissionPage();
}

function toggleUserSubsSort() {
    userSubsSortDir = (userSubsSortDir === 'desc') ? 'asc' : 'desc';
    const headerEl = submissionsPanel.querySelector('h2');
    if (headerEl) headerEl.innerText = `Your Submissions (Date ${userSubsSortDir === 'desc' ? '↓' : '↑'})`;
    filterSubmissions();
}

function renderSubmissionPage() {
    submissionsList.innerHTML = '';

    if (filteredSubmissions.length === 0) {
        submissionsList.innerHTML = '<p>No submissions found for the selected date.</p>';
        removePaginationControls();
        return;
    }

    // ✅ حساب عدد الصفحات الكلي
    const totalPages = Math.ceil(filteredSubmissions.length / submissionsPerPage);

    // ✅ التأكد من أن الصفحة الحالية ضمن النطاق
    if (currentSubmissionPage > totalPages) currentSubmissionPage = totalPages || 1;

    // ✅ حساب الفهرسة لبدء ونهاية الصفحة
    const start = (currentSubmissionPage - 1) * submissionsPerPage;
    const pageItems = filteredSubmissions.slice(start, start + submissionsPerPage);

    // ✅ عرض عناصر الصفحة
    pageItems.forEach(sub => {
        const subElement = document.createElement('div');
        subElement.className = 'submission';
        subElement.innerHTML = `
            <p><strong>Task Link:</strong> ${sub.taskId}</p>
            <p><strong>Date:</strong> ${sub.date.toLocaleString()}</p>
            <button onclick="viewSubmissionDetails('${sub.id}')">View Details</button>
        `;
        submissionsList.appendChild(subElement);
    });

    // ✅ عرض أزرار الصفحة
    renderPaginationControls(totalPages);
}


function renderPaginationControls() {
    removePaginationControls();

    const totalPages = Math.ceil(filteredSubmissions.length / submissionsPerPage);
    if (totalPages <= 1) return;

    const pagination = document.createElement("div");
    pagination.id = "pagination-controls";
    pagination.className = "pagination-controls";
    pagination.innerHTML = `
        <button onclick="prevSubmissionPage()" ${currentSubmissionPage === 1 ? 'disabled' : ''}>Previous</button>
        <span>Page ${currentSubmissionPage} of ${totalPages}</span>
        <button onclick="nextSubmissionPage()" ${currentSubmissionPage === totalPages ? 'disabled' : ''}>Next</button>
    `;

submissionsPanel.insertBefore(pagination, document.getElementById("new-task-btn"));
}

function removePaginationControls() {
    const existing = document.getElementById("pagination-controls");
    if (existing) existing.remove();
}

function nextSubmissionPage() {
    const totalPages = Math.ceil(filteredSubmissions.length / submissionsPerPage);
    if (currentSubmissionPage < totalPages) {
        currentSubmissionPage++;
        renderSubmissionPage();
        return;
    }
    // Try to fetch more if available
    if (userSubsHasMore) {
        loadUserSubmissionsPaginated().then(() => {
            filteredSubmissions = [...userSubsCache];
            currentSubmissionPage++;
            renderSubmissionPage();
        });
    }
}

function prevSubmissionPage() {
    if (currentSubmissionPage > 1) {
        currentSubmissionPage--;
        renderSubmissionPage();
    }
}

        function startNewTask() {
    // Clear the task ID input field
    const taskIdInput = document.getElementById('task-id');
    if (taskIdInput) {
        taskIdInput.value = '';
        console.log('Cleared task ID input');
    } else {
        console.error('Task ID input element not found!');
    }
    
    // Reset the current task
    state.currentTask = null;
    console.log('Reset current task to null');
    
    // Show the task panel
    showTaskPanel();
}
        function cancelTask(e) {
            if (e) e.preventDefault();
            if (confirm('Are you sure you want to cancel this task? All progress will be lost.')) {
                // Close any open success popup to avoid overlay issues
                document.querySelectorAll('.quality-popup').forEach(p => p.remove());
                showTaskPanel();
                taskIdInput.value = state.currentTask;
                state.currentTask = null;
            }

        }

        function logout() {
            state.currentUser = null;
            state.isAdmin = false;
            state.currentTask = null;
            showLoginPanel();
        }

        function showLoginPanel() {
            hideAllPanels();
            loginPanel.style.display = 'block';
            document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
            userDropdown.innerHTML = '<option value="">Please select shift first</option>';
            userDropdown.disabled = true;
            if (flashNumberInput) flashNumberInput.value = '';
        }

        function hideAllPanels() {
            loginPanel.style.display = 'none';
            taskPanel.style.display = 'none';
            classificationPanel.style.display = 'none';
            submissionsPanel.style.display = 'none';
            adminPanel.style.display = 'none';
            userSubmissionsView.classList.add('hidden');
            // Hide all details views in both user and admin panels
            document.querySelectorAll('.submission-details-view').forEach(el => el.classList.add('hidden'));
        }

        // Helper to close popup and return to task panel
        function closeSubmissionPopup(btn) {
            try {
                const root = btn && btn.closest('.quality-popup');
                if (root) root.remove();
            } catch (_) { /* ignore */ }
            startNewTask();
        }

        // Global functions
        window.downloadSubmission = function(submissionId) {
            const submission = state.submissions.find(sub => sub.id === submissionId);
            if (!submission) return;

            // Convert date to string for JSON
            const submissionForExport = {
                ...submission,
                date: submission.date.toISOString()
            };

            const dataStr = JSON.stringify(submissionForExport, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `Submission_${submission.taskId}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        };

        window.viewUserSubmissions = viewUserSubmissions;
        window.viewSubmissionDetails = viewSubmissionDetails;

 class DecisionTreeNavigator {
        constructor(treeData) {
            this.treeData = treeData;
            this.container = document.getElementById('tree-container');
            this.container.innerHTML = '';
            this.renderTree(this.treeData.childNodes, this.container);
        }
        renderTree(nodes, parentElement) {
            nodes.forEach(node => {
                const nodeElement = document.createElement('div');
                nodeElement.className = 'node';
                // Render question
                const questionElement = document.createElement('div');
                questionElement.className = 'question';
                questionElement.textContent = node.displayName;
                questionElement.setAttribute('data-id', node.id);
                nodeElement.appendChild(questionElement);
                // Render options if choice node or branch node with choices
                if (node.nodeType === 'choice' || (node.nodeType === 'branch' && node.childNodes.some(child => child.nodeType !== 'boolean'))) {
    const optionsElement = document.createElement('div');
    optionsElement.className = 'options';

    node.childNodes.forEach((child, index) => {
        const optionId = `${node.id}_${index}`;

        const label = document.createElement('label');
        label.className = 'option';
        label.setAttribute('for', optionId); // optional but good

        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = node.id;
        radio.id = optionId;

        radio.addEventListener('change', () => {
            this.handleSelection(label, child);
        });

        label.appendChild(radio);
        label.appendChild(document.createTextNode(' ' + child.displayName));
        optionsElement.appendChild(label);
    });

    nodeElement.appendChild(optionsElement);
}
                // Render branch node with boolean children directly
                else if (node.nodeType === 'branch' && node.childNodes.every(child => child.nodeType === 'boolean')) {
                    const booleanGroupElement = document.createElement('div');
                    booleanGroupElement.className = 'boolean-group';
                    
                    node.childNodes.forEach(child => {
                        const checkboxElement = document.createElement('label');
                        checkboxElement.className = 'boolean-option';
                        checkboxElement.htmlFor = child.id;
                        checkboxElement.style.display = 'flex';
                        checkboxElement.style.alignItems = 'center';
                        checkboxElement.style.padding = '12px 16px';
                        checkboxElement.style.borderRadius = '6px';
                        checkboxElement.style.cursor = 'pointer';
                        checkboxElement.style.transition = 'all 0.2s';
                        
                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.id = child.id;
                        checkbox.name = child.id;
                        checkbox.style.marginRight = '12px';
                        checkbox.style.cursor = 'pointer';
                        
                        const label = document.createElement('span');
                        label.textContent = child.displayName;
                        label.style.flex = '1';
                        
                        // Handle click on the entire checkbox element
                        checkboxElement.addEventListener('change', () => {
                            this.handleBooleanSelection(checkbox, child);
                        });
                        
                        checkboxElement.appendChild(checkbox);
                        checkboxElement.appendChild(label);
                        booleanGroupElement.appendChild(checkboxElement);
                    });
                    
                    nodeElement.appendChild(booleanGroupElement);
                }

                // Render boolean node as checkbox
                else if (node.nodeType === 'boolean') {
                    const checkboxElement = document.createElement('div');
                    checkboxElement.className = 'boolean-option';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = node.id;
                    checkbox.name = node.id;
                    checkbox.addEventListener('change', () => {
                        this.handleBooleanSelection(checkbox, node);
                    });
                    
                    const label = document.createElement('label');
                    label.setAttribute('for', node.id);
                    label.textContent = node.displayName;
                    label.style.cursor = 'pointer';
                    label.style.flex = '1';
                    
                    // Make the entire element clickable
                    checkboxElement.addEventListener('click', (e) => {
                        // Don't trigger if clicking directly on the checkbox
                        if (e.target !== checkbox) {
                            checkbox.checked = !checkbox.checked;
                            this.handleBooleanSelection(checkbox, node);
                        }
                    });
                    
                    checkboxElement.appendChild(checkbox);
                    checkboxElement.appendChild(label);
                    nodeElement.appendChild(checkboxElement);
                }
                // Render free text input
                else if (node.nodeType === 'freeText') {
                    const inputElement = document.createElement('textarea');
                    inputElement.className = 'text-input';
                    inputElement.id = node.id;
                    inputElement.placeholder = node.displayName;
                    nodeElement.appendChild(inputElement);
                }
                parentElement.appendChild(nodeElement);
            });
        }
        handleSelection(optionElement, selectedNode) {
            // إزالة أي اختيار سابق
            document.querySelectorAll('.selected').forEach(el => {
                el.classList.remove('selected');
            });
            optionElement.classList.add('selected');
            // حذف أي أسئلة فرعية قديمة
            const existingChildNodes = optionElement.parentElement.querySelectorAll('.child-node');
            existingChildNodes.forEach(node => node.remove());
            // إذا الإجابة Branch ارسم الأسئلة الفرعية
            if (selectedNode.nodeType === 'branch' && selectedNode.childNodes.length > 0) {
                const childContainer = document.createElement('div');
                childContainer.className = 'child-node';
                this.renderTree(selectedNode.childNodes, childContainer);
                optionElement.parentElement.appendChild(childContainer);
            }
            
        }

        handleBooleanSelection(checkbox, node) {
            // Handle boolean selection with enhanced visual feedback
            if (checkbox.checked) {
                checkbox.parentElement.classList.add('selected');
                checkbox.parentElement.style.backgroundColor = ' var(--container-bg)';
                checkbox.parentElement.style.borderColor = '#2196f3';
            } else {
                checkbox.parentElement.classList.remove('selected');
                checkbox.parentElement.style.backgroundColor = '';
                checkbox.parentElement.style.borderColor = '';
            }
        }
    }

    // Add this to your existing JavaScript
    function toggleTheme() {
        const body = document.body;
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        body.setAttribute('data-theme', newTheme);
        
        // Update icon
        const icon = document.querySelector('.theme-toggle i');
        icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        
        // Save preference
        localStorage.setItem('theme', newTheme);
    }

    // Check for saved theme preference
    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        const icon = document.querySelector('.theme-toggle i');
        icon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
    });

    // Add this at the end of your existing JavaScript
    // Create particle effect
    const particlesContainer = document.getElementById('particles-container');
    const particleCount = 80;
    
    // Create particles
    for (let i = 0; i < particleCount; i++) {
        createParticle();
    }
    
    function createParticle() {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 3 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        resetParticle(particle);
        particlesContainer.appendChild(particle);
        animateParticle(particle);
    }
    
    function resetParticle(particle) {
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        
        particle.style.left = `${posX}%`;
        particle.style.top = `${posY}%`;
        particle.style.opacity = '0';
        
        return { x: posX, y: posY };
    }

    function animateParticle(particle) {
        const pos = resetParticle(particle);
        const duration = Math.random() * 10 + 10;
        const delay = Math.random() * 5;
    
        setTimeout(() => {
            particle.style.transition = `all ${duration}s linear`;
            particle.style.opacity = Math.random() * 0.3 + 0.1;
            
            const moveX = pos.x + (Math.random() * 20 - 10);
            const moveY = pos.y - Math.random() * 30;
            
            particle.style.left = `${moveX}%`;
            particle.style.top = `${moveY}%`;
            
            setTimeout(() => {
                animateParticle(particle);
            }, duration * 1000);
        }, delay * 1000);
    }
    // Mouse interaction
    document.addEventListener('mousemove', (e) => {
        const mouseX = (e.clientX / window.innerWidth) * 100;
        const mouseY = (e.clientY / window.innerHeight) * 100;
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 4 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${mouseX}%`;
        particle.style.top = `${mouseY}%`;
        particle.style.opacity = '0.6';
        particlesContainer.appendChild(particle);
        setTimeout(() => {
            particle.style.transition = 'all 2s ease-out';
            particle.style.left = `${mouseX + (Math.random() * 10 - 5)}%`;
            particle.style.top = `${mouseY + (Math.random() * 10 - 5)}%`;
            particle.style.opacity = '0';
            
            setTimeout(() => {
                particle.remove();
            }, 2000);
        }, 10);
        const spheres = document.querySelectorAll('.gradient-sphere');
        const moveX = (e.clientX / window.innerWidth - 0.5) * 5;
        const moveY = (e.clientY / window.innerHeight - 0.5) * 5;
        
        spheres.forEach(sphere => {
            sphere.style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
    });
    // Add this at the beginning of your JavaScript
    // Create particles for explosion
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            // Set random position for each particle
            const x = Math.random() * 400 - 200;
            const y = Math.random() * 400 - 200;
            particle.style.setProperty('--x', `calc(-50% + ${x}px)`);
            particle.style.setProperty('--y', `calc(-50% + ${y}px)`);
            // Random delay for more natural effect
            particle.style.animationDelay = `${Math.random() * 0.5}s`;
            particlesContainer.appendChild(particle);
        }
    }
    // Handle loading screen
    window.addEventListener('load', () => {
        createParticles();
        setTimeout(() => {
            const loadingScreen = document.querySelector('.loading-screen');
            loadingScreen.classList.add('fade-out');
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);
        }, 2000);
    });
(function() {
  const TAB_KEY = "active_tab_lock";
  const myId = Date.now().toString();
  const overlay = document.getElementById("overlay");
  const btnContinue = document.getElementById("continueHere");
  const btnStay = document.getElementById("stayThere");

  // Claim active tab
  localStorage.setItem(TAB_KEY, myId);

  // If another tab already has the lock → show overlay
  if (localStorage.getItem(TAB_KEY) !== myId) {
    overlay.style.display = "flex";
  }

  // Watch for changes
  window.addEventListener("storage", (e) => {
    if (e.key === TAB_KEY) {
      if (e.newValue !== myId) {
        overlay.style.display = "flex"; // another tab active
      } else {
        overlay.style.display = "none"; // this tab reclaimed
      }
    }
  });

  // Button: continue here → take over lock
  btnContinue.addEventListener("click", () => {
    localStorage.setItem(TAB_KEY, myId);
    overlay.style.display = "none";
  });

  // Button: stay on other tab → close this one
btnStay.addEventListener("click", () => {
  window.close();
  // If browser blocks window.close(), fallback to blank page
  setTimeout(() => {
    if (!window.closed) {
      window.location.href = "about:blank";
    }
  }, 200);
});

  // Cleanup when tab closes
  window.addEventListener("beforeunload", () => {
    if (localStorage.getItem(TAB_KEY) === myId) {
      localStorage.removeItem(TAB_KEY);
    }
  });
})();
    </script>
<script>
(function(){
  const TARGET = [
    "Which hazardous behavior is used for loss factor and ego action analysis?",
    "What is the loss factor type you observe?",
    "What is the loss factor action you observe?",
    "What is the loss factor relative location you observe?",
    "What is the loss factor relative motion you observe?"
  ];

  // store nodes we moved so we can restore them on "re-open"
  const movedChildren = new WeakMap();

  // insert CSS for smooth collapse (keeps DOM nodes present)
  function ensureStyle(){
    if (document.getElementById('lf-collapse-style')) return;
    const s = document.createElement('style');
    s.id = 'lf-collapse-style';
    s.textContent = `
      /* collapse visually but keep elements in DOM */
      .options.collapsed {
        max-height: 0 !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        overflow: hidden !important;
        transition: max-height 0.28s ease, padding 0.28s ease;
      }
      .selected-answer {
        margin-top: 8px;
        font-weight: 700;
        color: #006400;
      }
    `;
    document.head.appendChild(s);
  }

  function setupNode(node){
    if (!node || node.dataset.lfAttached) return;
    node.dataset.lfAttached = '1';

    const question = node.querySelector('.question');
    if (!question) return;
    const qText = (question.textContent || '').trim();
    if (!TARGET.some(t => qText.includes(t))) return;

    const optionsDiv = node.querySelector('.options');
    if (!optionsDiv) return;

    // attach listeners to radios (idempotent because we mark node)
    const radios = optionsDiv.querySelectorAll("input[type='radio']");
    radios.forEach(radio => {
      radio.addEventListener('change', (ev) => {
        // get label text cleanly
        const label = radio.closest('label') || radio.parentElement;
        const selectedLabel = (label && label.textContent || '').trim() || 'Selected';

        // create/refresh visible selected-answer just above options
        let answerDiv = node.querySelector('.selected-answer');
        if (!answerDiv) {
          answerDiv = document.createElement('div');
          answerDiv.className = 'selected-answer';
          // insert before optionsDiv so it remains visible when options collapse
          node.insertBefore(answerDiv, optionsDiv);
        }
        answerDiv.textContent = 'Selected: ' + selectedLabel;

        // Allow any DTree logic to add subquestions first, then move them out if needed
        // small delay ensures dynamic rendering completes
        setTimeout(() => {
          // find any child-node elements that are descendants of this node
          const foundChildNodes = Array.from(node.querySelectorAll('.child-node'));
          if (foundChildNodes.length) {
            // move them (preserve order) as siblings right after this node
            const parent = node.parentNode;
            foundChildNodes.forEach(ch => parent.insertBefore(ch, node.nextSibling));
            movedChildren.set(node, foundChildNodes);
          }

          // finally collapse only the options div visually (DOM kept)
          optionsDiv.classList.add('collapsed');

        }, 60); // tweak delay if your DTree needs more time (e.g., 150)
        
        // scroll back to the question (change behavior to "auto" if you prefer instant)
        try {
          question.scrollIntoView({ behavior: "auto", block: "center" });
        } catch(e) {
          question.scrollIntoView();
        }

        // visual flash to highlight
        question.style.transition = "background-color 0.4s";
        question.style.backgroundColor = "var(--container-bg)";
        setTimeout(() => question.style.backgroundColor = "", 1400);
      });
    });

    // reopen on question click: restore options and move child nodes back inside node
    question.addEventListener('click', () => {
      if (!optionsDiv.classList.contains('collapsed')) return;
      optionsDiv.classList.remove('collapsed');

      const moved = movedChildren.get(node);
      if (moved && moved.length) {
        moved.forEach(ch => node.appendChild(ch));
        movedChildren.delete(node);
      }
    });
  }

  function initWatch(){
    ensureStyle();

    // initial pass
    document.querySelectorAll('.node').forEach(setupNode);

    // watch for dynamic additions (works with JSON-driven DTree)
    const obs = new MutationObserver(mutations => {
      for (const m of mutations) {
        m.addedNodes.forEach(n => {
          if (n.nodeType !== 1) return;
          if (n.classList && n.classList.contains('node')) setupNode(n);
          else if (n.querySelectorAll) n.querySelectorAll('.node').forEach(setupNode);
        });
      }
    });
    obs.observe(document.body, { childList: true, subtree: true });
  }

  if (document.readyState === 'loading') {
    window.addEventListener('DOMContentLoaded', initWatch);
  } else initWatch();

})();
</script>
</body>
</html>
